(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Th(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const _e={},As=[],On=()=>{},Zp=()=>!1,Vl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Eh=t=>t.startsWith("onUpdate:"),Ye=Object.assign,Oh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ny=Object.prototype.hasOwnProperty,xe=(t,e)=>Ny.call(t,e),ne=Array.isArray,_s=t=>Wl(t)==="[object Map]",em=t=>Wl(t)==="[object Set]",oe=t=>typeof t=="function",We=t=>typeof t=="string",Di=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",tm=t=>(De(t)||oe(t))&&oe(t.then)&&oe(t.catch),nm=Object.prototype.toString,Wl=t=>nm.call(t),By=t=>Wl(t).slice(8,-1),im=t=>Wl(t)==="[object Object]",Lh=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,hr=Th(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$l=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Fy=/-\w/g,ki=$l(t=>t.replace(Fy,e=>e.slice(1).toUpperCase())),Hy=/\B([A-Z])/g,as=$l(t=>t.replace(Hy,"-$1").toLowerCase()),sm=$l(t=>t.charAt(0).toUpperCase()+t.slice(1)),ga=$l(t=>t?`on${sm(t)}`:""),wi=(t,e)=>!Object.is(t,e),jo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},rm=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},lc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Vy=t=>{const e=We(t)?Number(t):NaN;return isNaN(e)?t:e};let $f;const Ul=()=>$f||($f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dh(t){if(ne(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=We(i)?jy(i):Dh(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(We(t)||De(t))return t}const Wy=/;(?![^(]*\))/g,$y=/:([^]+)/,Uy=/\/\*[^]*?\*\//g;function jy(t){const e={};return t.replace(Uy,"").split(Wy).forEach(n=>{if(n){const i=n.split($y);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function jl(t){let e="";if(We(t))e=t;else if(ne(t))for(let n=0;n<t.length;n++){const i=jl(t[n]);i&&(e+=i+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const zy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ky=Th(zy);function om(t){return!!t||t===""}const lm=t=>!!(t&&t.__v_isRef===!0),xi=t=>We(t)?t:t==null?"":ne(t)||De(t)&&(t.toString===nm||!oe(t.toString))?lm(t)?xi(t.value):JSON.stringify(t,am,2):String(t),am=(t,e)=>lm(e)?am(t,e.value):_s(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[ba(i,r)+" =>"]=s,n),{})}:em(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ba(n))}:Di(e)?ba(e):De(e)&&!ne(e)&&!im(e)?String(e):e,ba=(t,e="")=>{var n;return Di(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ct;class cm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ct,!e&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ct;try{return ct=this,e()}finally{ct=n}}}on(){++this._on===1&&(this.prevScope=ct,ct=this)}off(){this._on>0&&--this._on===0&&(ct=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Rh(t){return new cm(t)}function hm(){return ct}function qy(t,e=!1){ct&&ct.cleanups.push(t)}let Ee;const ya=new WeakSet;class fm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ct&&ct.active&&ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ya.has(this)&&(ya.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Uf(this),pm(this);const e=Ee,n=nn;Ee=this,nn=!0;try{return this.fn()}finally{mm(this),Ee=e,nn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nh(e);this.deps=this.depsTail=void 0,Uf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ya.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ac(this)&&this.run()}get dirty(){return ac(this)}}let um=0,fr,ur;function dm(t,e=!1){if(t.flags|=8,e){t.next=ur,ur=t;return}t.next=fr,fr=t}function Ph(){um++}function Ih(){if(--um>0)return;if(ur){let e=ur;for(ur=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;fr;){let e=fr;for(fr=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function pm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function mm(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),Nh(i),Gy(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function ac(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(gm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function gm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ar)||(t.globalVersion=Ar,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ac(t))))return;t.flags|=2;const e=t.dep,n=Ee,i=nn;Ee=t,nn=!0;try{pm(t);const s=t.fn(t._value);(e.version===0||wi(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ee=n,nn=i,mm(t),t.flags&=-3}}function Nh(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Nh(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Gy(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let nn=!0;const bm=[];function Yn(){bm.push(nn),nn=!1}function Xn(){const t=bm.pop();nn=t===void 0?!0:t}function Uf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ee;Ee=void 0;try{e()}finally{Ee=n}}}let Ar=0;class Yy{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ee||!nn||Ee===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ee)n=this.activeLink=new Yy(Ee,this),Ee.deps?(n.prevDep=Ee.depsTail,Ee.depsTail.nextDep=n,Ee.depsTail=n):Ee.deps=Ee.depsTail=n,ym(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Ee.depsTail,n.nextDep=void 0,Ee.depsTail.nextDep=n,Ee.depsTail=n,Ee.deps===n&&(Ee.deps=i)}return n}trigger(e){this.version++,Ar++,this.notify(e)}notify(e){Ph();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ih()}}}function ym(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)ym(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const rl=new WeakMap,Xi=Symbol(""),cc=Symbol(""),_r=Symbol("");function ft(t,e,n){if(nn&&Ee){let i=rl.get(t);i||rl.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new Bh),s.map=i,s.key=n),s.track()}}function Wn(t,e,n,i,s,r){const o=rl.get(t);if(!o){Ar++;return}const l=a=>{a&&a.trigger()};if(Ph(),e==="clear")o.forEach(l);else{const a=ne(t),c=a&&Lh(n);if(a&&n==="length"){const h=Number(i);o.forEach((f,u)=>{(u==="length"||u===_r||!Di(u)&&u>=h)&&l(f)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(_r)),e){case"add":a?c&&l(o.get("length")):(l(o.get(Xi)),_s(t)&&l(o.get(cc)));break;case"delete":a||(l(o.get(Xi)),_s(t)&&l(o.get(cc)));break;case"set":_s(t)&&l(o.get(Xi));break}}Ih()}function Xy(t,e){const n=rl.get(t);return n&&n.get(e)}function us(t){const e=me(t);return e===t?e:(ft(e,"iterate",_r),Kt(t)?e:e.map(nt))}function zl(t){return ft(t=me(t),"iterate",_r),t}const Jy={__proto__:null,[Symbol.iterator](){return va(this,Symbol.iterator,nt)},concat(...t){return us(this).concat(...t.map(e=>ne(e)?us(e):e))},entries(){return va(this,"entries",t=>(t[1]=nt(t[1]),t))},every(t,e){return Bn(this,"every",t,e,void 0,arguments)},filter(t,e){return Bn(this,"filter",t,e,n=>n.map(nt),arguments)},find(t,e){return Bn(this,"find",t,e,nt,arguments)},findIndex(t,e){return Bn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Bn(this,"findLast",t,e,nt,arguments)},findLastIndex(t,e){return Bn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Bn(this,"forEach",t,e,void 0,arguments)},includes(...t){return wa(this,"includes",t)},indexOf(...t){return wa(this,"indexOf",t)},join(t){return us(this).join(t)},lastIndexOf(...t){return wa(this,"lastIndexOf",t)},map(t,e){return Bn(this,"map",t,e,void 0,arguments)},pop(){return qs(this,"pop")},push(...t){return qs(this,"push",t)},reduce(t,...e){return jf(this,"reduce",t,e)},reduceRight(t,...e){return jf(this,"reduceRight",t,e)},shift(){return qs(this,"shift")},some(t,e){return Bn(this,"some",t,e,void 0,arguments)},splice(...t){return qs(this,"splice",t)},toReversed(){return us(this).toReversed()},toSorted(t){return us(this).toSorted(t)},toSpliced(...t){return us(this).toSpliced(...t)},unshift(...t){return qs(this,"unshift",t)},values(){return va(this,"values",nt)}};function va(t,e,n){const i=zl(t),s=i[e]();return i!==t&&!Kt(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const Qy=Array.prototype;function Bn(t,e,n,i,s,r){const o=zl(t),l=o!==t&&!Kt(t),a=o[e];if(a!==Qy[e]){const f=a.apply(t,r);return l?nt(f):f}let c=n;o!==t&&(l?c=function(f,u){return n.call(this,nt(f),u,t)}:n.length>2&&(c=function(f,u){return n.call(this,f,u,t)}));const h=a.call(o,c,i);return l&&s?s(h):h}function jf(t,e,n,i){const s=zl(t);let r=n;return s!==t&&(Kt(t)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,t)}):r=function(o,l,a){return n.call(this,o,nt(l),a,t)}),s[e](r,...i)}function wa(t,e,n){const i=me(t);ft(i,"iterate",_r);const s=i[e](...n);return(s===-1||s===!1)&&Vh(n[0])?(n[0]=me(n[0]),i[e](...n)):s}function qs(t,e,n=[]){Yn(),Ph();const i=me(t)[e].apply(t,n);return Ih(),Xn(),i}const Zy=Th("__proto__,__v_isRef,__isVue"),vm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Di));function e1(t){Di(t)||(t=String(t));const e=me(this);return ft(e,"has",t),e.hasOwnProperty(t)}class wm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?h1:km:r?Cm:Sm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ne(e);if(!s){let a;if(o&&(a=Jy[n]))return a;if(n==="hasOwnProperty")return e1}const l=Reflect.get(e,n,Fe(e)?e:i);return(Di(n)?vm.has(n):Zy(n))||(s||ft(e,"get",n),r)?l:Fe(l)?o&&Lh(n)?l:l.value:De(l)?s?Am(l):Xr(l):l}}class xm extends wm{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const a=Ai(r);if(!Kt(i)&&!Ai(i)&&(r=me(r),i=me(i)),!ne(e)&&Fe(r)&&!Fe(i))return a||(r.value=i),!0}const o=ne(e)&&Lh(n)?Number(n)<e.length:xe(e,n),l=Reflect.set(e,n,i,Fe(e)?e:s);return e===me(s)&&(o?wi(i,r)&&Wn(e,"set",n,i):Wn(e,"add",n,i)),l}deleteProperty(e,n){const i=xe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&Wn(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!Di(n)||!vm.has(n))&&ft(e,"has",n),i}ownKeys(e){return ft(e,"iterate",ne(e)?"length":Xi),Reflect.ownKeys(e)}}class t1 extends wm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const n1=new xm,i1=new t1,s1=new xm(!0);const hc=t=>t,co=t=>Reflect.getPrototypeOf(t);function r1(t,e,n){return function(...i){const s=this.__v_raw,r=me(s),o=_s(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=s[t](...i),h=n?hc:e?ol:nt;return!e&&ft(r,"iterate",a?cc:Xi),{next(){const{value:f,done:u}=c.next();return u?{value:f,done:u}:{value:l?[h(f[0]),h(f[1])]:h(f),done:u}},[Symbol.iterator](){return this}}}}function ho(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function o1(t,e){const n={get(s){const r=this.__v_raw,o=me(r),l=me(s);t||(wi(s,l)&&ft(o,"get",s),ft(o,"get",l));const{has:a}=co(o),c=e?hc:t?ol:nt;if(a.call(o,s))return c(r.get(s));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!t&&ft(me(s),"iterate",Xi),s.size},has(s){const r=this.__v_raw,o=me(r),l=me(s);return t||(wi(s,l)&&ft(o,"has",s),ft(o,"has",l)),s===l?r.has(s):r.has(s)||r.has(l)},forEach(s,r){const o=this,l=o.__v_raw,a=me(l),c=e?hc:t?ol:nt;return!t&&ft(a,"iterate",Xi),l.forEach((h,f)=>s.call(r,c(h),c(f),o))}};return Ye(n,t?{add:ho("add"),set:ho("set"),delete:ho("delete"),clear:ho("clear")}:{add(s){!e&&!Kt(s)&&!Ai(s)&&(s=me(s));const r=me(this);return co(r).has.call(r,s)||(r.add(s),Wn(r,"add",s,s)),this},set(s,r){!e&&!Kt(r)&&!Ai(r)&&(r=me(r));const o=me(this),{has:l,get:a}=co(o);let c=l.call(o,s);c||(s=me(s),c=l.call(o,s));const h=a.call(o,s);return o.set(s,r),c?wi(r,h)&&Wn(o,"set",s,r):Wn(o,"add",s,r),this},delete(s){const r=me(this),{has:o,get:l}=co(r);let a=o.call(r,s);a||(s=me(s),a=o.call(r,s)),l&&l.call(r,s);const c=r.delete(s);return a&&Wn(r,"delete",s,void 0),c},clear(){const s=me(this),r=s.size!==0,o=s.clear();return r&&Wn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=r1(s,t,e)}),n}function Fh(t,e){const n=o1(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(xe(n,s)&&s in i?n:i,s,r)}const l1={get:Fh(!1,!1)},a1={get:Fh(!1,!0)},c1={get:Fh(!0,!1)};const Sm=new WeakMap,Cm=new WeakMap,km=new WeakMap,h1=new WeakMap;function f1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u1(t){return t.__v_skip||!Object.isExtensible(t)?0:f1(By(t))}function Xr(t){return Ai(t)?t:Hh(t,!1,n1,l1,Sm)}function d1(t){return Hh(t,!1,s1,a1,Cm)}function Am(t){return Hh(t,!0,i1,c1,km)}function Hh(t,e,n,i,s){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=u1(t);if(r===0)return t;const o=s.get(t);if(o)return o;const l=new Proxy(t,r===2?i:n);return s.set(t,l),l}function Si(t){return Ai(t)?Si(t.__v_raw):!!(t&&t.__v_isReactive)}function Ai(t){return!!(t&&t.__v_isReadonly)}function Kt(t){return!!(t&&t.__v_isShallow)}function Vh(t){return t?!!t.__v_raw:!1}function me(t){const e=t&&t.__v_raw;return e?me(e):t}function Wh(t){return!xe(t,"__v_skip")&&Object.isExtensible(t)&&rm(t,"__v_skip",!0),t}const nt=t=>De(t)?Xr(t):t,ol=t=>De(t)?Am(t):t;function Fe(t){return t?t.__v_isRef===!0:!1}function en(t){return _m(t,!1)}function zo(t){return _m(t,!0)}function _m(t,e){return Fe(t)?t:new p1(t,e)}class p1{constructor(e,n){this.dep=new Bh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:me(e),this._value=n?e:nt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||Kt(e)||Ai(e);e=i?e:me(e),wi(e,n)&&(this._rawValue=e,this._value=i?e:nt(e),this.dep.trigger())}}function Re(t){return Fe(t)?t.value:t}const m1={get:(t,e,n)=>e==="__v_raw"?t:Re(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Fe(s)&&!Fe(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function Mm(t){return Si(t)?t:new Proxy(t,m1)}function g1(t){const e=ne(t)?new Array(t.length):{};for(const n in t)e[n]=y1(t,n);return e}class b1{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Xy(me(this._object),this._key)}}function y1(t,e,n){const i=t[e];return Fe(i)?i:new b1(t,e,n)}class v1{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Bh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ar-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Ee!==this)return dm(this,!0),!0}get value(){const e=this.dep.track();return gm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function w1(t,e,n=!1){let i,s;return oe(t)?i=t:(i=t.get,s=t.set),new v1(i,s,n)}const fo={},ll=new WeakMap;let $i;function x1(t,e=!1,n=$i){if(n){let i=ll.get(n);i||ll.set(n,i=[]),i.push(t)}}function S1(t,e,n=_e){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:l,call:a}=n,c=x=>s?x:Kt(x)||s===!1||s===0?$n(x,1):$n(x);let h,f,u,d,p=!1,g=!1;if(Fe(t)?(f=()=>t.value,p=Kt(t)):Si(t)?(f=()=>c(t),p=!0):ne(t)?(g=!0,p=t.some(x=>Si(x)||Kt(x)),f=()=>t.map(x=>{if(Fe(x))return x.value;if(Si(x))return c(x);if(oe(x))return a?a(x,2):x()})):oe(t)?e?f=a?()=>a(t,2):t:f=()=>{if(u){Yn();try{u()}finally{Xn()}}const x=$i;$i=h;try{return a?a(t,3,[d]):t(d)}finally{$i=x}}:f=On,e&&s){const x=f,C=s===!0?1/0:s;f=()=>$n(x(),C)}const v=hm(),m=()=>{h.stop(),v&&v.active&&Oh(v.effects,h)};if(r&&e){const x=e;e=(...C)=>{x(...C),m()}}let w=g?new Array(t.length).fill(fo):fo;const A=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(e){const C=h.run();if(s||p||(g?C.some((M,k)=>wi(M,w[k])):wi(C,w))){u&&u();const M=$i;$i=h;try{const k=[C,w===fo?void 0:g&&w[0]===fo?[]:w,d];w=C,a?a(e,3,k):e(...k)}finally{$i=M}}}else h.run()};return l&&l(A),h=new fm(f),h.scheduler=o?()=>o(A,!1):A,d=x=>x1(x,!1,h),u=h.onStop=()=>{const x=ll.get(h);if(x){if(a)a(x,4);else for(const C of x)C();ll.delete(h)}},e?i?A(!0):w=h.run():o?o(A.bind(null,!0),!0):h.run(),m.pause=h.pause.bind(h),m.resume=h.resume.bind(h),m.stop=m,m}function $n(t,e=1/0,n){if(e<=0||!De(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Fe(t))$n(t.value,e,n);else if(ne(t))for(let i=0;i<t.length;i++)$n(t[i],e,n);else if(em(t)||_s(t))t.forEach(i=>{$n(i,e,n)});else if(im(t)){for(const i in t)$n(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&$n(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jr(t,e,n,i){try{return i?t(...i):t()}catch(s){Kl(s,e,n)}}function sn(t,e,n,i){if(oe(t)){const s=Jr(t,e,n,i);return s&&tm(s)&&s.catch(r=>{Kl(r,e,n)}),s}if(ne(t)){const s=[];for(let r=0;r<t.length;r++)s.push(sn(t[r],e,n,i));return s}}function Kl(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||_e;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,a,c)===!1)return}l=l.parent}if(r){Yn(),Jr(r,null,10,[t,a,c]),Xn();return}}C1(t,n,s,i,o)}function C1(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const yt=[];let xn=-1;const Ms=[];let ci=null,ms=0;const Tm=Promise.resolve();let al=null;function Em(t){const e=al||Tm;return t?e.then(this?t.bind(this):t):e}function k1(t){let e=xn+1,n=yt.length;for(;e<n;){const i=e+n>>>1,s=yt[i],r=Mr(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function $h(t){if(!(t.flags&1)){const e=Mr(t),n=yt[yt.length-1];!n||!(t.flags&2)&&e>=Mr(n)?yt.push(t):yt.splice(k1(e),0,t),t.flags|=1,Om()}}function Om(){al||(al=Tm.then(Dm))}function A1(t){ne(t)?Ms.push(...t):ci&&t.id===-1?ci.splice(ms+1,0,t):t.flags&1||(Ms.push(t),t.flags|=1),Om()}function zf(t,e,n=xn+1){for(;n<yt.length;n++){const i=yt[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;yt.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Lm(t){if(Ms.length){const e=[...new Set(Ms)].sort((n,i)=>Mr(n)-Mr(i));if(Ms.length=0,ci){ci.push(...e);return}for(ci=e,ms=0;ms<ci.length;ms++){const n=ci[ms];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ci=null,ms=0}}const Mr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Dm(t){try{for(xn=0;xn<yt.length;xn++){const e=yt[xn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Jr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;xn<yt.length;xn++){const e=yt[xn];e&&(e.flags&=-2)}xn=-1,yt.length=0,Lm(),al=null,(yt.length||Ms.length)&&Dm()}}let Ut=null,Rm=null;function cl(t){const e=Ut;return Ut=t,Rm=t&&t.type.__scopeId||null,e}function Pm(t,e=Ut,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&ul(-1);const r=cl(e);let o;try{o=t(...s)}finally{cl(r),i._d&&ul(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function _1(t,e){if(Ut===null)return t;const n=Xl(Ut),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,l,a=_e]=e[s];r&&(oe(r)&&(r={mounted:r,updated:r}),r.deep&&$n(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function Bi(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Yn(),sn(a,n,8,[t.el,l,t,e]),Xn())}}const M1=Symbol("_vte"),T1=t=>t.__isTeleport,Ui=Symbol("_leaveCb"),uo=Symbol("_enterCb");function E1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gl(()=>{t.isMounted=!0}),Uh(()=>{t.isUnmounting=!0}),t}const Vt=[Function,Array],O1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vt,onEnter:Vt,onAfterEnter:Vt,onEnterCancelled:Vt,onBeforeLeave:Vt,onLeave:Vt,onAfterLeave:Vt,onLeaveCancelled:Vt,onBeforeAppear:Vt,onAppear:Vt,onAfterAppear:Vt,onAppearCancelled:Vt};function L1(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function fc(t,e,n,i,s){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:u,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:v,onAppear:m,onAfterAppear:w,onAppearCancelled:A}=e,x=String(t.key),C=L1(n,t),M=(R,W)=>{R&&sn(R,i,9,W)},k=(R,W)=>{const $=W[1];M(R,W),ne(R)?R.every(L=>L.length<=1)&&$():R.length<=1&&$()},I={mode:o,persisted:l,beforeEnter(R){let W=a;if(!n.isMounted)if(r)W=v||a;else return;R[Ui]&&R[Ui](!0);const $=C[x];$&&gs(t,$)&&$.el[Ui]&&$.el[Ui](),M(W,[R])},enter(R){let W=c,$=h,L=f;if(!n.isMounted)if(r)W=m||c,$=w||h,L=A||f;else return;let J=!1;const ee=R[uo]=re=>{J||(J=!0,re?M(L,[R]):M($,[R]),I.delayedLeave&&I.delayedLeave(),R[uo]=void 0)};W?k(W,[R,ee]):ee()},leave(R,W){const $=String(t.key);if(R[uo]&&R[uo](!0),n.isUnmounting)return W();M(u,[R]);let L=!1;const J=R[Ui]=ee=>{L||(L=!0,W(),ee?M(g,[R]):M(p,[R]),R[Ui]=void 0,C[$]===t&&delete C[$])};C[$]=t,d?k(d,[R,J]):J()},clone(R){return fc(R,e,n,i)}};return I}function Tr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Tr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Im(t,e=!1,n){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===it?(o.patchFlag&128&&s++,i=i.concat(Im(o.children,e,l))):(e||o.type!==Jn)&&i.push(l!=null?ts(o,{key:l}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function ti(t,e){return oe(t)?Ye({name:t.name},e,{setup:t}):t}function Nm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const hl=new WeakMap;function dr(t,e,n,i,s=!1){if(ne(t)){t.forEach((p,g)=>dr(p,e&&(ne(e)?e[g]:e),n,i,s));return}if(pr(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&dr(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?Xl(i.component):i.el,o=s?null:r,{i:l,r:a}=t,c=e&&e.r,h=l.refs===_e?l.refs={}:l.refs,f=l.setupState,u=me(f),d=f===_e?Zp:p=>xe(u,p);if(c!=null&&c!==a){if(Kf(e),We(c))h[c]=null,d(c)&&(f[c]=null);else if(Fe(c)){c.value=null;const p=e;p.k&&(h[p.k]=null)}}if(oe(a))Jr(a,l,12,[o,h]);else{const p=We(a),g=Fe(a);if(p||g){const v=()=>{if(t.f){const m=p?d(a)?f[a]:h[a]:a.value;if(s)ne(m)&&Oh(m,r);else if(ne(m))m.includes(r)||m.push(r);else if(p)h[a]=[r],d(a)&&(f[a]=h[a]);else{const w=[r];a.value=w,t.k&&(h[t.k]=w)}}else p?(h[a]=o,d(a)&&(f[a]=o)):g&&(a.value=o,t.k&&(h[t.k]=o))};if(o){const m=()=>{v(),hl.delete(t)};m.id=-1,hl.set(t,m),Pt(m,n)}else Kf(t),v()}}}function Kf(t){const e=hl.get(t);e&&(e.flags|=8,hl.delete(t))}Ul().requestIdleCallback;Ul().cancelIdleCallback;const pr=t=>!!t.type.__asyncLoader,Bm=t=>t.type.__isKeepAlive;function D1(t,e){Fm(t,"a",e)}function R1(t,e){Fm(t,"da",e)}function Fm(t,e,n=wt){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ql(e,i,n),n){let s=n.parent;for(;s&&s.parent;)Bm(s.parent.vnode)&&P1(i,e,n,s),s=s.parent}}function P1(t,e,n,i){const s=ql(e,t,i,!0);jh(()=>{Oh(i[e],s)},n)}function ql(t,e,n=wt,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Yn();const l=Zr(n),a=sn(e,n,t,o);return l(),Xn(),a});return i?s.unshift(r):s.push(r),r}}const ni=t=>(e,n=wt)=>{(!Or||t==="sp")&&ql(t,(...i)=>e(...i),n)},I1=ni("bm"),Gl=ni("m"),N1=ni("bu"),Hm=ni("u"),Uh=ni("bum"),jh=ni("um"),B1=ni("sp"),F1=ni("rtg"),H1=ni("rtc");function V1(t,e=wt){ql("ec",t,e)}const W1=Symbol.for("v-ndc");function qf(t,e,n,i){let s;const r=n,o=ne(t);if(o||We(t)){const l=o&&Si(t);let a=!1,c=!1;l&&(a=!Kt(t),c=Ai(t),t=zl(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(a?c?ol(nt(t[h])):nt(t[h]):t[h],h,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,r)}else if(De(t))if(t[Symbol.iterator])s=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);s=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const h=l[a];s[a]=e(t[h],h,a,r)}}else s=[];return s}const uc=t=>t?rg(t)?Xl(t):uc(t.parent):null,mr=Ye(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uc(t.parent),$root:t=>uc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Wm(t),$forceUpdate:t=>t.f||(t.f=()=>{$h(t.update)}),$nextTick:t=>t.n||(t.n=Em.bind(t.proxy)),$watch:t=>hv.bind(t)}),xa=(t,e)=>t!==_e&&!t.__isScriptSetup&&xe(t,e),$1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(xa(i,e))return o[e]=1,i[e];if(s!==_e&&xe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&xe(c,e))return o[e]=3,r[e];if(n!==_e&&xe(n,e))return o[e]=4,n[e];dc&&(o[e]=0)}}const h=mr[e];let f,u;if(h)return e==="$attrs"&&ft(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==_e&&xe(n,e))return o[e]=4,n[e];if(u=a.config.globalProperties,xe(u,e))return u[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return xa(s,e)?(s[e]=n,!0):i!==_e&&xe(i,e)?(i[e]=n,!0):xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r,type:o}},l){let a,c;return!!(n[l]||t!==_e&&l[0]!=="$"&&xe(t,l)||xa(e,l)||(a=r[0])&&xe(a,l)||xe(i,l)||xe(mr,l)||xe(s.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gf(t){return ne(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let dc=!0;function U1(t){const e=Wm(t),n=t.proxy,i=t.ctx;dc=!1,e.beforeCreate&&Yf(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:l,provide:a,inject:c,created:h,beforeMount:f,mounted:u,beforeUpdate:d,updated:p,activated:g,deactivated:v,beforeDestroy:m,beforeUnmount:w,destroyed:A,unmounted:x,render:C,renderTracked:M,renderTriggered:k,errorCaptured:I,serverPrefetch:R,expose:W,inheritAttrs:$,components:L,directives:J,filters:ee}=e;if(c&&j1(c,i,null),o)for(const te in o){const ae=o[te];oe(ae)&&(i[te]=ae.bind(n))}if(s){const te=s.call(n,n);De(te)&&(t.data=Xr(te))}if(dc=!0,r)for(const te in r){const ae=r[te],de=oe(ae)?ae.bind(n,n):oe(ae.get)?ae.get.bind(n,n):On,Ie=!oe(ae)&&oe(ae.set)?ae.set.bind(n):On,Ne=jn({get:de,set:Ie});Object.defineProperty(i,te,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:Ce=>Ne.value=Ce})}if(l)for(const te in l)Vm(l[te],i,n,te);if(a){const te=oe(a)?a.call(n):a;Reflect.ownKeys(te).forEach(ae=>{X1(ae,te[ae])})}h&&Yf(h,t,"c");function se(te,ae){ne(ae)?ae.forEach(de=>te(de.bind(n))):ae&&te(ae.bind(n))}if(se(I1,f),se(Gl,u),se(N1,d),se(Hm,p),se(D1,g),se(R1,v),se(V1,I),se(H1,M),se(F1,k),se(Uh,w),se(jh,x),se(B1,R),ne(W))if(W.length){const te=t.exposed||(t.exposed={});W.forEach(ae=>{Object.defineProperty(te,ae,{get:()=>n[ae],set:de=>n[ae]=de,enumerable:!0})})}else t.exposed||(t.exposed={});C&&t.render===On&&(t.render=C),$!=null&&(t.inheritAttrs=$),L&&(t.components=L),J&&(t.directives=J),R&&Nm(t)}function j1(t,e,n=On){ne(t)&&(t=pc(t));for(const i in t){const s=t[i];let r;De(s)?"default"in s?r=Qi(s.from||i,s.default,!0):r=Qi(s.from||i):r=Qi(s),Fe(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Yf(t,e,n){sn(ne(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Vm(t,e,n,i){let s=i.includes(".")?eg(n,i):()=>n[i];if(We(t)){const r=e[t];oe(r)&&bt(s,r)}else if(oe(t))bt(s,t.bind(n));else if(De(t))if(ne(t))t.forEach(r=>Vm(r,e,n,i));else{const r=oe(t.handler)?t.handler.bind(n):e[t.handler];oe(r)&&bt(s,r,t)}}function Wm(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!s.length&&!n&&!i?a=e:(a={},s.length&&s.forEach(c=>fl(a,c,o,!0)),fl(a,e,o)),De(e)&&r.set(e,a),a}function fl(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&fl(t,r,n,!0),s&&s.forEach(o=>fl(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const l=z1[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const z1={data:Xf,props:Jf,emits:Jf,methods:ir,computed:ir,beforeCreate:gt,created:gt,beforeMount:gt,mounted:gt,beforeUpdate:gt,updated:gt,beforeDestroy:gt,beforeUnmount:gt,destroyed:gt,unmounted:gt,activated:gt,deactivated:gt,errorCaptured:gt,serverPrefetch:gt,components:ir,directives:ir,watch:q1,provide:Xf,inject:K1};function Xf(t,e){return e?t?function(){return Ye(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function K1(t,e){return ir(pc(t),pc(e))}function pc(t){if(ne(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function gt(t,e){return t?[...new Set([].concat(t,e))]:e}function ir(t,e){return t?Ye(Object.create(null),t,e):e}function Jf(t,e){return t?ne(t)&&ne(e)?[...new Set([...t,...e])]:Ye(Object.create(null),Gf(t),Gf(e??{})):e}function q1(t,e){if(!t)return e;if(!e)return t;const n=Ye(Object.create(null),t);for(const i in e)n[i]=gt(t[i],e[i]);return n}function $m(){return{app:null,config:{isNativeTag:Zp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let G1=0;function Y1(t,e){return function(i,s=null){oe(i)||(i=Ye({},i)),s!=null&&!De(s)&&(s=null);const r=$m(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:G1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Pv,get config(){return r.config},set config(h){},use(h,...f){return o.has(h)||(h&&oe(h.install)?(o.add(h),h.install(c,...f)):oe(h)&&(o.add(h),h(c,...f))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,f){return f?(r.components[h]=f,c):r.components[h]},directive(h,f){return f?(r.directives[h]=f,c):r.directives[h]},mount(h,f,u){if(!a){const d=c._ceVNode||Je(i,s);return d.appContext=r,u===!0?u="svg":u===!1&&(u=void 0),t(d,h,u),a=!0,c._container=h,h.__vue_app__=c,Xl(d.component)}},onUnmount(h){l.push(h)},unmount(){a&&(sn(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,f){return r.provides[h]=f,c},runWithContext(h){const f=Ji;Ji=c;try{return h()}finally{Ji=f}}};return c}}let Ji=null;function X1(t,e){if(wt){let n=wt.provides;const i=wt.parent&&wt.parent.provides;i===n&&(n=wt.provides=Object.create(i)),n[t]=e}}function Qi(t,e,n=!1){const i=_i();if(i||Ji){let s=Ji?Ji._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&oe(e)?e.call(i&&i.proxy):e}}function J1(){return!!(_i()||Ji)}const Um={},jm=()=>Object.create(Um),zm=t=>Object.getPrototypeOf(t)===Um;function Q1(t,e,n,i=!1){const s={},r=jm();t.propsDefaults=Object.create(null),Km(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:d1(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function Z1(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,l=me(s),[a]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let u=h[f];if(Yl(t.emitsOptions,u))continue;const d=e[u];if(a)if(xe(r,u))d!==r[u]&&(r[u]=d,c=!0);else{const p=ki(u);s[p]=mc(a,l,p,d,t,!1)}else d!==r[u]&&(r[u]=d,c=!0)}}}else{Km(t,e,s,r)&&(c=!0);let h;for(const f in l)(!e||!xe(e,f)&&((h=as(f))===f||!xe(e,h)))&&(a?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=mc(a,l,f,void 0,t,!0)):delete s[f]);if(r!==l)for(const f in r)(!e||!xe(e,f))&&(delete r[f],c=!0)}c&&Wn(t.attrs,"set","")}function Km(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(hr(a))continue;const c=e[a];let h;s&&xe(s,h=ki(a))?!r||!r.includes(h)?n[h]=c:(l||(l={}))[h]=c:Yl(t.emitsOptions,a)||(!(a in i)||c!==i[a])&&(i[a]=c,o=!0)}if(r){const a=me(n),c=l||_e;for(let h=0;h<r.length;h++){const f=r[h];n[f]=mc(s,a,f,c[f],t,!xe(c,f))}}return o}function mc(t,e,n,i,s,r){const o=t[n];if(o!=null){const l=xe(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&oe(a)){const{propsDefaults:c}=s;if(n in c)i=c[n];else{const h=Zr(s);i=c[n]=a.call(null,e),h()}}else i=a;s.ce&&s.ce._setProp(n,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===as(n))&&(i=!0))}return i}const ev=new WeakMap;function qm(t,e,n=!1){const i=n?ev:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},l=[];let a=!1;if(!oe(t)){const h=f=>{a=!0;const[u,d]=qm(f,e,!0);Ye(o,u),d&&l.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!r&&!a)return De(t)&&i.set(t,As),As;if(ne(r))for(let h=0;h<r.length;h++){const f=ki(r[h]);Qf(f)&&(o[f]=_e)}else if(r)for(const h in r){const f=ki(h);if(Qf(f)){const u=r[h],d=o[f]=ne(u)||oe(u)?{type:u}:Ye({},u),p=d.type;let g=!1,v=!0;if(ne(p))for(let m=0;m<p.length;++m){const w=p[m],A=oe(w)&&w.name;if(A==="Boolean"){g=!0;break}else A==="String"&&(v=!1)}else g=oe(p)&&p.name==="Boolean";d[0]=g,d[1]=v,(g||xe(d,"default"))&&l.push(f)}}const c=[o,l];return De(t)&&i.set(t,c),c}function Qf(t){return t[0]!=="$"&&!hr(t)}const zh=t=>t==="_"||t==="_ctx"||t==="$stable",Kh=t=>ne(t)?t.map(Sn):[Sn(t)],tv=(t,e,n)=>{if(e._n)return e;const i=Pm((...s)=>Kh(e(...s)),n);return i._c=!1,i},Gm=(t,e,n)=>{const i=t._ctx;for(const s in t){if(zh(s))continue;const r=t[s];if(oe(r))e[s]=tv(s,r,i);else if(r!=null){const o=Kh(r);e[s]=()=>o}}},Ym=(t,e)=>{const n=Kh(e);t.slots.default=()=>n},Xm=(t,e,n)=>{for(const i in e)(n||!zh(i))&&(t[i]=e[i])},nv=(t,e,n)=>{const i=t.slots=jm();if(t.vnode.shapeFlag&32){const s=e._;s?(Xm(i,e,n),n&&rm(i,"_",s,!0)):Gm(e,i)}else e&&Ym(t,e)},iv=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=_e;if(i.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:Xm(s,e,n):(r=!e.$stable,Gm(e,s)),o=e}else e&&(Ym(t,e),o={default:1});if(r)for(const l in s)!zh(l)&&o[l]==null&&delete s[l]},Pt=yv;function sv(t){return rv(t)}function rv(t,e){const n=Ul();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:h,parentNode:f,nextSibling:u,setScopeId:d=On,insertStaticContent:p}=t,g=(S,_,P,V=null,F=null,H=null,b=void 0,y=null,T=!!_.dynamicChildren)=>{if(S===_)return;S&&!gs(S,_)&&(V=Qt(S),Ce(S,F,H,!0),S=null),_.patchFlag===-2&&(T=!1,_.dynamicChildren=null);const{type:O,ref:z,shapeFlag:B}=_;switch(O){case Qr:v(S,_,P,V);break;case Jn:m(S,_,P,V);break;case Ca:S==null&&w(_,P,V,b);break;case it:L(S,_,P,V,F,H,b,y,T);break;default:B&1?C(S,_,P,V,F,H,b,y,T):B&6?J(S,_,P,V,F,H,b,y,T):(B&64||B&128)&&O.process(S,_,P,V,F,H,b,y,T,an)}z!=null&&F?dr(z,S&&S.ref,H,_||S,!_):z==null&&S&&S.ref!=null&&dr(S.ref,null,H,S,!0)},v=(S,_,P,V)=>{if(S==null)i(_.el=l(_.children),P,V);else{const F=_.el=S.el;_.children!==S.children&&c(F,_.children)}},m=(S,_,P,V)=>{S==null?i(_.el=a(_.children||""),P,V):_.el=S.el},w=(S,_,P,V)=>{[S.el,S.anchor]=p(S.children,_,P,V,S.el,S.anchor)},A=({el:S,anchor:_},P,V)=>{let F;for(;S&&S!==_;)F=u(S),i(S,P,V),S=F;i(_,P,V)},x=({el:S,anchor:_})=>{let P;for(;S&&S!==_;)P=u(S),s(S),S=P;s(_)},C=(S,_,P,V,F,H,b,y,T)=>{_.type==="svg"?b="svg":_.type==="math"&&(b="mathml"),S==null?M(_,P,V,F,H,b,y,T):R(S,_,F,H,b,y,T)},M=(S,_,P,V,F,H,b,y)=>{let T,O;const{props:z,shapeFlag:B,transition:E,dirs:D}=S;if(T=S.el=o(S.type,H,z&&z.is,z),B&8?h(T,S.children):B&16&&I(S.children,T,null,V,F,Sa(S,H),b,y),D&&Bi(S,null,V,"created"),k(T,S,S.scopeId,b,V),z){for(const ie in z)ie!=="value"&&!hr(ie)&&r(T,ie,null,z[ie],H,V);"value"in z&&r(T,"value",null,z.value,H),(O=z.onVnodeBeforeMount)&&hn(O,V,S)}D&&Bi(S,null,V,"beforeMount");const Q=ov(F,E);Q&&E.beforeEnter(T),i(T,_,P),((O=z&&z.onVnodeMounted)||Q||D)&&Pt(()=>{O&&hn(O,V,S),Q&&E.enter(T),D&&Bi(S,null,V,"mounted")},F)},k=(S,_,P,V,F)=>{if(P&&d(S,P),V)for(let H=0;H<V.length;H++)d(S,V[H]);if(F){let H=F.subTree;if(_===H||ng(H.type)&&(H.ssContent===_||H.ssFallback===_)){const b=F.vnode;k(S,b,b.scopeId,b.slotScopeIds,F.parent)}}},I=(S,_,P,V,F,H,b,y,T=0)=>{for(let O=T;O<S.length;O++){const z=S[O]=y?hi(S[O]):Sn(S[O]);g(null,z,_,P,V,F,H,b,y)}},R=(S,_,P,V,F,H,b)=>{const y=_.el=S.el;let{patchFlag:T,dynamicChildren:O,dirs:z}=_;T|=S.patchFlag&16;const B=S.props||_e,E=_.props||_e;let D;if(P&&Fi(P,!1),(D=E.onVnodeBeforeUpdate)&&hn(D,P,_,S),z&&Bi(_,S,P,"beforeUpdate"),P&&Fi(P,!0),(B.innerHTML&&E.innerHTML==null||B.textContent&&E.textContent==null)&&h(y,""),O?W(S.dynamicChildren,O,y,P,V,Sa(_,F),H):b||ae(S,_,y,null,P,V,Sa(_,F),H,!1),T>0){if(T&16)$(y,B,E,P,F);else if(T&2&&B.class!==E.class&&r(y,"class",null,E.class,F),T&4&&r(y,"style",B.style,E.style,F),T&8){const Q=_.dynamicProps;for(let ie=0;ie<Q.length;ie++){const he=Q[ie],ze=B[he],He=E[he];(He!==ze||he==="value")&&r(y,he,ze,He,F,P)}}T&1&&S.children!==_.children&&h(y,_.children)}else!b&&O==null&&$(y,B,E,P,F);((D=E.onVnodeUpdated)||z)&&Pt(()=>{D&&hn(D,P,_,S),z&&Bi(_,S,P,"updated")},V)},W=(S,_,P,V,F,H,b)=>{for(let y=0;y<_.length;y++){const T=S[y],O=_[y],z=T.el&&(T.type===it||!gs(T,O)||T.shapeFlag&198)?f(T.el):P;g(T,O,z,null,V,F,H,b,!0)}},$=(S,_,P,V,F)=>{if(_!==P){if(_!==_e)for(const H in _)!hr(H)&&!(H in P)&&r(S,H,_[H],null,F,V);for(const H in P){if(hr(H))continue;const b=P[H],y=_[H];b!==y&&H!=="value"&&r(S,H,y,b,F,V)}"value"in P&&r(S,"value",_.value,P.value,F)}},L=(S,_,P,V,F,H,b,y,T)=>{const O=_.el=S?S.el:l(""),z=_.anchor=S?S.anchor:l("");let{patchFlag:B,dynamicChildren:E,slotScopeIds:D}=_;D&&(y=y?y.concat(D):D),S==null?(i(O,P,V),i(z,P,V),I(_.children||[],P,z,F,H,b,y,T)):B>0&&B&64&&E&&S.dynamicChildren?(W(S.dynamicChildren,E,P,F,H,b,y),(_.key!=null||F&&_===F.subTree)&&Jm(S,_,!0)):ae(S,_,P,z,F,H,b,y,T)},J=(S,_,P,V,F,H,b,y,T)=>{_.slotScopeIds=y,S==null?_.shapeFlag&512?F.ctx.activate(_,P,V,b,T):ee(_,P,V,F,H,b,T):re(S,_,T)},ee=(S,_,P,V,F,H,b)=>{const y=S.component=Tv(S,V,F);if(Bm(S)&&(y.ctx.renderer=an),Ev(y,!1,b),y.asyncDep){if(F&&F.registerDep(y,se,b),!S.el){const T=y.subTree=Je(Jn);m(null,T,_,P),S.placeholder=T.el}}else se(y,S,_,P,F,H,b)},re=(S,_,P)=>{const V=_.component=S.component;if(gv(S,_,P))if(V.asyncDep&&!V.asyncResolved){te(V,_,P);return}else V.next=_,V.update();else _.el=S.el,V.vnode=_},se=(S,_,P,V,F,H,b)=>{const y=()=>{if(S.isMounted){let{next:B,bu:E,u:D,parent:Q,vnode:ie}=S;{const Zt=Qm(S);if(Zt){B&&(B.el=ie.el,te(S,B,b)),Zt.asyncDep.then(()=>{S.isUnmounted||y()});return}}let he=B,ze;Fi(S,!1),B?(B.el=ie.el,te(S,B,b)):B=ie,E&&jo(E),(ze=B.props&&B.props.onVnodeBeforeUpdate)&&hn(ze,Q,B,ie),Fi(S,!0);const He=eu(S),Ht=S.subTree;S.subTree=He,g(Ht,He,f(Ht.el),Qt(Ht),S,F,H),B.el=He.el,he===null&&bv(S,He.el),D&&Pt(D,F),(ze=B.props&&B.props.onVnodeUpdated)&&Pt(()=>hn(ze,Q,B,ie),F)}else{let B;const{el:E,props:D}=_,{bm:Q,m:ie,parent:he,root:ze,type:He}=S,Ht=pr(_);Fi(S,!1),Q&&jo(Q),!Ht&&(B=D&&D.onVnodeBeforeMount)&&hn(B,he,_),Fi(S,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(He);const Zt=S.subTree=eu(S);g(null,Zt,P,V,S,F,H),_.el=Zt.el}if(ie&&Pt(ie,F),!Ht&&(B=D&&D.onVnodeMounted)){const Zt=_;Pt(()=>hn(B,he,Zt),F)}(_.shapeFlag&256||he&&pr(he.vnode)&&he.vnode.shapeFlag&256)&&S.a&&Pt(S.a,F),S.isMounted=!0,_=P=V=null}};S.scope.on();const T=S.effect=new fm(y);S.scope.off();const O=S.update=T.run.bind(T),z=S.job=T.runIfDirty.bind(T);z.i=S,z.id=S.uid,T.scheduler=()=>$h(z),Fi(S,!0),O()},te=(S,_,P)=>{_.component=S;const V=S.vnode.props;S.vnode=_,S.next=null,Z1(S,_.props,V,P),iv(S,_.children,P),Yn(),zf(S),Xn()},ae=(S,_,P,V,F,H,b,y,T=!1)=>{const O=S&&S.children,z=S?S.shapeFlag:0,B=_.children,{patchFlag:E,shapeFlag:D}=_;if(E>0){if(E&128){Ie(O,B,P,V,F,H,b,y,T);return}else if(E&256){de(O,B,P,V,F,H,b,y,T);return}}D&8?(z&16&&kt(O,F,H),B!==O&&h(P,B)):z&16?D&16?Ie(O,B,P,V,F,H,b,y,T):kt(O,F,H,!0):(z&8&&h(P,""),D&16&&I(B,P,V,F,H,b,y,T))},de=(S,_,P,V,F,H,b,y,T)=>{S=S||As,_=_||As;const O=S.length,z=_.length,B=Math.min(O,z);let E;for(E=0;E<B;E++){const D=_[E]=T?hi(_[E]):Sn(_[E]);g(S[E],D,P,null,F,H,b,y,T)}O>z?kt(S,F,H,!0,!1,B):I(_,P,V,F,H,b,y,T,B)},Ie=(S,_,P,V,F,H,b,y,T)=>{let O=0;const z=_.length;let B=S.length-1,E=z-1;for(;O<=B&&O<=E;){const D=S[O],Q=_[O]=T?hi(_[O]):Sn(_[O]);if(gs(D,Q))g(D,Q,P,null,F,H,b,y,T);else break;O++}for(;O<=B&&O<=E;){const D=S[B],Q=_[E]=T?hi(_[E]):Sn(_[E]);if(gs(D,Q))g(D,Q,P,null,F,H,b,y,T);else break;B--,E--}if(O>B){if(O<=E){const D=E+1,Q=D<z?_[D].el:V;for(;O<=E;)g(null,_[O]=T?hi(_[O]):Sn(_[O]),P,Q,F,H,b,y,T),O++}}else if(O>E)for(;O<=B;)Ce(S[O],F,H,!0),O++;else{const D=O,Q=O,ie=new Map;for(O=Q;O<=E;O++){const Dt=_[O]=T?hi(_[O]):Sn(_[O]);Dt.key!=null&&ie.set(Dt.key,O)}let he,ze=0;const He=E-Q+1;let Ht=!1,Zt=0;const Ks=new Array(He);for(O=0;O<He;O++)Ks[O]=0;for(O=D;O<=B;O++){const Dt=S[O];if(ze>=He){Ce(Dt,F,H,!0);continue}let cn;if(Dt.key!=null)cn=ie.get(Dt.key);else for(he=Q;he<=E;he++)if(Ks[he-Q]===0&&gs(Dt,_[he])){cn=he;break}cn===void 0?Ce(Dt,F,H,!0):(Ks[cn-Q]=O+1,cn>=Zt?Zt=cn:Ht=!0,g(Dt,_[cn],P,null,F,H,b,y,T),ze++)}const Hf=Ht?lv(Ks):As;for(he=Hf.length-1,O=He-1;O>=0;O--){const Dt=Q+O,cn=_[Dt],Vf=_[Dt+1],Wf=Dt+1<z?Vf.el||Vf.placeholder:V;Ks[O]===0?g(null,cn,P,Wf,F,H,b,y,T):Ht&&(he<0||O!==Hf[he]?Ne(cn,P,Wf,2):he--)}}},Ne=(S,_,P,V,F=null)=>{const{el:H,type:b,transition:y,children:T,shapeFlag:O}=S;if(O&6){Ne(S.component.subTree,_,P,V);return}if(O&128){S.suspense.move(_,P,V);return}if(O&64){b.move(S,_,P,an);return}if(b===it){i(H,_,P);for(let B=0;B<T.length;B++)Ne(T[B],_,P,V);i(S.anchor,_,P);return}if(b===Ca){A(S,_,P);return}if(V!==2&&O&1&&y)if(V===0)y.beforeEnter(H),i(H,_,P),Pt(()=>y.enter(H),F);else{const{leave:B,delayLeave:E,afterLeave:D}=y,Q=()=>{S.ctx.isUnmounted?s(H):i(H,_,P)},ie=()=>{H._isLeaving&&H[Ui](!0),B(H,()=>{Q(),D&&D()})};E?E(H,Q,ie):ie()}else i(H,_,P)},Ce=(S,_,P,V=!1,F=!1)=>{const{type:H,props:b,ref:y,children:T,dynamicChildren:O,shapeFlag:z,patchFlag:B,dirs:E,cacheIndex:D}=S;if(B===-2&&(F=!1),y!=null&&(Yn(),dr(y,null,P,S,!0),Xn()),D!=null&&(_.renderCache[D]=void 0),z&256){_.ctx.deactivate(S);return}const Q=z&1&&E,ie=!pr(S);let he;if(ie&&(he=b&&b.onVnodeBeforeUnmount)&&hn(he,_,S),z&6)Jt(S.component,P,V);else{if(z&128){S.suspense.unmount(P,V);return}Q&&Bi(S,null,_,"beforeUnmount"),z&64?S.type.remove(S,_,P,an,V):O&&!O.hasOnce&&(H!==it||B>0&&B&64)?kt(O,_,P,!1,!0):(H===it&&B&384||!F&&z&16)&&kt(T,_,P),V&&Ze(S)}(ie&&(he=b&&b.onVnodeUnmounted)||Q)&&Pt(()=>{he&&hn(he,_,S),Q&&Bi(S,null,_,"unmounted")},P)},Ze=S=>{const{type:_,el:P,anchor:V,transition:F}=S;if(_===it){Lt(P,V);return}if(_===Ca){x(S);return}const H=()=>{s(P),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:b,delayLeave:y}=F,T=()=>b(P,H);y?y(S.el,H,T):T()}else H()},Lt=(S,_)=>{let P;for(;S!==_;)P=u(S),s(S),S=P;s(_)},Jt=(S,_,P)=>{const{bum:V,scope:F,job:H,subTree:b,um:y,m:T,a:O}=S;Zf(T),Zf(O),V&&jo(V),F.stop(),H&&(H.flags|=8,Ce(b,S,_,P)),y&&Pt(y,_),Pt(()=>{S.isUnmounted=!0},_)},kt=(S,_,P,V=!1,F=!1,H=0)=>{for(let b=H;b<S.length;b++)Ce(S[b],_,P,V,F)},Qt=S=>{if(S.shapeFlag&6)return Qt(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const _=u(S.anchor||S.el),P=_&&_[M1];return P?u(P):_};let ri=!1;const fs=(S,_,P)=>{S==null?_._vnode&&Ce(_._vnode,null,null,!0):g(_._vnode||null,S,_,null,null,null,P),_._vnode=S,ri||(ri=!0,zf(),Lm(),ri=!1)},an={p:g,um:Ce,m:Ne,r:Ze,mt:ee,mc:I,pc:ae,pbc:W,n:Qt,o:t};return{render:fs,hydrate:void 0,createApp:Y1(fs)}}function Sa({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Fi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ov(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jm(t,e,n=!1){const i=t.children,s=e.children;if(ne(i)&&ne(s))for(let r=0;r<i.length;r++){const o=i[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=hi(s[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Jm(o,l)),l.type===Qr&&l.patchFlag!==-1&&(l.el=o.el),l.type===Jn&&!l.el&&(l.el=o.el)}}function lv(t){const e=t.slice(),n=[0];let i,s,r,o,l;const a=t.length;for(i=0;i<a;i++){const c=t[i];if(c!==0){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<c?r=l+1:o=l;c<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function Qm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Qm(e)}function Zf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const av=Symbol.for("v-scx"),cv=()=>Qi(av);function bt(t,e,n){return Zm(t,e,n)}function Zm(t,e,n=_e){const{immediate:i,deep:s,flush:r,once:o}=n,l=Ye({},n),a=e&&i||!e&&r!=="post";let c;if(Or){if(r==="sync"){const d=cv();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!a){const d=()=>{};return d.stop=On,d.resume=On,d.pause=On,d}}const h=wt;l.call=(d,p,g)=>sn(d,h,p,g);let f=!1;r==="post"?l.scheduler=d=>{Pt(d,h&&h.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(d,p)=>{p?d():$h(d)}),l.augmentJob=d=>{e&&(d.flags|=4),f&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const u=S1(t,e,l);return Or&&(c?c.push(u):a&&u()),u}function hv(t,e,n){const i=this.proxy,s=We(t)?t.includes(".")?eg(i,t):()=>i[t]:t.bind(i,i);let r;oe(e)?r=e:(r=e.handler,n=e);const o=Zr(this),l=Zm(s,r.bind(i),n);return o(),l}function eg(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const fv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ki(e)}Modifiers`]||t[`${as(e)}Modifiers`];function uv(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||_e;let s=n;const r=e.startsWith("update:"),o=r&&fv(i,e.slice(7));o&&(o.trim&&(s=n.map(h=>We(h)?h.trim():h)),o.number&&(s=n.map(lc)));let l,a=i[l=ga(e)]||i[l=ga(ki(e))];!a&&r&&(a=i[l=ga(as(e))]),a&&sn(a,t,6,s);const c=i[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,sn(c,t,6,s)}}const dv=new WeakMap;function tg(t,e,n=!1){const i=n?dv:e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},l=!1;if(!oe(t)){const a=c=>{const h=tg(c,e,!0);h&&(l=!0,Ye(o,h))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(De(t)&&i.set(t,null),null):(ne(r)?r.forEach(a=>o[a]=null):Ye(o,r),De(t)&&i.set(t,o),o)}function Yl(t,e){return!t||!Vl(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(t,e[0].toLowerCase()+e.slice(1))||xe(t,as(e))||xe(t,e))}function eu(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:h,props:f,data:u,setupState:d,ctx:p,inheritAttrs:g}=t,v=cl(t);let m,w;try{if(n.shapeFlag&4){const x=s||i,C=x;m=Sn(c.call(C,x,h,f,d,u,p)),w=l}else{const x=e;m=Sn(x.length>1?x(f,{attrs:l,slots:o,emit:a}):x(f,null)),w=e.props?l:pv(l)}}catch(x){gr.length=0,Kl(x,t,1),m=Je(Jn)}let A=m;if(w&&g!==!1){const x=Object.keys(w),{shapeFlag:C}=A;x.length&&C&7&&(r&&x.some(Eh)&&(w=mv(w,r)),A=ts(A,w,!1,!0))}return n.dirs&&(A=ts(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Tr(A,n.transition),m=A,cl(v),m}const pv=t=>{let e;for(const n in t)(n==="class"||n==="style"||Vl(n))&&((e||(e={}))[n]=t[n]);return e},mv=(t,e)=>{const n={};for(const i in t)(!Eh(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function gv(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return i?tu(i,o,c):!!o;if(a&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const u=h[f];if(o[u]!==i[u]&&!Yl(c,u))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?tu(i,o,c):!0:!!o;return!1}function tu(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!Yl(n,r))return!0}return!1}function bv({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const ng=t=>t.__isSuspense;function yv(t,e){e&&e.pendingBranch?ne(t)?e.effects.push(...t):e.effects.push(t):A1(t)}const it=Symbol.for("v-fgt"),Qr=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),Ca=Symbol.for("v-stc"),gr=[];let Nt=null;function Cn(t=!1){gr.push(Nt=t?null:[])}function vv(){gr.pop(),Nt=gr[gr.length-1]||null}let Er=1;function ul(t,e=!1){Er+=t,t<0&&Nt&&e&&(Nt.hasOnce=!0)}function ig(t){return t.dynamicChildren=Er>0?Nt||As:null,vv(),Er>0&&Nt&&Nt.push(t),t}function Un(t,e,n,i,s,r){return ig(tt(t,e,n,i,s,r,!0))}function wv(t,e,n,i,s){return ig(Je(t,e,n,i,s,!0))}function dl(t){return t?t.__v_isVNode===!0:!1}function gs(t,e){return t.type===e.type&&t.key===e.key}const sg=({key:t})=>t??null,Ko=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||Fe(t)||oe(t)?{i:Ut,r:t,k:e,f:!!n}:t:null);function tt(t,e=null,n=null,i=0,s=null,r=t===it?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sg(e),ref:e&&Ko(e),scopeId:Rm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ut};return l?(qh(a,n),r&128&&t.normalize(a)):n&&(a.shapeFlag|=We(n)?8:16),Er>0&&!o&&Nt&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Nt.push(a),a}const Je=xv;function xv(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===W1)&&(t=Jn),dl(t)){const l=ts(t,e,!0);return n&&qh(l,n),Er>0&&!r&&Nt&&(l.shapeFlag&6?Nt[Nt.indexOf(t)]=l:Nt.push(l)),l.patchFlag=-2,l}if(Rv(t)&&(t=t.__vccOpts),e){e=Sv(e);let{class:l,style:a}=e;l&&!We(l)&&(e.class=jl(l)),De(a)&&(Vh(a)&&!ne(a)&&(a=Ye({},a)),e.style=Dh(a))}const o=We(t)?1:ng(t)?128:T1(t)?64:De(t)?4:oe(t)?2:0;return tt(t,e,n,i,s,o,r,!0)}function Sv(t){return t?Vh(t)||zm(t)?Ye({},t):t:null}function ts(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:l,transition:a}=t,c=e?Av(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&sg(c),ref:e&&e.ref?n&&r?ne(r)?r.concat(Ko(e)):[r,Ko(e)]:Ko(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==it?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ts(t.ssContent),ssFallback:t.ssFallback&&ts(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&Tr(h,a.clone(h)),h}function Cv(t=" ",e=0){return Je(Qr,null,t,e)}function kv(t="",e=!1){return e?(Cn(),wv(Jn,null,t)):Je(Jn,null,t)}function Sn(t){return t==null||typeof t=="boolean"?Je(Jn):ne(t)?Je(it,null,t.slice()):dl(t)?hi(t):Je(Qr,null,String(t))}function hi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ts(t)}function qh(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ne(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),qh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!zm(e)?e._ctx=Ut:s===3&&Ut&&(Ut.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:Ut},n=32):(e=String(e),i&64?(n=16,e=[Cv(e)]):n=8);t.children=e,t.shapeFlag|=n}function Av(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=jl([e.class,i.class]));else if(s==="style")e.style=Dh([e.style,i.style]);else if(Vl(s)){const r=e[s],o=i[s];o&&r!==o&&!(ne(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function hn(t,e,n,i=null){sn(t,e,7,[n,i])}const _v=$m();let Mv=0;function Tv(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||_v,r={uid:Mv++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qm(i,s),emitsOptions:tg(i,s),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:i.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=uv.bind(null,r),t.ce&&t.ce(r),r}let wt=null;const _i=()=>wt||Ut;let pl,gc;{const t=Ul(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};pl=e("__VUE_INSTANCE_SETTERS__",n=>wt=n),gc=e("__VUE_SSR_SETTERS__",n=>Or=n)}const Zr=t=>{const e=wt;return pl(t),t.scope.on(),()=>{t.scope.off(),pl(e)}},nu=()=>{wt&&wt.scope.off(),pl(null)};function rg(t){return t.vnode.shapeFlag&4}let Or=!1;function Ev(t,e=!1,n=!1){e&&gc(e);const{props:i,children:s}=t.vnode,r=rg(t);Q1(t,i,r,e),nv(t,s,n||e);const o=r?Ov(t,e):void 0;return e&&gc(!1),o}function Ov(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$1);const{setup:i}=n;if(i){Yn();const s=t.setupContext=i.length>1?Dv(t):null,r=Zr(t),o=Jr(i,t,0,[t.props,s]),l=tm(o);if(Xn(),r(),(l||t.sp)&&!pr(t)&&Nm(t),l){if(o.then(nu,nu),e)return o.then(a=>{iu(t,a)}).catch(a=>{Kl(a,t,0)});t.asyncDep=o}else iu(t,o)}else og(t)}function iu(t,e,n){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=Mm(e)),og(t)}function og(t,e,n){const i=t.type;t.render||(t.render=i.render||On);{const s=Zr(t);Yn();try{U1(t)}finally{Xn(),s()}}}const Lv={get(t,e){return ft(t,"get",""),t[e]}};function Dv(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Lv),slots:t.slots,emit:t.emit,expose:e}}function Xl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Mm(Wh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in mr)return mr[n](t)},has(e,n){return n in e||n in mr}})):t.proxy}function Rv(t){return oe(t)&&"__vccOpts"in t}const jn=(t,e)=>w1(t,e,Or);function Gh(t,e,n){const i=(r,o,l)=>{ul(-1);try{return Je(r,o,l)}finally{ul(1)}},s=arguments.length;return s===2?De(e)&&!ne(e)?dl(e)?i(t,null,[e]):i(t,e):i(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&dl(n)&&(n=[n]),i(t,e,n))}const Pv="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bc;const su=typeof window<"u"&&window.trustedTypes;if(su)try{bc=su.createPolicy("vue",{createHTML:t=>t})}catch{}const lg=bc?t=>bc.createHTML(t):t=>t,Iv="http://www.w3.org/2000/svg",Nv="http://www.w3.org/1998/Math/MathML",Hn=typeof document<"u"?document:null,ru=Hn&&Hn.createElement("template"),Bv={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?Hn.createElementNS(Iv,t):e==="mathml"?Hn.createElementNS(Nv,t):n?Hn.createElement(t,{is:n}):Hn.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Hn.createTextNode(t),createComment:t=>Hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{ru.innerHTML=lg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=ru.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},oi="transition",Gs="animation",Rs=Symbol("_vtc"),ag={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Fv=Ye({},O1,ag),Hi=(t,e=[])=>{ne(t)?t.forEach(n=>n(...e)):t&&t(...e)},ou=t=>t?ne(t)?t.some(e=>e.length>1):t.length>1:!1;function Hv(t){const e={};for(const L in t)L in ag||(e[L]=t[L]);if(t.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=r,appearActiveClass:c=o,appearToClass:h=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:u=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=Vv(s),g=p&&p[0],v=p&&p[1],{onBeforeEnter:m,onEnter:w,onEnterCancelled:A,onLeave:x,onLeaveCancelled:C,onBeforeAppear:M=m,onAppear:k=w,onAppearCancelled:I=A}=e,R=(L,J,ee,re)=>{L._enterCancelled=re,li(L,J?h:l),li(L,J?c:o),ee&&ee()},W=(L,J)=>{L._isLeaving=!1,li(L,f),li(L,d),li(L,u),J&&J()},$=L=>(J,ee)=>{const re=L?k:w,se=()=>R(J,L,ee);Hi(re,[J,se]),lu(()=>{li(J,L?a:r),yn(J,L?h:l),ou(re)||au(J,i,g,se)})};return Ye(e,{onBeforeEnter(L){Hi(m,[L]),yn(L,r),yn(L,o)},onBeforeAppear(L){Hi(M,[L]),yn(L,a),yn(L,c)},onEnter:$(!1),onAppear:$(!0),onLeave(L,J){L._isLeaving=!0;const ee=()=>W(L,J);yn(L,f),L._enterCancelled?(yn(L,u),yc()):(yc(),yn(L,u)),lu(()=>{L._isLeaving&&(li(L,f),yn(L,d),ou(x)||au(L,i,v,ee))}),Hi(x,[L,ee])},onEnterCancelled(L){R(L,!1,void 0,!0),Hi(A,[L])},onAppearCancelled(L){R(L,!0,void 0,!0),Hi(I,[L])},onLeaveCancelled(L){W(L),Hi(C,[L])}})}function Vv(t){if(t==null)return null;if(De(t))return[ka(t.enter),ka(t.leave)];{const e=ka(t);return[e,e]}}function ka(t){return Vy(t)}function yn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Rs]||(t[Rs]=new Set)).add(e)}function li(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[Rs];n&&(n.delete(e),n.size||(t[Rs]=void 0))}function lu(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Wv=0;function au(t,e,n,i){const s=t._endId=++Wv,r=()=>{s===t._endId&&i()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:l,propCount:a}=cg(t,e);if(!o)return i();const c=o+"end";let h=0;const f=()=>{t.removeEventListener(c,u),r()},u=d=>{d.target===t&&++h>=a&&f()};setTimeout(()=>{h<a&&f()},l+1),t.addEventListener(c,u)}function cg(t,e){const n=window.getComputedStyle(t),i=p=>(n[p]||"").split(", "),s=i(`${oi}Delay`),r=i(`${oi}Duration`),o=cu(s,r),l=i(`${Gs}Delay`),a=i(`${Gs}Duration`),c=cu(l,a);let h=null,f=0,u=0;e===oi?o>0&&(h=oi,f=o,u=r.length):e===Gs?c>0&&(h=Gs,f=c,u=a.length):(f=Math.max(o,c),h=f>0?o>c?oi:Gs:null,u=h?h===oi?r.length:a.length:0);const d=h===oi&&/\b(?:transform|all)(?:,|$)/.test(i(`${oi}Property`).toString());return{type:h,timeout:f,propCount:u,hasTransform:d}}function cu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>hu(n)+hu(t[i])))}function hu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function yc(){return document.body.offsetHeight}function $v(t,e,n){const i=t[Rs];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const fu=Symbol("_vod"),Uv=Symbol("_vsh"),jv=Symbol(""),zv=/(?:^|;)\s*display\s*:/;function Kv(t,e,n){const i=t.style,s=We(n);let r=!1;if(n&&!s){if(e)if(We(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&qo(i,l,"")}else for(const o in e)n[o]==null&&qo(i,o,"");for(const o in n)o==="display"&&(r=!0),qo(i,o,n[o])}else if(s){if(e!==n){const o=i[jv];o&&(n+=";"+o),i.cssText=n,r=zv.test(n)}}else e&&t.removeAttribute("style");fu in t&&(t[fu]=r?i.display:"",t[Uv]&&(i.display="none"))}const uu=/\s*!important$/;function qo(t,e,n){if(ne(n))n.forEach(i=>qo(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=qv(t,e);uu.test(n)?t.setProperty(as(i),n.replace(uu,""),"important"):t[i]=n}}const du=["Webkit","Moz","ms"],Aa={};function qv(t,e){const n=Aa[e];if(n)return n;let i=ki(e);if(i!=="filter"&&i in t)return Aa[e]=i;i=sm(i);for(let s=0;s<du.length;s++){const r=du[s]+i;if(r in t)return Aa[e]=r}return e}const pu="http://www.w3.org/1999/xlink";function mu(t,e,n,i,s,r=Ky(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(pu,e.slice(6,e.length)):t.setAttributeNS(pu,e,n):n==null||r&&!om(n)?t.removeAttribute(e):t.setAttribute(e,r?"":Di(n)?String(n):n)}function gu(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?lg(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=om(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function bs(t,e,n,i){t.addEventListener(e,n,i)}function Gv(t,e,n,i){t.removeEventListener(e,n,i)}const bu=Symbol("_vei");function Yv(t,e,n,i,s=null){const r=t[bu]||(t[bu]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=Xv(e);if(i){const c=r[e]=Zv(i,s);bs(t,l,c,a)}else o&&(Gv(t,l,o,a),r[e]=void 0)}}const yu=/(?:Once|Passive|Capture)$/;function Xv(t){let e;if(yu.test(t)){e={};let i;for(;i=t.match(yu);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):as(t.slice(2)),e]}let _a=0;const Jv=Promise.resolve(),Qv=()=>_a||(Jv.then(()=>_a=0),_a=Date.now());function Zv(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;sn(ew(i,n.value),e,5,[i])};return n.value=t,n.attached=Qv(),n}function ew(t,e){if(ne(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const vu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,tw=(t,e,n,i,s,r)=>{const o=s==="svg";e==="class"?$v(t,i,o):e==="style"?Kv(t,n,i):Vl(e)?Eh(e)||Yv(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):nw(t,e,i,o))?(gu(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mu(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(i))?gu(t,ki(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),mu(t,e,i,o))};function nw(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&vu(e)&&oe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return vu(e)&&We(n)?!1:e in t}const hg=new WeakMap,fg=new WeakMap,ml=Symbol("_moveCb"),wu=Symbol("_enterCb"),iw=t=>(delete t.props.mode,t),sw=iw({name:"TransitionGroup",props:Ye({},Fv,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=_i(),i=E1();let s,r;return Hm(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!cw(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(ow),s.forEach(lw);const l=s.filter(aw);yc(),l.forEach(a=>{const c=a.el,h=c.style;yn(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=c[ml]=u=>{u&&u.target!==c||(!u||u.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",f),c[ml]=null,li(c,o))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const o=me(t),l=Hv(o);let a=o.tag||it;if(s=[],r)for(let c=0;c<r.length;c++){const h=r[c];h.el&&h.el instanceof Element&&(s.push(h),Tr(h,fc(h,l,i,n)),hg.set(h,h.el.getBoundingClientRect()))}r=e.default?Im(e.default()):[];for(let c=0;c<r.length;c++){const h=r[c];h.key!=null&&Tr(h,fc(h,l,i,n))}return Je(a,null,r)}}}),rw=sw;function ow(t){const e=t.el;e[ml]&&e[ml](),e[wu]&&e[wu]()}function lw(t){fg.set(t,t.el.getBoundingClientRect())}function aw(t){const e=hg.get(t),n=fg.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",t}}function cw(t,e,n){const i=t.cloneNode(),s=t[Rs];s&&s.forEach(l=>{l.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),n.split(/\s+/).forEach(l=>l&&i.classList.add(l)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=cg(i);return r.removeChild(i),o}const xu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ne(e)?n=>jo(e,n):e};function hw(t){t.target.composing=!0}function Su(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ma=Symbol("_assign"),fw={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[Ma]=xu(s);const r=i||s.props&&s.props.type==="number";bs(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),r&&(l=lc(l)),t[Ma](l)}),n&&bs(t,"change",()=>{t.value=t.value.trim()}),e||(bs(t,"compositionstart",hw),bs(t,"compositionend",Su),bs(t,"change",Su))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},o){if(t[Ma]=xu(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?lc(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===a)||(t.value=a))}},uw=Ye({patchProp:tw},Bv);let Cu;function dw(){return Cu||(Cu=sv(uw))}const pw=((...t)=>{const e=dw().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=gw(i);if(!s)return;const r=e._component;!oe(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,mw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function mw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gw(t){return We(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ug;const Jl=t=>ug=t,dg=Symbol();function vc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var br;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(br||(br={}));function bw(){const t=Rh(!0),e=t.run(()=>en({}));let n=[],i=[];const s=Wh({install(r){Jl(s),s._a=r,r.provide(dg,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return this._a?n.push(r):i.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const pg=()=>{};function ku(t,e,n,i=pg){t.push(e);const s=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),i())};return!n&&hm()&&qy(s),s}function ds(t,...e){t.slice().forEach(n=>{n(...e)})}const yw=t=>t(),Au=Symbol(),Ta=Symbol();function wc(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,i)=>t.set(i,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],s=t[n];vc(s)&&vc(i)&&t.hasOwnProperty(n)&&!Fe(i)&&!Si(i)?t[n]=wc(s,i):t[n]=i}return t}const vw=Symbol();function ww(t){return!vc(t)||!Object.prototype.hasOwnProperty.call(t,vw)}const{assign:ai}=Object;function xw(t){return!!(Fe(t)&&t.effect)}function Sw(t,e,n,i){const{state:s,actions:r,getters:o}=e,l=n.state.value[t];let a;function c(){l||(n.state.value[t]=s?s():{});const h=g1(n.state.value[t]);return ai(h,r,Object.keys(o||{}).reduce((f,u)=>(f[u]=Wh(jn(()=>{Jl(n);const d=n._s.get(t);return o[u].call(d,d)})),f),{}))}return a=mg(t,c,e,n,i,!0),a}function mg(t,e,n={},i,s,r){let o;const l=ai({actions:{}},n),a={deep:!0};let c,h,f=[],u=[],d;const p=i.state.value[t];!r&&!p&&(i.state.value[t]={}),en({});let g;function v(I){let R;c=h=!1,typeof I=="function"?(I(i.state.value[t]),R={type:br.patchFunction,storeId:t,events:d}):(wc(i.state.value[t],I),R={type:br.patchObject,payload:I,storeId:t,events:d});const W=g=Symbol();Em().then(()=>{g===W&&(c=!0)}),h=!0,ds(f,R,i.state.value[t])}const m=r?function(){const{state:R}=n,W=R?R():{};this.$patch($=>{ai($,W)})}:pg;function w(){o.stop(),f=[],u=[],i._s.delete(t)}const A=(I,R="")=>{if(Au in I)return I[Ta]=R,I;const W=function(){Jl(i);const $=Array.from(arguments),L=[],J=[];function ee(te){L.push(te)}function re(te){J.push(te)}ds(u,{args:$,name:W[Ta],store:C,after:ee,onError:re});let se;try{se=I.apply(this&&this.$id===t?this:C,$)}catch(te){throw ds(J,te),te}return se instanceof Promise?se.then(te=>(ds(L,te),te)).catch(te=>(ds(J,te),Promise.reject(te))):(ds(L,se),se)};return W[Au]=!0,W[Ta]=R,W},x={_p:i,$id:t,$onAction:ku.bind(null,u),$patch:v,$reset:m,$subscribe(I,R={}){const W=ku(f,I,R.detached,()=>$()),$=o.run(()=>bt(()=>i.state.value[t],L=>{(R.flush==="sync"?h:c)&&I({storeId:t,type:br.direct,events:d},L)},ai({},a,R)));return W},$dispose:w},C=Xr(x);i._s.set(t,C);const k=(i._a&&i._a.runWithContext||yw)(()=>i._e.run(()=>(o=Rh()).run(()=>e({action:A}))));for(const I in k){const R=k[I];if(Fe(R)&&!xw(R)||Si(R))r||(p&&ww(R)&&(Fe(R)?R.value=p[I]:wc(R,p[I])),i.state.value[t][I]=R);else if(typeof R=="function"){const W=A(R,I);k[I]=W,l.actions[I]=R}}return ai(C,k),ai(me(C),k),Object.defineProperty(C,"$state",{get:()=>i.state.value[t],set:I=>{v(R=>{ai(R,I)})}}),i._p.forEach(I=>{ai(C,o.run(()=>I({store:C,app:i._a,pinia:i,options:l})))}),p&&r&&n.hydrate&&n.hydrate(C.$state,p),c=!0,h=!0,C}/*! #__NO_SIDE_EFFECTS__ */function Cw(t,e,n){let i;const s=typeof e=="function";i=s?n:e;function r(o,l){const a=J1();return o=o||(a?Qi(dg,null):null),o&&Jl(o),o=ug,o._s.has(t)||(s?mg(t,e,i,o):Sw(t,i,o)),o._s.get(t)}return r.$id=t,r}/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function kw(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const gl=typeof window<"u",Ri=(t,e=!1)=>e?Symbol.for(t):Symbol(t),Aw=(t,e,n)=>_w({l:t,k:e,s:n}),_w=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),je=t=>typeof t=="number"&&isFinite(t),Mw=t=>Yh(t)==="[object Date]",Ps=t=>Yh(t)==="[object RegExp]",Ql=t=>fe(t)&&Object.keys(t).length===0,Ge=Object.assign,Tw=Object.create,Se=(t=null)=>Tw(t);let _u;const qi=()=>_u||(_u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Se());function Mu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Tu(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ew(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(i,s,r)=>`${s}="${Tu(r)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(i,s,r)=>`${s}='${Tu(r)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(i=>{t=t.replace(i,"$1javascript&#58;")}),t}const Ow=Object.prototype.hasOwnProperty;function tn(t,e){return Ow.call(t,e)}const Be=Array.isArray,Le=t=>typeof t=="function",X=t=>typeof t=="string",ye=t=>typeof t=="boolean",ve=t=>t!==null&&typeof t=="object",Lw=t=>ve(t)&&Le(t.then)&&Le(t.catch),gg=Object.prototype.toString,Yh=t=>gg.call(t),fe=t=>Yh(t)==="[object Object]",Dw=t=>t==null?"":Be(t)||fe(t)&&t.toString===gg?JSON.stringify(t,null,2):String(t);function Xh(t,e=""){return t.reduce((n,i,s)=>s===0?n+i:n+e+i,"")}const po=t=>!ve(t)||Be(t);function Go(t,e){if(po(t)||po(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:i,des:s}=n.pop();Object.keys(i).forEach(r=>{r!=="__proto__"&&(ve(i[r])&&!ve(s[r])&&(s[r]=Array.isArray(i[r])?[]:Se()),po(s[r])||po(i[r])?s[r]=i[r]:n.push({src:i[r],des:s[r]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Rw(t,e,n){return{line:t,column:e,offset:n}}function xc(t,e,n){return{start:t,end:e}}const we={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},Pw=17;function Zl(t,e,n={}){const{domain:i,messages:s,args:r}=n,o=t,l=new SyntaxError(String(o));return l.code=t,e&&(l.location=e),l.domain=i,l}function Iw(t){throw t}const fn=" ",Nw="\r",at=`
`,Bw="\u2028",Fw="\u2029";function Hw(t){const e=t;let n=0,i=1,s=1,r=0;const o=k=>e[k]===Nw&&e[k+1]===at,l=k=>e[k]===at,a=k=>e[k]===Fw,c=k=>e[k]===Bw,h=k=>o(k)||l(k)||a(k)||c(k),f=()=>n,u=()=>i,d=()=>s,p=()=>r,g=k=>o(k)||a(k)||c(k)?at:e[k],v=()=>g(n),m=()=>g(n+r);function w(){return r=0,h(n)&&(i++,s=0),o(n)&&n++,n++,s++,e[n]}function A(){return o(n+r)&&r++,r++,e[n+r]}function x(){n=0,i=1,s=1,r=0}function C(k=0){r=k}function M(){const k=n+r;for(;k!==n;)w();r=0}return{index:f,line:u,column:d,peekOffset:p,charAt:g,currentChar:v,currentPeek:m,next:w,peek:A,reset:x,resetPeek:C,skipToPeek:M}}const Fn=void 0,Vw=".",Eu="'",Ww="tokenizer";function $w(t,e={}){const n=e.location!==!1,i=Hw(t),s=()=>i.index(),r=()=>Rw(i.line(),i.column(),i.index()),o=r(),l=s(),a={currentType:13,offset:l,startLoc:o,endLoc:o,lastType:13,lastOffset:l,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>a,{onError:h}=e;function f(b,y,T,...O){const z=c();if(y.column+=T,y.offset+=T,h){const B=n?xc(z.startLoc,y):null,E=Zl(b,B,{domain:Ww,args:O});h(E)}}function u(b,y,T){b.endLoc=r(),b.currentType=y;const O={type:y};return n&&(O.loc=xc(b.startLoc,b.endLoc)),T!=null&&(O.value=T),O}const d=b=>u(b,13);function p(b,y){return b.currentChar()===y?(b.next(),y):(f(we.EXPECTED_TOKEN,r(),0,y),"")}function g(b){let y="";for(;b.currentPeek()===fn||b.currentPeek()===at;)y+=b.currentPeek(),b.peek();return y}function v(b){const y=g(b);return b.skipToPeek(),y}function m(b){if(b===Fn)return!1;const y=b.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y===95}function w(b){if(b===Fn)return!1;const y=b.charCodeAt(0);return y>=48&&y<=57}function A(b,y){const{currentType:T}=y;if(T!==2)return!1;g(b);const O=m(b.currentPeek());return b.resetPeek(),O}function x(b,y){const{currentType:T}=y;if(T!==2)return!1;g(b);const O=b.currentPeek()==="-"?b.peek():b.currentPeek(),z=w(O);return b.resetPeek(),z}function C(b,y){const{currentType:T}=y;if(T!==2)return!1;g(b);const O=b.currentPeek()===Eu;return b.resetPeek(),O}function M(b,y){const{currentType:T}=y;if(T!==7)return!1;g(b);const O=b.currentPeek()===".";return b.resetPeek(),O}function k(b,y){const{currentType:T}=y;if(T!==8)return!1;g(b);const O=m(b.currentPeek());return b.resetPeek(),O}function I(b,y){const{currentType:T}=y;if(!(T===7||T===11))return!1;g(b);const O=b.currentPeek()===":";return b.resetPeek(),O}function R(b,y){const{currentType:T}=y;if(T!==9)return!1;const O=()=>{const B=b.currentPeek();return B==="{"?m(b.peek()):B==="@"||B==="|"||B===":"||B==="."||B===fn||!B?!1:B===at?(b.peek(),O()):$(b,!1)},z=O();return b.resetPeek(),z}function W(b){g(b);const y=b.currentPeek()==="|";return b.resetPeek(),y}function $(b,y=!0){const T=(z=!1,B="")=>{const E=b.currentPeek();return E==="{"||E==="@"||!E?z:E==="|"?!(B===fn||B===at):E===fn?(b.peek(),T(!0,fn)):E===at?(b.peek(),T(!0,at)):!0},O=T();return y&&b.resetPeek(),O}function L(b,y){const T=b.currentChar();return T===Fn?Fn:y(T)?(b.next(),T):null}function J(b){const y=b.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36}function ee(b){return L(b,J)}function re(b){const y=b.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36||y===45}function se(b){return L(b,re)}function te(b){const y=b.charCodeAt(0);return y>=48&&y<=57}function ae(b){return L(b,te)}function de(b){const y=b.charCodeAt(0);return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function Ie(b){return L(b,de)}function Ne(b){let y="",T="";for(;y=ae(b);)T+=y;return T}function Ce(b){let y="";for(;;){const T=b.currentChar();if(T==="{"||T==="}"||T==="@"||T==="|"||!T)break;if(T===fn||T===at)if($(b))y+=T,b.next();else{if(W(b))break;y+=T,b.next()}else y+=T,b.next()}return y}function Ze(b){v(b);let y="",T="";for(;y=se(b);)T+=y;const O=b.currentChar();if(O&&O!=="}"&&O!==Fn&&O!==fn&&O!==at&&O!==""){const z=an(b);return f(we.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,T+z),T+z}return b.currentChar()===Fn&&f(we.UNTERMINATED_CLOSING_BRACE,r(),0),T}function Lt(b){v(b);let y="";return b.currentChar()==="-"?(b.next(),y+=`-${Ne(b)}`):y+=Ne(b),b.currentChar()===Fn&&f(we.UNTERMINATED_CLOSING_BRACE,r(),0),y}function Jt(b){return b!==Eu&&b!==at}function kt(b){v(b),p(b,"'");let y="",T="";for(;y=L(b,Jt);)y==="\\"?T+=Qt(b):T+=y;const O=b.currentChar();return O===at||O===Fn?(f(we.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),O===at&&(b.next(),p(b,"'")),T):(p(b,"'"),T)}function Qt(b){const y=b.currentChar();switch(y){case"\\":case"'":return b.next(),`\\${y}`;case"u":return ri(b,y,4);case"U":return ri(b,y,6);default:return f(we.UNKNOWN_ESCAPE_SEQUENCE,r(),0,y),""}}function ri(b,y,T){p(b,y);let O="";for(let z=0;z<T;z++){const B=Ie(b);if(!B){f(we.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${y}${O}${b.currentChar()}`);break}O+=B}return`\\${y}${O}`}function fs(b){return b!=="{"&&b!=="}"&&b!==fn&&b!==at}function an(b){v(b);let y="",T="";for(;y=L(b,fs);)T+=y;return T}function ao(b){let y="",T="";for(;y=ee(b);)T+=y;return T}function S(b){const y=T=>{const O=b.currentChar();return O==="{"||O==="@"||O==="|"||O==="("||O===")"||!O||O===fn?T:(T+=O,b.next(),y(T))};return y("")}function _(b){v(b);const y=p(b,"|");return v(b),y}function P(b,y){let T=null;switch(b.currentChar()){case"{":return y.braceNest>=1&&f(we.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),b.next(),T=u(y,2,"{"),v(b),y.braceNest++,T;case"}":return y.braceNest>0&&y.currentType===2&&f(we.EMPTY_PLACEHOLDER,r(),0),b.next(),T=u(y,3,"}"),y.braceNest--,y.braceNest>0&&v(b),y.inLinked&&y.braceNest===0&&(y.inLinked=!1),T;case"@":return y.braceNest>0&&f(we.UNTERMINATED_CLOSING_BRACE,r(),0),T=V(b,y)||d(y),y.braceNest=0,T;default:{let z=!0,B=!0,E=!0;if(W(b))return y.braceNest>0&&f(we.UNTERMINATED_CLOSING_BRACE,r(),0),T=u(y,1,_(b)),y.braceNest=0,y.inLinked=!1,T;if(y.braceNest>0&&(y.currentType===4||y.currentType===5||y.currentType===6))return f(we.UNTERMINATED_CLOSING_BRACE,r(),0),y.braceNest=0,F(b,y);if(z=A(b,y))return T=u(y,4,Ze(b)),v(b),T;if(B=x(b,y))return T=u(y,5,Lt(b)),v(b),T;if(E=C(b,y))return T=u(y,6,kt(b)),v(b),T;if(!z&&!B&&!E)return T=u(y,12,an(b)),f(we.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,T.value),v(b),T;break}}return T}function V(b,y){const{currentType:T}=y;let O=null;const z=b.currentChar();switch((T===7||T===8||T===11||T===9)&&(z===at||z===fn)&&f(we.INVALID_LINKED_FORMAT,r(),0),z){case"@":return b.next(),O=u(y,7,"@"),y.inLinked=!0,O;case".":return v(b),b.next(),u(y,8,".");case":":return v(b),b.next(),u(y,9,":");default:return W(b)?(O=u(y,1,_(b)),y.braceNest=0,y.inLinked=!1,O):M(b,y)||I(b,y)?(v(b),V(b,y)):k(b,y)?(v(b),u(y,11,ao(b))):R(b,y)?(v(b),z==="{"?P(b,y)||O:u(y,10,S(b))):(T===7&&f(we.INVALID_LINKED_FORMAT,r(),0),y.braceNest=0,y.inLinked=!1,F(b,y))}}function F(b,y){let T={type:13};if(y.braceNest>0)return P(b,y)||d(y);if(y.inLinked)return V(b,y)||d(y);switch(b.currentChar()){case"{":return P(b,y)||d(y);case"}":return f(we.UNBALANCED_CLOSING_BRACE,r(),0),b.next(),u(y,3,"}");case"@":return V(b,y)||d(y);default:{if(W(b))return T=u(y,1,_(b)),y.braceNest=0,y.inLinked=!1,T;if($(b))return u(y,0,Ce(b));break}}return T}function H(){const{currentType:b,offset:y,startLoc:T,endLoc:O}=a;return a.lastType=b,a.lastOffset=y,a.lastStartLoc=T,a.lastEndLoc=O,a.offset=s(),a.startLoc=r(),i.currentChar()===Fn?u(a,13):F(i,a)}return{nextToken:H,currentOffset:s,currentPosition:r,context:c}}const Uw="parser",jw=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function zw(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(e||n,16);return i<=55295||i>=57344?String.fromCodePoint(i):""}}}function Kw(t={}){const e=t.location!==!1,{onError:n}=t;function i(m,w,A,x,...C){const M=m.currentPosition();if(M.offset+=x,M.column+=x,n){const k=e?xc(A,M):null,I=Zl(w,k,{domain:Uw,args:C});n(I)}}function s(m,w,A){const x={type:m};return e&&(x.start=w,x.end=w,x.loc={start:A,end:A}),x}function r(m,w,A,x){e&&(m.end=w,m.loc&&(m.loc.end=A))}function o(m,w){const A=m.context(),x=s(3,A.offset,A.startLoc);return x.value=w,r(x,m.currentOffset(),m.currentPosition()),x}function l(m,w){const A=m.context(),{lastOffset:x,lastStartLoc:C}=A,M=s(5,x,C);return M.index=parseInt(w,10),m.nextToken(),r(M,m.currentOffset(),m.currentPosition()),M}function a(m,w){const A=m.context(),{lastOffset:x,lastStartLoc:C}=A,M=s(4,x,C);return M.key=w,m.nextToken(),r(M,m.currentOffset(),m.currentPosition()),M}function c(m,w){const A=m.context(),{lastOffset:x,lastStartLoc:C}=A,M=s(9,x,C);return M.value=w.replace(jw,zw),m.nextToken(),r(M,m.currentOffset(),m.currentPosition()),M}function h(m){const w=m.nextToken(),A=m.context(),{lastOffset:x,lastStartLoc:C}=A,M=s(8,x,C);return w.type!==11?(i(m,we.UNEXPECTED_EMPTY_LINKED_MODIFIER,A.lastStartLoc,0),M.value="",r(M,x,C),{nextConsumeToken:w,node:M}):(w.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,un(w)),M.value=w.value||"",r(M,m.currentOffset(),m.currentPosition()),{node:M})}function f(m,w){const A=m.context(),x=s(7,A.offset,A.startLoc);return x.value=w,r(x,m.currentOffset(),m.currentPosition()),x}function u(m){const w=m.context(),A=s(6,w.offset,w.startLoc);let x=m.nextToken();if(x.type===8){const C=h(m);A.modifier=C.node,x=C.nextConsumeToken||m.nextToken()}switch(x.type!==9&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(x)),x=m.nextToken(),x.type===2&&(x=m.nextToken()),x.type){case 10:x.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(x)),A.key=f(m,x.value||"");break;case 4:x.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(x)),A.key=a(m,x.value||"");break;case 5:x.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(x)),A.key=l(m,x.value||"");break;case 6:x.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(x)),A.key=c(m,x.value||"");break;default:{i(m,we.UNEXPECTED_EMPTY_LINKED_KEY,w.lastStartLoc,0);const C=m.context(),M=s(7,C.offset,C.startLoc);return M.value="",r(M,C.offset,C.startLoc),A.key=M,r(A,C.offset,C.startLoc),{nextConsumeToken:x,node:A}}}return r(A,m.currentOffset(),m.currentPosition()),{node:A}}function d(m){const w=m.context(),A=w.currentType===1?m.currentOffset():w.offset,x=w.currentType===1?w.endLoc:w.startLoc,C=s(2,A,x);C.items=[];let M=null;do{const R=M||m.nextToken();switch(M=null,R.type){case 0:R.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(R)),C.items.push(o(m,R.value||""));break;case 5:R.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(R)),C.items.push(l(m,R.value||""));break;case 4:R.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(R)),C.items.push(a(m,R.value||""));break;case 6:R.value==null&&i(m,we.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,un(R)),C.items.push(c(m,R.value||""));break;case 7:{const W=u(m);C.items.push(W.node),M=W.nextConsumeToken||null;break}}}while(w.currentType!==13&&w.currentType!==1);const k=w.currentType===1?w.lastOffset:m.currentOffset(),I=w.currentType===1?w.lastEndLoc:m.currentPosition();return r(C,k,I),C}function p(m,w,A,x){const C=m.context();let M=x.items.length===0;const k=s(1,w,A);k.cases=[],k.cases.push(x);do{const I=d(m);M||(M=I.items.length===0),k.cases.push(I)}while(C.currentType!==13);return M&&i(m,we.MUST_HAVE_MESSAGES_IN_PLURAL,A,0),r(k,m.currentOffset(),m.currentPosition()),k}function g(m){const w=m.context(),{offset:A,startLoc:x}=w,C=d(m);return w.currentType===13?C:p(m,A,x,C)}function v(m){const w=$w(m,Ge({},t)),A=w.context(),x=s(0,A.offset,A.startLoc);return e&&x.loc&&(x.loc.source=m),x.body=g(w),t.onCacheKey&&(x.cacheKey=t.onCacheKey(m)),A.currentType!==13&&i(w,we.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,m[A.offset]||""),r(x,w.currentOffset(),w.currentPosition()),x}return{parse:v}}function un(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function qw(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function Ou(t,e){for(let n=0;n<t.length;n++)Jh(t[n],e)}function Jh(t,e){switch(t.type){case 1:Ou(t.cases,e),e.helper("plural");break;case 2:Ou(t.items,e);break;case 6:{Jh(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function Gw(t,e={}){const n=qw(t);n.helper("normalize"),t.body&&Jh(t.body,n);const i=n.context();t.helpers=Array.from(i.helpers)}function Yw(t){const e=t.body;return e.type===2?Lu(e):e.cases.forEach(n=>Lu(n)),t}function Lu(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const i=t.items[n];if(!(i.type===3||i.type===9)||i.value==null)break;e.push(i.value)}if(e.length===t.items.length){t.static=Xh(e);for(let n=0;n<t.items.length;n++){const i=t.items[n];(i.type===3||i.type===9)&&delete i.value}}}}function ys(t){switch(t.t=t.type,t.type){case 0:{const e=t;ys(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let i=0;i<n.length;i++)ys(n[i]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let i=0;i<n.length;i++)ys(n[i]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ys(e.key),e.k=e.key,delete e.key,e.modifier&&(ys(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function Xw(t,e){const{filename:n,breakLineCode:i,needIndent:s}=e,r=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0};r&&t.loc&&(o.source=t.loc.source);const l=()=>o;function a(g,v){o.code+=g}function c(g,v=!0){const m=v?i:"";a(s?m+"  ".repeat(g):m)}function h(g=!0){const v=++o.indentLevel;g&&c(v)}function f(g=!0){const v=--o.indentLevel;g&&c(v)}function u(){c(o.indentLevel)}return{context:l,push:a,indent:h,deindent:f,newline:u,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function Jw(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Is(t,e.key),e.modifier?(t.push(", "),Is(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function Qw(t,e){const{helper:n,needIndent:i}=t;t.push(`${n("normalize")}([`),t.indent(i());const s=e.items.length;for(let r=0;r<s&&(Is(t,e.items[r]),r!==s-1);r++)t.push(", ");t.deindent(i()),t.push("])")}function Zw(t,e){const{helper:n,needIndent:i}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(i());const s=e.cases.length;for(let r=0;r<s&&(Is(t,e.cases[r]),r!==s-1);r++)t.push(", ");t.deindent(i()),t.push("])")}}function ex(t,e){e.body?Is(t,e.body):t.push("null")}function Is(t,e){const{helper:n}=t;switch(e.type){case 0:ex(t,e);break;case 1:Zw(t,e);break;case 2:Qw(t,e);break;case 6:Jw(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const tx=(t,e={})=>{const n=X(e.mode)?e.mode:"normal",i=X(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,r=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],l=Xw(t,{filename:i,breakLineCode:s,needIndent:r});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(r),o.length>0&&(l.push(`const { ${Xh(o.map(h=>`${h}: _${h}`),", ")} } = ctx`),l.newline()),l.push("return "),Is(l,t),l.deindent(r),l.push("}"),delete t.helpers;const{code:a,map:c}=l.context();return{ast:t,code:a,map:c?c.toJSON():void 0}};function nx(t,e={}){const n=Ge({},e),i=!!n.jit,s=!!n.minify,r=n.optimize==null?!0:n.optimize,l=Kw(n).parse(t);return i?(r&&Yw(l),s&&ys(l),{ast:l,code:""}):(Gw(l,n),tx(l,n))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function ix(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(qi().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(qi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Ln(t){return ve(t)&&Qh(t)===0&&(tn(t,"b")||tn(t,"body"))}const bg=["b","body"];function sx(t){return Pi(t,bg)}const yg=["c","cases"];function rx(t){return Pi(t,yg,[])}const vg=["s","static"];function ox(t){return Pi(t,vg)}const wg=["i","items"];function lx(t){return Pi(t,wg,[])}const xg=["t","type"];function Qh(t){return Pi(t,xg)}const Sg=["v","value"];function mo(t,e){const n=Pi(t,Sg);if(n!=null)return n;throw Lr(e)}const Cg=["m","modifier"];function ax(t){return Pi(t,Cg)}const kg=["k","key"];function cx(t){const e=Pi(t,kg);if(e)return e;throw Lr(6)}function Pi(t,e,n){for(let i=0;i<e.length;i++){const s=e[i];if(tn(t,s)&&t[s]!=null)return t[s]}return n}const Ag=[...bg,...yg,...vg,...wg,...kg,...Cg,...Sg,...xg];function Lr(t){return new Error(`unhandled node type: ${t}`)}function Ea(t){return n=>hx(n,t)}function hx(t,e){const n=sx(e);if(n==null)throw Lr(0);if(Qh(n)===1){const r=rx(n);return t.plural(r.reduce((o,l)=>[...o,Du(t,l)],[]))}else return Du(t,n)}function Du(t,e){const n=ox(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const i=lx(e).reduce((s,r)=>[...s,Sc(t,r)],[]);return t.normalize(i)}}function Sc(t,e){const n=Qh(e);switch(n){case 3:return mo(e,n);case 9:return mo(e,n);case 4:{const i=e;if(tn(i,"k")&&i.k)return t.interpolate(t.named(i.k));if(tn(i,"key")&&i.key)return t.interpolate(t.named(i.key));throw Lr(n)}case 5:{const i=e;if(tn(i,"i")&&je(i.i))return t.interpolate(t.list(i.i));if(tn(i,"index")&&je(i.index))return t.interpolate(t.list(i.index));throw Lr(n)}case 6:{const i=e,s=ax(i),r=cx(i);return t.linked(Sc(t,r),s?Sc(t,s):void 0,t.type)}case 7:return mo(e,n);case 8:return mo(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const fx=t=>t;let go=Se();function ux(t,e={}){let n=!1;const i=e.onError||Iw;return e.onError=s=>{n=!0,i(s)},{...nx(t,e),detectError:n}}function dx(t,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&X(t)){ye(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||fx)(t),s=go[i];if(s)return s;const{ast:r,detectError:o}=ux(t,{...e,location:!1,jit:!0}),l=Ea(r);return o?l:go[i]=l}else{const n=t.cacheKey;if(n){const i=go[n];return i||(go[n]=Ea(t))}else return Ea(t)}}let Dr=null;function px(t){Dr=t}function mx(t,e,n){Dr&&Dr.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const gx=bx("function:translate");function bx(t){return e=>Dr&&Dr.emit(t,e)}const Kn={INVALID_ARGUMENT:Pw,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},yx=24;function qn(t){return Zl(t,null,void 0)}function Zh(t,e){return e.locale!=null?Ru(e.locale):Ru(t.locale)}let Oa;function Ru(t){if(X(t))return t;if(Le(t)){if(t.resolvedOnce&&Oa!=null)return Oa;if(t.constructor.name==="Function"){const e=t();if(Lw(e))throw qn(Kn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Oa=e}else throw qn(Kn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw qn(Kn.NOT_SUPPORT_LOCALE_TYPE)}function vx(t,e,n){return[...new Set([n,...Be(e)?e:ve(e)?Object.keys(e):X(e)?[e]:[n]])]}function _g(t,e,n){const i=X(n)?n:Rr,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let r=s.__localeChainCache.get(i);if(!r){r=[];let o=[n];for(;Be(o);)o=Pu(r,o,e);const l=Be(e)||!fe(e)?e:e.default?e.default:null;o=X(l)?[l]:l,Be(o)&&Pu(r,o,!1),s.__localeChainCache.set(i,r)}return r}function Pu(t,e,n){let i=!0;for(let s=0;s<e.length&&ye(i);s++){const r=e[s];X(r)&&(i=wx(t,e[s],n))}return i}function wx(t,e,n){let i;const s=e.split("-");do{const r=s.join("-");i=xx(t,r,n),s.splice(-1,1)}while(s.length&&i===!0);return i}function xx(t,e,n){let i=!1;if(!t.includes(e)&&(i=!0,e)){i=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Be(n)||fe(n))&&n[s]&&(i=n[s])}return i}const Ii=[];Ii[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ii[1]={w:[1],".":[2],"[":[4],o:[7]};Ii[2]={w:[2],i:[3,0],0:[3,0]};Ii[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ii[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ii[5]={"'":[4,0],o:8,l:[5,0]};Ii[6]={'"':[4,0],o:8,l:[6,0]};const Sx=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Cx(t){return Sx.test(t)}function kx(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function Ax(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function _x(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Cx(e)?kx(e):"*"+e}function Mx(t){const e=[];let n=-1,i=0,s=0,r,o,l,a,c,h,f;const u=[];u[0]=()=>{o===void 0?o=l:o+=l},u[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},u[2]=()=>{u[0](),s++},u[3]=()=>{if(s>0)s--,i=4,u[0]();else{if(s=0,o===void 0||(o=_x(o),o===!1))return!1;u[1]()}};function d(){const p=t[n+1];if(i===5&&p==="'"||i===6&&p==='"')return n++,l="\\"+p,u[0](),!0}for(;i!==null;)if(n++,r=t[n],!(r==="\\"&&d())){if(a=Ax(r),f=Ii[i],c=f[a]||f.l||8,c===8||(i=c[0],c[1]!==void 0&&(h=u[c[1]],h&&(l=r,h()===!1))))return;if(i===7)return e}}const Iu=new Map;function Tx(t,e){return ve(t)?t[e]:null}function Ex(t,e){if(!ve(t))return null;let n=Iu.get(e);if(n||(n=Mx(e),n&&Iu.set(e,n)),!n)return null;const i=n.length;let s=t,r=0;for(;r<i;){const o=n[r];if(Ag.includes(o)&&Ln(s))return null;const l=s[o];if(l===void 0||Le(s))return null;s=l,r++}return s}const Ox="11.1.12",ea=-1,Rr="en-US",Nu="",Bu=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Lx(){return{upper:(t,e)=>e==="text"&&X(t)?t.toUpperCase():e==="vnode"&&ve(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&X(t)?t.toLowerCase():e==="vnode"&&ve(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&X(t)?Bu(t):e==="vnode"&&ve(t)&&"__v_isVNode"in t?Bu(t.children):t}}let Mg;function Dx(t){Mg=t}let Tg;function Rx(t){Tg=t}let Eg;function Px(t){Eg=t}let Og=null;const Ix=t=>{Og=t},Nx=()=>Og;let Lg=null;const Fu=t=>{Lg=t},Bx=()=>Lg;let Hu=0;function Fx(t={}){const e=Le(t.onWarn)?t.onWarn:kw,n=X(t.version)?t.version:Ox,i=X(t.locale)||Le(t.locale)?t.locale:Rr,s=Le(i)?Rr:i,r=Be(t.fallbackLocale)||fe(t.fallbackLocale)||X(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=fe(t.messages)?t.messages:La(s),l=fe(t.datetimeFormats)?t.datetimeFormats:La(s),a=fe(t.numberFormats)?t.numberFormats:La(s),c=Ge(Se(),t.modifiers,Lx()),h=t.pluralRules||Se(),f=Le(t.missing)?t.missing:null,u=ye(t.missingWarn)||Ps(t.missingWarn)?t.missingWarn:!0,d=ye(t.fallbackWarn)||Ps(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,g=!!t.unresolving,v=Le(t.postTranslation)?t.postTranslation:null,m=fe(t.processor)?t.processor:null,w=ye(t.warnHtmlMessage)?t.warnHtmlMessage:!0,A=!!t.escapeParameter,x=Le(t.messageCompiler)?t.messageCompiler:Mg,C=Le(t.messageResolver)?t.messageResolver:Tg||Tx,M=Le(t.localeFallbacker)?t.localeFallbacker:Eg||vx,k=ve(t.fallbackContext)?t.fallbackContext:void 0,I=t,R=ve(I.__datetimeFormatters)?I.__datetimeFormatters:new Map,W=ve(I.__numberFormatters)?I.__numberFormatters:new Map,$=ve(I.__meta)?I.__meta:{};Hu++;const L={version:n,cid:Hu,locale:i,fallbackLocale:r,messages:o,modifiers:c,pluralRules:h,missing:f,missingWarn:u,fallbackWarn:d,fallbackFormat:p,unresolving:g,postTranslation:v,processor:m,warnHtmlMessage:w,escapeParameter:A,messageCompiler:x,messageResolver:C,localeFallbacker:M,fallbackContext:k,onWarn:e,__meta:$};return L.datetimeFormats=l,L.numberFormats=a,L.__datetimeFormatters=R,L.__numberFormatters=W,__INTLIFY_PROD_DEVTOOLS__&&mx(L,n,$),L}const La=t=>({[t]:Se()});function ef(t,e,n,i,s){const{missing:r,onWarn:o}=t;if(r!==null){const l=r(t,n,e,s);return X(l)?l:e}else return e}function Ys(t,e,n){const i=t;i.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function Hx(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function Vx(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let i=n+1;i<e.length;i++)if(Hx(t,e[i]))return!0;return!1}function Vu(t,...e){const{datetimeFormats:n,unresolving:i,fallbackLocale:s,onWarn:r,localeFallbacker:o}=t,{__datetimeFormatters:l}=t,[a,c,h,f]=Cc(...e),u=ye(h.missingWarn)?h.missingWarn:t.missingWarn;ye(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const d=!!h.part,p=Zh(t,h),g=o(t,s,p);if(!X(a)||a==="")return new Intl.DateTimeFormat(p,f).format(c);let v={},m,w=null;const A="datetime format";for(let M=0;M<g.length&&(m=g[M],v=n[m]||{},w=v[a],!fe(w));M++)ef(t,a,m,u,A);if(!fe(w)||!X(m))return i?ea:a;let x=`${m}__${a}`;Ql(f)||(x=`${x}__${JSON.stringify(f)}`);let C=l.get(x);return C||(C=new Intl.DateTimeFormat(m,Ge({},w,f)),l.set(x,C)),d?C.formatToParts(c):C.format(c)}const Dg=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Cc(...t){const[e,n,i,s]=t,r=Se();let o=Se(),l;if(X(e)){const a=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!a)throw qn(Kn.INVALID_ISO_DATE_ARGUMENT);const c=a[3]?a[3].trim().startsWith("T")?`${a[1].trim()}${a[3].trim()}`:`${a[1].trim()}T${a[3].trim()}`:a[1].trim();l=new Date(c);try{l.toISOString()}catch{throw qn(Kn.INVALID_ISO_DATE_ARGUMENT)}}else if(Mw(e)){if(isNaN(e.getTime()))throw qn(Kn.INVALID_DATE_ARGUMENT);l=e}else if(je(e))l=e;else throw qn(Kn.INVALID_ARGUMENT);return X(n)?r.key=n:fe(n)&&Object.keys(n).forEach(a=>{Dg.includes(a)?o[a]=n[a]:r[a]=n[a]}),X(i)?r.locale=i:fe(i)&&(o=i),fe(s)&&(o=s),[r.key||"",l,r,o]}function Wu(t,e,n){const i=t;for(const s in n){const r=`${e}__${s}`;i.__datetimeFormatters.has(r)&&i.__datetimeFormatters.delete(r)}}function $u(t,...e){const{numberFormats:n,unresolving:i,fallbackLocale:s,onWarn:r,localeFallbacker:o}=t,{__numberFormatters:l}=t,[a,c,h,f]=kc(...e),u=ye(h.missingWarn)?h.missingWarn:t.missingWarn;ye(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const d=!!h.part,p=Zh(t,h),g=o(t,s,p);if(!X(a)||a==="")return new Intl.NumberFormat(p,f).format(c);let v={},m,w=null;const A="number format";for(let M=0;M<g.length&&(m=g[M],v=n[m]||{},w=v[a],!fe(w));M++)ef(t,a,m,u,A);if(!fe(w)||!X(m))return i?ea:a;let x=`${m}__${a}`;Ql(f)||(x=`${x}__${JSON.stringify(f)}`);let C=l.get(x);return C||(C=new Intl.NumberFormat(m,Ge({},w,f)),l.set(x,C)),d?C.formatToParts(c):C.format(c)}const Rg=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function kc(...t){const[e,n,i,s]=t,r=Se();let o=Se();if(!je(e))throw qn(Kn.INVALID_ARGUMENT);const l=e;return X(n)?r.key=n:fe(n)&&Object.keys(n).forEach(a=>{Rg.includes(a)?o[a]=n[a]:r[a]=n[a]}),X(i)?r.locale=i:fe(i)&&(o=i),fe(s)&&(o=s),[r.key||"",l,r,o]}function Uu(t,e,n){const i=t;for(const s in n){const r=`${e}__${s}`;i.__numberFormatters.has(r)&&i.__numberFormatters.delete(r)}}const Wx=t=>t,$x=t=>"",Ux="text",jx=t=>t.length===0?"":Xh(t),zx=Dw;function ju(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Kx(t){const e=je(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(je(t.named.count)||je(t.named.n))?je(t.named.count)?t.named.count:je(t.named.n)?t.named.n:e:e}function qx(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Gx(t={}){const e=t.locale,n=Kx(t),i=ve(t.pluralRules)&&X(e)&&Le(t.pluralRules[e])?t.pluralRules[e]:ju,s=ve(t.pluralRules)&&X(e)&&Le(t.pluralRules[e])?ju:void 0,r=m=>m[i(n,m.length,s)],o=t.list||[],l=m=>o[m],a=t.named||Se();je(t.pluralIndex)&&qx(n,a);const c=m=>a[m];function h(m,w){const A=Le(t.messages)?t.messages(m,!!w):ve(t.messages)?t.messages[m]:!1;return A||(t.parent?t.parent.message(m):$x)}const f=m=>t.modifiers?t.modifiers[m]:Wx,u=fe(t.processor)&&Le(t.processor.normalize)?t.processor.normalize:jx,d=fe(t.processor)&&Le(t.processor.interpolate)?t.processor.interpolate:zx,p=fe(t.processor)&&X(t.processor.type)?t.processor.type:Ux,v={list:l,named:c,plural:r,linked:(m,...w)=>{const[A,x]=w;let C="text",M="";w.length===1?ve(A)?(M=A.modifier||M,C=A.type||C):X(A)&&(M=A||M):w.length===2&&(X(A)&&(M=A||M),X(x)&&(C=x||C));const k=h(m,!0)(v),I=C==="vnode"&&Be(k)&&M?k[0]:k;return M?f(M)(I,C):I},message:h,type:p,interpolate:d,normalize:u,values:Ge(Se(),o,a)};return v}const zu=()=>"",Wt=t=>Le(t);function Ku(t,...e){const{fallbackFormat:n,postTranslation:i,unresolving:s,messageCompiler:r,fallbackLocale:o,messages:l}=t,[a,c]=Ac(...e),h=ye(c.missingWarn)?c.missingWarn:t.missingWarn,f=ye(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,u=ye(c.escapeParameter)?c.escapeParameter:t.escapeParameter,d=!!c.resolvedMessage,p=X(c.default)||ye(c.default)?ye(c.default)?r?a:()=>a:c.default:n?r?a:()=>a:null,g=n||p!=null&&(X(p)||Le(p)),v=Zh(t,c);u&&Yx(c);let[m,w,A]=d?[a,v,l[v]||Se()]:Pg(t,a,v,o,f,h),x=m,C=a;if(!d&&!(X(x)||Ln(x)||Wt(x))&&g&&(x=p,C=x),!d&&(!(X(x)||Ln(x)||Wt(x))||!X(w)))return s?ea:a;let M=!1;const k=()=>{M=!0},I=Wt(x)?x:Ig(t,a,w,x,C,k);if(M)return x;const R=Qx(t,w,A,c),W=Gx(R),$=Xx(t,I,W);let L=i?i($,a):$;if(u&&X(L)&&(L=Ew(L)),__INTLIFY_PROD_DEVTOOLS__){const J={timestamp:Date.now(),key:X(a)?a:Wt(x)?x.key:"",locale:w||(Wt(x)?x.locale:""),format:X(x)?x:Wt(x)?x.source:"",message:L};J.meta=Ge({},t.__meta,Nx()||{}),gx(J)}return L}function Yx(t){Be(t.list)?t.list=t.list.map(e=>X(e)?Mu(e):e):ve(t.named)&&Object.keys(t.named).forEach(e=>{X(t.named[e])&&(t.named[e]=Mu(t.named[e]))})}function Pg(t,e,n,i,s,r){const{messages:o,onWarn:l,messageResolver:a,localeFallbacker:c}=t,h=c(t,i,n);let f=Se(),u,d=null;const p="translate";for(let g=0;g<h.length&&(u=h[g],f=o[u]||Se(),(d=a(f,e))===null&&(d=f[e]),!(X(d)||Ln(d)||Wt(d)));g++)if(!Vx(u,h)){const v=ef(t,e,u,r,p);v!==e&&(d=v)}return[d,u,f]}function Ig(t,e,n,i,s,r){const{messageCompiler:o,warnHtmlMessage:l}=t;if(Wt(i)){const c=i;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=(()=>i);return c.locale=n,c.key=e,c}const a=o(i,Jx(t,n,s,i,l,r));return a.locale=n,a.key=e,a.source=i,a}function Xx(t,e,n){return e(n)}function Ac(...t){const[e,n,i]=t,s=Se();if(!X(e)&&!je(e)&&!Wt(e)&&!Ln(e))throw qn(Kn.INVALID_ARGUMENT);const r=je(e)?String(e):(Wt(e),e);return je(n)?s.plural=n:X(n)?s.default=n:fe(n)&&!Ql(n)?s.named=n:Be(n)&&(s.list=n),je(i)?s.plural=i:X(i)?s.default=i:fe(i)&&Ge(s,i),[r,s]}function Jx(t,e,n,i,s,r){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw r&&r(o),o},onCacheKey:o=>Aw(e,n,o)}}function Qx(t,e,n,i){const{modifiers:s,pluralRules:r,messageResolver:o,fallbackLocale:l,fallbackWarn:a,missingWarn:c,fallbackContext:h}=t,u={locale:e,modifiers:s,pluralRules:r,messages:(d,p)=>{let g=o(n,d);if(g==null&&(h||p)){const[,,v]=Pg(h||t,d,e,l,a,c);g=o(v,d)}if(X(g)||Ln(g)){let v=!1;const w=Ig(t,d,e,g,d,()=>{v=!0});return v?zu:w}else return Wt(g)?g:zu}};return t.processor&&(u.processor=t.processor),i.list&&(u.list=i.list),i.named&&(u.named=i.named),je(i.plural)&&(u.pluralIndex=i.plural),u}ix();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Zx="11.1.12";function eS(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(qi().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(qi().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(qi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(qi().__INTLIFY_PROD_DEVTOOLS__=!1)}const Ot={UNEXPECTED_RETURN_TYPE:yx,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Ft(t,...e){return Zl(t,null,void 0)}const _c=Ri("__translateVNode"),Mc=Ri("__datetimeParts"),Tc=Ri("__numberParts"),Ng=Ri("__setPluralRules"),Bg=Ri("__injectWithOption"),Ec=Ri("__dispose");function Pr(t){if(!ve(t)||Ln(t))return t;for(const e in t)if(tn(t,e))if(!e.includes("."))ve(t[e])&&Pr(t[e]);else{const n=e.split("."),i=n.length-1;let s=t,r=!1;for(let o=0;o<i;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=Se()),!ve(s[n[o]])){r=!0;break}s=s[n[o]]}if(r||(Ln(s)?Ag.includes(n[i])||delete t[e]:(s[n[i]]=t[e],delete t[e])),!Ln(s)){const o=s[n[i]];ve(o)&&Pr(o)}}return t}function tf(t,e){const{messages:n,__i18n:i,messageResolver:s,flatJson:r}=e,o=fe(n)?n:Be(i)?Se():{[t]:Se()};if(Be(i)&&i.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:a,resource:c}=l;a?(o[a]=o[a]||Se(),Go(c,o[a])):Go(c,o)}else X(l)&&Go(JSON.parse(l),o)}),s==null&&r)for(const l in o)tn(o,l)&&Pr(o[l]);return o}function Fg(t){return t.type}function Hg(t,e,n){let i=ve(e.messages)?e.messages:Se();"__i18nGlobal"in n&&(i=tf(t.locale.value,{messages:i,__i18n:n.__i18nGlobal}));const s=Object.keys(i);s.length&&s.forEach(r=>{t.mergeLocaleMessage(r,i[r])});{if(ve(e.datetimeFormats)){const r=Object.keys(e.datetimeFormats);r.length&&r.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(ve(e.numberFormats)){const r=Object.keys(e.numberFormats);r.length&&r.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function qu(t){return Je(Qr,null,t,0)}const Gu="__INTLIFY_META__",Yu=()=>[],tS=()=>!1;let Xu=0;function Ju(t){return((e,n,i,s)=>t(n,i,_i()||void 0,s))}const nS=()=>{const t=_i();let e=null;return t&&(e=Fg(t)[Gu])?{[Gu]:e}:null};function nf(t={}){const{__root:e,__injectWithOption:n}=t,i=e===void 0,s=t.flatJson,r=gl?en:zo;let o=ye(t.inheritLocale)?t.inheritLocale:!0;const l=r(e&&o?e.locale.value:X(t.locale)?t.locale:Rr),a=r(e&&o?e.fallbackLocale.value:X(t.fallbackLocale)||Be(t.fallbackLocale)||fe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:l.value),c=r(tf(l.value,t)),h=r(fe(t.datetimeFormats)?t.datetimeFormats:{[l.value]:{}}),f=r(fe(t.numberFormats)?t.numberFormats:{[l.value]:{}});let u=e?e.missingWarn:ye(t.missingWarn)||Ps(t.missingWarn)?t.missingWarn:!0,d=e?e.fallbackWarn:ye(t.fallbackWarn)||Ps(t.fallbackWarn)?t.fallbackWarn:!0,p=e?e.fallbackRoot:ye(t.fallbackRoot)?t.fallbackRoot:!0,g=!!t.fallbackFormat,v=Le(t.missing)?t.missing:null,m=Le(t.missing)?Ju(t.missing):null,w=Le(t.postTranslation)?t.postTranslation:null,A=e?e.warnHtmlMessage:ye(t.warnHtmlMessage)?t.warnHtmlMessage:!0,x=!!t.escapeParameter;const C=e?e.modifiers:fe(t.modifiers)?t.modifiers:{};let M=t.pluralRules||e&&e.pluralRules,k;k=(()=>{i&&Fu(null);const E={version:Zx,locale:l.value,fallbackLocale:a.value,messages:c.value,modifiers:C,pluralRules:M,missing:m===null?void 0:m,missingWarn:u,fallbackWarn:d,fallbackFormat:g,unresolving:!0,postTranslation:w===null?void 0:w,warnHtmlMessage:A,escapeParameter:x,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};E.datetimeFormats=h.value,E.numberFormats=f.value,E.__datetimeFormatters=fe(k)?k.__datetimeFormatters:void 0,E.__numberFormatters=fe(k)?k.__numberFormatters:void 0;const D=Fx(E);return i&&Fu(D),D})(),Ys(k,l.value,a.value);function R(){return[l.value,a.value,c.value,h.value,f.value]}const W=jn({get:()=>l.value,set:E=>{k.locale=E,l.value=E}}),$=jn({get:()=>a.value,set:E=>{k.fallbackLocale=E,a.value=E,Ys(k,l.value,E)}}),L=jn(()=>c.value),J=jn(()=>h.value),ee=jn(()=>f.value);function re(){return Le(w)?w:null}function se(E){w=E,k.postTranslation=E}function te(){return v}function ae(E){E!==null&&(m=Ju(E)),v=E,k.missing=m}const de=(E,D,Q,ie,he,ze)=>{R();let He;try{__INTLIFY_PROD_DEVTOOLS__,i||(k.fallbackContext=e?Bx():void 0),He=E(k)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(k.fallbackContext=void 0)}if(Q!=="translate exists"&&je(He)&&He===ea||Q==="translate exists"&&!He){const[Ht,Zt]=D();return e&&p?ie(e):he(Ht)}else{if(ze(He))return He;throw Ft(Ot.UNEXPECTED_RETURN_TYPE)}};function Ie(...E){return de(D=>Reflect.apply(Ku,null,[D,...E]),()=>Ac(...E),"translate",D=>Reflect.apply(D.t,D,[...E]),D=>D,D=>X(D))}function Ne(...E){const[D,Q,ie]=E;if(ie&&!ve(ie))throw Ft(Ot.INVALID_ARGUMENT);return Ie(D,Q,Ge({resolvedMessage:!0},ie||{}))}function Ce(...E){return de(D=>Reflect.apply(Vu,null,[D,...E]),()=>Cc(...E),"datetime format",D=>Reflect.apply(D.d,D,[...E]),()=>Nu,D=>X(D)||Be(D))}function Ze(...E){return de(D=>Reflect.apply($u,null,[D,...E]),()=>kc(...E),"number format",D=>Reflect.apply(D.n,D,[...E]),()=>Nu,D=>X(D)||Be(D))}function Lt(E){return E.map(D=>X(D)||je(D)||ye(D)?qu(String(D)):D)}const kt={normalize:Lt,interpolate:E=>E,type:"vnode"};function Qt(...E){return de(D=>{let Q;const ie=D;try{ie.processor=kt,Q=Reflect.apply(Ku,null,[ie,...E])}finally{ie.processor=null}return Q},()=>Ac(...E),"translate",D=>D[_c](...E),D=>[qu(D)],D=>Be(D))}function ri(...E){return de(D=>Reflect.apply($u,null,[D,...E]),()=>kc(...E),"number format",D=>D[Tc](...E),Yu,D=>X(D)||Be(D))}function fs(...E){return de(D=>Reflect.apply(Vu,null,[D,...E]),()=>Cc(...E),"datetime format",D=>D[Mc](...E),Yu,D=>X(D)||Be(D))}function an(E){M=E,k.pluralRules=M}function ao(E,D){return de(()=>{if(!E)return!1;const Q=X(D)?D:l.value,ie=P(Q),he=k.messageResolver(ie,E);return Ln(he)||Wt(he)||X(he)},()=>[E],"translate exists",Q=>Reflect.apply(Q.te,Q,[E,D]),tS,Q=>ye(Q))}function S(E){let D=null;const Q=_g(k,a.value,l.value);for(let ie=0;ie<Q.length;ie++){const he=c.value[Q[ie]]||{},ze=k.messageResolver(he,E);if(ze!=null){D=ze;break}}return D}function _(E){const D=S(E);return D??(e?e.tm(E)||{}:{})}function P(E){return c.value[E]||{}}function V(E,D){if(s){const Q={[E]:D};for(const ie in Q)tn(Q,ie)&&Pr(Q[ie]);D=Q[E]}c.value[E]=D,k.messages=c.value}function F(E,D){c.value[E]=c.value[E]||{};const Q={[E]:D};if(s)for(const ie in Q)tn(Q,ie)&&Pr(Q[ie]);D=Q[E],Go(D,c.value[E]),k.messages=c.value}function H(E){return h.value[E]||{}}function b(E,D){h.value[E]=D,k.datetimeFormats=h.value,Wu(k,E,D)}function y(E,D){h.value[E]=Ge(h.value[E]||{},D),k.datetimeFormats=h.value,Wu(k,E,D)}function T(E){return f.value[E]||{}}function O(E,D){f.value[E]=D,k.numberFormats=f.value,Uu(k,E,D)}function z(E,D){f.value[E]=Ge(f.value[E]||{},D),k.numberFormats=f.value,Uu(k,E,D)}Xu++,e&&gl&&(bt(e.locale,E=>{o&&(l.value=E,k.locale=E,Ys(k,l.value,a.value))}),bt(e.fallbackLocale,E=>{o&&(a.value=E,k.fallbackLocale=E,Ys(k,l.value,a.value))}));const B={id:Xu,locale:W,fallbackLocale:$,get inheritLocale(){return o},set inheritLocale(E){o=E,E&&e&&(l.value=e.locale.value,a.value=e.fallbackLocale.value,Ys(k,l.value,a.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:L,get modifiers(){return C},get pluralRules(){return M||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(E){u=E,k.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(E){d=E,k.fallbackWarn=d},get fallbackRoot(){return p},set fallbackRoot(E){p=E},get fallbackFormat(){return g},set fallbackFormat(E){g=E,k.fallbackFormat=g},get warnHtmlMessage(){return A},set warnHtmlMessage(E){A=E,k.warnHtmlMessage=E},get escapeParameter(){return x},set escapeParameter(E){x=E,k.escapeParameter=E},t:Ie,getLocaleMessage:P,setLocaleMessage:V,mergeLocaleMessage:F,getPostTranslationHandler:re,setPostTranslationHandler:se,getMissingHandler:te,setMissingHandler:ae,[Ng]:an};return B.datetimeFormats=J,B.numberFormats=ee,B.rt=Ne,B.te=ao,B.tm=_,B.d=Ce,B.n=Ze,B.getDateTimeFormat=H,B.setDateTimeFormat=b,B.mergeDateTimeFormat=y,B.getNumberFormat=T,B.setNumberFormat=O,B.mergeNumberFormat=z,B[Bg]=n,B[_c]=Qt,B[Mc]=fs,B[Tc]=ri,B}function iS(t){const e=X(t.locale)?t.locale:Rr,n=X(t.fallbackLocale)||Be(t.fallbackLocale)||fe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,i=Le(t.missing)?t.missing:void 0,s=ye(t.silentTranslationWarn)||Ps(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,r=ye(t.silentFallbackWarn)||Ps(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=ye(t.fallbackRoot)?t.fallbackRoot:!0,l=!!t.formatFallbackMessages,a=fe(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,h=Le(t.postTranslation)?t.postTranslation:void 0,f=X(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,u=!!t.escapeParameterHtml,d=ye(t.sync)?t.sync:!0;let p=t.messages;if(fe(t.sharedMessages)){const C=t.sharedMessages;p=Object.keys(C).reduce((k,I)=>{const R=k[I]||(k[I]={});return Ge(R,C[I]),k},p||{})}const{__i18n:g,__root:v,__injectWithOption:m}=t,w=t.datetimeFormats,A=t.numberFormats,x=t.flatJson;return{locale:e,fallbackLocale:n,messages:p,flatJson:x,datetimeFormats:w,numberFormats:A,missing:i,missingWarn:s,fallbackWarn:r,fallbackRoot:o,fallbackFormat:l,modifiers:a,pluralRules:c,postTranslation:h,warnHtmlMessage:f,escapeParameter:u,messageResolver:t.messageResolver,inheritLocale:d,__i18n:g,__root:v,__injectWithOption:m}}function Oc(t={}){const e=nf(iS(t)),{__extender:n}=t,i={id:e.id,get locale(){return e.locale.value},set locale(s){e.locale.value=s},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(s){e.fallbackLocale.value=s},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(s){e.setMissingHandler(s)},get silentTranslationWarn(){return ye(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(s){e.missingWarn=ye(s)?!s:s},get silentFallbackWarn(){return ye(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(s){e.fallbackWarn=ye(s)?!s:s},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(s){e.fallbackFormat=s},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(s){e.setPostTranslationHandler(s)},get sync(){return e.inheritLocale},set sync(s){e.inheritLocale=s},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){e.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(s){e.escapeParameter=s},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...s){return Reflect.apply(e.t,e,[...s])},rt(...s){return Reflect.apply(e.rt,e,[...s])},te(s,r){return e.te(s,r)},tm(s){return e.tm(s)},getLocaleMessage(s){return e.getLocaleMessage(s)},setLocaleMessage(s,r){e.setLocaleMessage(s,r)},mergeLocaleMessage(s,r){e.mergeLocaleMessage(s,r)},d(...s){return Reflect.apply(e.d,e,[...s])},getDateTimeFormat(s){return e.getDateTimeFormat(s)},setDateTimeFormat(s,r){e.setDateTimeFormat(s,r)},mergeDateTimeFormat(s,r){e.mergeDateTimeFormat(s,r)},n(...s){return Reflect.apply(e.n,e,[...s])},getNumberFormat(s){return e.getNumberFormat(s)},setNumberFormat(s,r){e.setNumberFormat(s,r)},mergeNumberFormat(s,r){e.mergeNumberFormat(s,r)}};return i.__extender=n,i}function sS(t,e,n){return{beforeCreate(){const i=_i();if(!i)throw Ft(Ot.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const r=s.i18n;if(s.__i18n&&(r.__i18n=s.__i18n),r.__root=e,this===this.$root)this.$i18n=Qu(t,r);else{r.__injectWithOption=!0,r.__extender=n.__vueI18nExtend,this.$i18n=Oc(r);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Qu(t,s);else{this.$i18n=Oc({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&Hg(e,s,s),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$te=(r,o)=>this.$i18n.te(r,o),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),n.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=_i();if(!i)throw Ft(Ot.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(i),delete this.$i18n}}}function Qu(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[Ng](e.pluralizationRules||t.pluralizationRules);const n=tf(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(i=>t.mergeLocaleMessage(i,n[i])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(i=>t.mergeDateTimeFormat(i,e.datetimeFormats[i])),e.numberFormats&&Object.keys(e.numberFormats).forEach(i=>t.mergeNumberFormat(i,e.numberFormats[i])),t}const sf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function rS({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((i,s)=>[...i,...s.type===it?s.children:[s]],[]):e.reduce((n,i)=>{const s=t[i];return s&&(n[i]=s()),n},Se())}function Vg(){return it}const oS=ti({name:"i18n-t",props:Ge({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>je(t)||!isNaN(t)}},sf),setup(t,e){const{slots:n,attrs:i}=e,s=t.i18n||ta({useScope:t.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter(f=>f[0]!=="_"),o=Se();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=X(t.plural)?+t.plural:t.plural);const l=rS(e,r),a=s[_c](t.keypath,l,o),c=Ge(Se(),i),h=X(t.tag)||ve(t.tag)?t.tag:Vg();return Gh(h,c,a)}}}),Zu=oS;function lS(t){return Be(t)&&!X(t[0])}function Wg(t,e,n,i){const{slots:s,attrs:r}=e;return()=>{const o={part:!0};let l=Se();t.locale&&(o.locale=t.locale),X(t.format)?o.key=t.format:ve(t.format)&&(X(t.format.key)&&(o.key=t.format.key),l=Object.keys(t.format).reduce((u,d)=>n.includes(d)?Ge(Se(),u,{[d]:t.format[d]}):u,Se()));const a=i(t.value,o,l);let c=[o.key];Be(a)?c=a.map((u,d)=>{const p=s[u.type],g=p?p({[u.type]:u.value,index:d,parts:a}):[u.value];return lS(g)&&(g[0].key=`${u.type}-${d}`),g}):X(a)&&(c=[a]);const h=Ge(Se(),r),f=X(t.tag)||ve(t.tag)?t.tag:Vg();return Gh(f,h,c)}}const aS=ti({name:"i18n-n",props:Ge({value:{type:Number,required:!0},format:{type:[String,Object]}},sf),setup(t,e){const n=t.i18n||ta({useScope:t.scope,__useComponent:!0});return Wg(t,e,Rg,(...i)=>n[Tc](...i))}}),ed=aS;function cS(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const i=n.__getInstance(e);return i!=null?i.__composer:t.global.__composer}}function hS(t){const e=o=>{const{instance:l,value:a}=o;if(!l||!l.$)throw Ft(Ot.UNEXPECTED_ERROR);const c=cS(t,l.$),h=td(a);return[Reflect.apply(c.t,c,[...nd(h)]),c]};return{created:(o,l)=>{const[a,c]=e(l);gl&&t.global===c&&(o.__i18nWatcher=bt(c.locale,()=>{l.instance&&l.instance.$forceUpdate()})),o.__composer=c,o.textContent=a},unmounted:o=>{gl&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:l})=>{if(o.__composer){const a=o.__composer,c=td(l);o.textContent=Reflect.apply(a.t,a,[...nd(c)])}},getSSRProps:o=>{const[l]=e(o);return{textContent:l}}}}function td(t){if(X(t))return{path:t};if(fe(t)){if(!("path"in t))throw Ft(Ot.REQUIRED_VALUE,"path");return t}else throw Ft(Ot.INVALID_VALUE)}function nd(t){const{path:e,locale:n,args:i,choice:s,plural:r}=t,o={},l=i||{};return X(n)&&(o.locale=n),je(s)&&(o.plural=s),je(r)&&(o.plural=r),[e,l,o]}function fS(t,e,...n){const i=fe(n[0])?n[0]:{};(ye(i.globalInstall)?i.globalInstall:!0)&&([Zu.name,"I18nT"].forEach(r=>t.component(r,Zu)),[ed.name,"I18nN"].forEach(r=>t.component(r,ed)),[sd.name,"I18nD"].forEach(r=>t.component(r,sd))),t.directive("t",hS(e))}const uS=Ri("global-vue-i18n");function dS(t={}){const e=__VUE_I18N_LEGACY_API__&&ye(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,n=ye(t.globalInjection)?t.globalInjection:!0,i=new Map,[s,r]=pS(t,e),o=Ri("");function l(f){return i.get(f)||null}function a(f,u){i.set(f,u)}function c(f){i.delete(f)}const h={get mode(){return __VUE_I18N_LEGACY_API__&&e?"legacy":"composition"},async install(f,...u){if(f.__VUE_I18N_SYMBOL__=o,f.provide(f.__VUE_I18N_SYMBOL__,h),fe(u[0])){const g=u[0];h.__composerExtend=g.__composerExtend,h.__vueI18nExtend=g.__vueI18nExtend}let d=null;!e&&n&&(d=SS(f,h.global)),__VUE_I18N_FULL_INSTALL__&&fS(f,h,...u),__VUE_I18N_LEGACY_API__&&e&&f.mixin(sS(r,r.__composer,h));const p=f.unmount;f.unmount=()=>{d&&d(),h.dispose(),p()}},get global(){return r},dispose(){s.stop()},__instances:i,__getInstance:l,__setInstance:a,__deleteInstance:c};return h}function ta(t={}){const e=_i();if(e==null)throw Ft(Ot.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ft(Ot.NOT_INSTALLED);const n=mS(e),i=bS(n),s=Fg(e),r=gS(t,s);if(r==="global")return Hg(i,t,s),i;if(r==="parent"){let a=yS(n,e,t.__useComponent);return a==null&&(a=i),a}const o=n;let l=o.__getInstance(e);if(l==null){const a=Ge({},t);"__i18n"in s&&(a.__i18n=s.__i18n),i&&(a.__root=i),l=nf(a),o.__composerExtend&&(l[Ec]=o.__composerExtend(l)),wS(o,e,l),o.__setInstance(e,l)}return l}function pS(t,e){const n=Rh(),i=__VUE_I18N_LEGACY_API__&&e?n.run(()=>Oc(t)):n.run(()=>nf(t));if(i==null)throw Ft(Ot.UNEXPECTED_ERROR);return[n,i]}function mS(t){const e=Qi(t.isCE?uS:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ft(t.isCE?Ot.NOT_INSTALLED_WITH_PROVIDE:Ot.UNEXPECTED_ERROR);return e}function gS(t,e){return Ql(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function bS(t){return t.mode==="composition"?t.global:t.global.__composer}function yS(t,e,n=!1){let i=null;const s=e.root;let r=vS(e,n);for(;r!=null;){const o=t;if(t.mode==="composition")i=o.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const l=o.__getInstance(r);l!=null&&(i=l.__composer,n&&i&&!i[Bg]&&(i=null))}if(i!=null||s===r)break;r=r.parent}return i}function vS(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function wS(t,e,n){Gl(()=>{},e),jh(()=>{const i=n;t.__deleteInstance(e);const s=i[Ec];s&&(s(),delete i[Ec])},e)}const xS=["locale","fallbackLocale","availableLocales"],id=["t","rt","d","n","tm","te"];function SS(t,e){const n=Object.create(null);return xS.forEach(s=>{const r=Object.getOwnPropertyDescriptor(e,s);if(!r)throw Ft(Ot.UNEXPECTED_ERROR);const o=Fe(r.value)?{get(){return r.value.value},set(l){r.value.value=l}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,id.forEach(s=>{const r=Object.getOwnPropertyDescriptor(e,s);if(!r||!r.value)throw Ft(Ot.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,r)}),()=>{delete t.config.globalProperties.$i18n,id.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const CS=ti({name:"i18n-d",props:Ge({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},sf),setup(t,e){const n=t.i18n||ta({useScope:t.scope,__useComponent:!0});return Wg(t,e,Dg,(...i)=>n[Mc](...i))}}),sd=CS;eS();Dx(dx);Rx(Ex);Px(_g);if(__INTLIFY_PROD_DEVTOOLS__){const t=qi();t.__INTLIFY__=!0,px(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const kS={pl:{header:"Symulator maszyny Turinga",addTape:"Dodaj tam",removeTape:"Usu tam",invalidRuleMissing:"Niepoprawna regua (brak '->') w linii ",invalidRuleTooMany:"Niepoprawna regua (wicej ni 1 '->') w linii ",invalidRuleInputLength:"Niepoprawna liczba tam lub symboli wejciowych w linii ",InvalidRuleInputBlank:"Niepoprawna liczba symboli wejciowych (symbol pusty powinien by zapisany jako '_' w linii ",invalidRuleOutputLength:"Niepoprawna liczba tam lub symboli wyjciowych w linii ",invalidRuleOutputBlank:"Niepoprawna liczba symboli wyjciowych (symbol pusty powinien by zapisany jako '_' w linii ",invalidRuleOutputMovesLength:"Niepoprawna liczba ruchw w linii ",invalidRuleMove:"Niepoprawny ruch (dozwolone ruchy: L, R, S) w linii "},en:{header:"Turing machine simulator",addTape:"Add tape",removeTape:"Remove tape",invalidRuleMissing:"Invalid rule (missing '->') in line ",invalidRuleTooMany:"Invalid rule (more than 1 '->') in line ",invalidRuleInputLength:"Invalid number of tapes or input symbols in line ",InvalidRuleInputBlank:"Invalid number of input symbols (blank symbol should be written as '_') in line ",invalidRuleOutputLength:"Invalid number of tapes or output symbols in line ",invalidRuleOutputBlank:"Invalid number of output symbols (blank symbol should be written as '_') in line ",invalidRuleOutputMovesLength:"Invalid number of moves in line ",invalidRuleMove:"Invalid move (allowed moves: L, R, S) in line "}},AS=localStorage.getItem("locale")||"pl",_S=dS({legacy:!1,locale:AS,fallbackLocale:"en",messages:kS}),MS={class:"flags"},TS=ti({__name:"LanguagueChoice",setup(t){const{locale:e}=ta();function n(i){e.value=i,localStorage.setItem("locale",i)}return(i,s)=>(Cn(),Un("div",MS,[tt("span",{class:"fi fi-pl flag",onClick:s[0]||(s[0]=r=>n("pl"))}),tt("span",{class:"fi fi-gb flag",onClick:s[1]||(s[1]=r=>n("en"))})]))}});let ES=0;class yr{id;value;left;right;constructor(e="",n=null,i=null){this.id=ES++,this.value=e,this.left=n,this.right=i}}class sr{head;constructor(){this.head=new yr("")}moveRight(){this.head.right||(this.head.right=new yr("",this.head)),this.head=this.head.right}moveLeft(){this.head.left||(this.head.left=new yr("",null,this.head)),this.head.left.right=this.head,this.head=this.head.left}writeSymbol(e){this.head.value=e}}class OS{tapes;constructor(e=1){this.tapes=Array.from({length:e},()=>new sr)}}function rd(t){return t==="_"?"":t}function LS(t,e){const n=[],i=t.split(`
`);let s=0;for(const r of i){s++;const o=r.trim();if(!o||o.startsWith("//"))continue;const l=o.split("->");if(l.length<2)return{success:!1,errorCode:"invalidRuleMissing",lineNumber:s};if(l.length>2)return{success:!1,errorCode:"invalidRuleTooMany",lineNumber:s};const a=l[0].trim().split(","),c=a[0],h=a.slice(1);if(h.length!==e)return{success:!1,errorCode:"invalidRuleInputLength",lineNumber:s};if(h.some(m=>m===""))return{success:!1,errorCode:"InvalidRuleInputBlank",lineNumber:s};const f=h.map(rd),u=l[1].trim().split(","),d=u[0],p=u.slice(1,1+e),g=u.slice(1+e);if(p.length!==e)return{success:!1,errorCode:"invalidRuleOutputLength",lineNumber:s};if(p.some(m=>m===""))return{success:!1,errorCode:"invalidRuleOutputBlank",lineNumber:s};if(g.length!==e)return{success:!1,errorCode:"invalidRuleOutputMovesLength",lineNumber:s};const v=p.map(rd);for(const m of g)if(!["L","R","S"].includes(m))return{success:!1,errorCode:"invalidRuleMove",lineNumber:s};n.push({currentState:c,readSymbols:f,nextState:d,writeSymbols:v,moves:g})}return{success:!0,rules:n}}const rf=Cw("machineStore",()=>{const t=`//example input: 11111
//2 tapes
q0,1,_ -> q0,1,1,R,R
q0,_,_ -> q1,_,_,L,L
q1,1,1 -> q1,1,_,L,L
q1,_,_ -> q0,_,_,R,R`,e=en(1),n=Xr(new OS(1)),i=en(t),s=en([]),r=en(""),o=en("q0"),l=en(!1);let a=null;const c=en(null),h=en(null);function f(M,k){c.value=M,h.value=k}function u(){c.value=null,h.value=null}function d(M){e.value=M,n.tapes=Array.from({length:M},()=>new sr)}function p(){n.tapes.push(new sr),e.value=n.tapes.length}function g(){n.tapes.length<=1||(n.tapes.pop(),e.value=n.tapes.length)}function v(){n.tapes=Array.from({length:e.value},()=>new sr),o.value="q0",u(),C()}function m(){const M=LS(i.value,e.value);if(!M.success){const k=M.errorCode||"Error",I=M.lineNumber||0;f(k,I);return}M.rules&&(s.value=M.rules,v())}function w(){if(n.tapes.length===0)return;v();let k=n.tapes[0].head;for(const I of r.value)k.value=I,k.right||(k.right=new sr().head,k.right.left=k),k=k.right}function A(){const M=n.tapes.map(I=>I.head.value||""),k=s.value.find(I=>I.currentState===o.value&&I.readSymbols.every((R,W)=>R===M[W]));if(!k){console.log("Brak pasujcej reguy  zatrzymanie."),C();return}k.writeSymbols.forEach((I,R)=>{n.tapes[R].writeSymbol(I)}),k.moves.forEach((I,R)=>{I==="L"&&n.tapes[R].moveLeft(),I==="R"&&n.tapes[R].moveRight()}),o.value=k.nextState}function x(M=500){l.value||(l.value=!0,a=setInterval(A,M))}function C(){l.value=!1,a&&(clearInterval(a),a=null)}return{numberOfTapes:e,setNumberOfTapes:d,addTape:p,removeTape:g,loadProgram:m,machine:n,programCode:i,rules:s,initialInput:r,loadInput:w,currentState:o,isRunning:l,step:A,run:x,stop:C,errorCode:c,errorLine:h}}),DS={class:"tape-container"},RS={class:"tape-track-wrapper"},od=21,PS=ti({__name:"Tape",setup(t){const e=rf();function n(s){const r=[];let o=s.head;for(let l=0;l<Math.floor(od/2);l++)o.left||(o.left=new yr("",null,o)),o=o.left;for(let l=0;l<od&&o;l++)r.push(o),o.right||(o.right=new yr("",o,null)),o=o.right;return r}const i=jn(()=>e.machine.tapes.map(s=>n(s)));return(s,r)=>(Cn(),Un(it,null,[tt("button",{onClick:r[0]||(r[0]=(...o)=>Re(e).addTape&&Re(e).addTape(...o))},xi(s.$t("addTape")),1),tt("button",{onClick:r[1]||(r[1]=(...o)=>Re(e).removeTape&&Re(e).removeTape(...o))},xi(s.$t("removeTape")),1),tt("div",DS,[(Cn(!0),Un(it,null,qf(i.value,(o,l)=>(Cn(),Un("div",{key:l,class:"tape"},[tt("div",RS,[Je(rw,{name:"slide",tag:"div",class:"tape-track"},{default:Pm(()=>[(Cn(!0),Un(it,null,qf(o,a=>(Cn(),Un("div",{key:a.id,class:jl(["cell",{active:a===Re(e).machine.tapes[l].head}])},xi(a.value),3))),128))]),_:2},1024)])]))),128))])],64))}}),IS={key:0,class:"error-box"},NS=ti({__name:"ErrorBox",setup(t){const e=rf();return(n,i)=>Re(e).errorCode?(Cn(),Un("div",IS,xi(n.$t(Re(e).errorCode))+" "+xi(Re(e).errorLine),1)):kv("",!0)}});let Lc=[],$g=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?$g:Lc).push(n=n+t[e])})();function BS(t){if(t<768)return!1;for(let e=0,n=Lc.length;;){let i=e+n>>1;if(t<Lc[i])n=i;else if(t>=$g[i])e=i+1;else return!0;if(e==n)return!1}}function ld(t){return t>=127462&&t<=127487}const ad=8205;function FS(t,e,n=!0,i=!0){return(n?Ug:HS)(t,e,i)}function Ug(t,e,n){if(e==t.length)return e;e&&jg(t.charCodeAt(e))&&zg(t.charCodeAt(e-1))&&e--;let i=Da(t,e);for(e+=cd(i);e<t.length;){let s=Da(t,e);if(i==ad||s==ad||n&&BS(s))e+=cd(s),i=s;else if(ld(s)){let r=0,o=e-2;for(;o>=0&&ld(Da(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function HS(t,e,n){for(;e>0;){let i=Ug(t,e-2,n);if(i<e)return i;e--}return 0}function Da(t,e){let n=t.charCodeAt(e);if(!zg(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return jg(i)?(n-55296<<10)+(i-56320)+65536:n}function jg(t){return t>=56320&&t<57344}function zg(t){return t>=55296&&t<56320}function cd(t){return t<65536?1:2}class be{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Ns(this,e,n);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(n,this.length,s,1),kn.from(s,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Ns(this,e,n);let i=[];return this.decompose(e,n,i,0),kn.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new vr(this),r=new vr(e);for(let o=n,l=n;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new vr(this,e)}iterRange(e,n=this.length){return new Kg(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new qg(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?be.empty:e.length<=32?new Ve(e):kn.from(Ve.split(e,[]))}}class Ve extends be{constructor(e,n=VS(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,s){for(let r=0;;r++){let o=this.text[r],l=s+o.length;if((n?i:l)>=e)return new WS(s,l,i,o);s=l+1,i++}}decompose(e,n,i,s){let r=e<=0&&n>=this.length?this:new Ve(hd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let o=i.pop(),l=Yo(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Ve(l,o.length+r.length));else{let a=l.length>>1;i.push(new Ve(l.slice(0,a)),new Ve(l.slice(a)))}}else i.push(r)}replace(e,n,i){if(!(i instanceof Ve))return super.replace(e,n,i);[e,n]=Ns(this,e,n);let s=Yo(this.text,Yo(i.text,hd(this.text,0,e)),n),r=this.length+i.length-(n-e);return s.length<=32?new Ve(s,r):kn.from(Ve.split(s,[]),r)}sliceString(e,n=this.length,i=`
`){[e,n]=Ns(this,e,n);let s="";for(let r=0,o=0;r<=n&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(s+=i),e<a&&n>r&&(s+=l.slice(Math.max(0,e-r),n-r)),r=a+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(n.push(new Ve(i,s)),i=[],s=-1);return s>-1&&n.push(new Ve(i,s)),n}}class kn extends be{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,s){for(let r=0;;r++){let o=this.children[r],l=s+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,s);s=l+1,i=a+1}}decompose(e,n,i,s){for(let r=0,o=0;o<=n&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&n>=o){let c=s&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!c?i.push(l):l.decompose(e-o,n-o,i,c)}o=a+1}}replace(e,n,i){if([e,n]=Ns(this,e,n),i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],l=r+o.length;if(e>=r&&n<=l){let a=o.replace(e-r,n-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let h=this.children.slice();return h[s]=a,new kn(h,this.length-(n-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Ns(this,e,n);let s="";for(let r=0,o=0;r<this.children.length&&o<=n;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(s+=i),e<a&&n>o&&(s+=l.sliceString(e-o,n-o,i)),o=a+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof kn))return 0;let i=0,[s,r,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,r+=n){if(s==o||r==l)return i;let a=this.children[s],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,n);i+=a.length+1}}static from(e,n=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new Ve(d,n)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,l=[],a=0,c=-1,h=[];function f(d){let p;if(d.lines>r&&d instanceof kn)for(let g of d.children)f(g);else d.lines>o&&(a>o||!a)?(u(),l.push(d)):d instanceof Ve&&a&&(p=h[h.length-1])instanceof Ve&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,h[h.length-1]=new Ve(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>s&&u(),a+=d.lines,c+=d.length+1,h.push(d))}function u(){a!=0&&(l.push(h.length==1?h[0]:kn.from(h,c)),c=-1,a=h.length=0)}for(let d of e)f(d);return u(),l.length==1?l[0]:new kn(l,n)}}be.empty=new Ve([""],0);function VS(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Yo(t,e,n=0,i=1e9){for(let s=0,r=0,o=!0;r<t.length&&s<=i;r++){let l=t[r],a=s+l.length;a>=n&&(a>i&&(l=l.slice(0,i-s)),s<n&&(l=l.slice(n-s)),o?(e[e.length-1]+=l,o=!1):e.push(l)),s=a+1}return e}function hd(t,e,n){return Yo(t,[""],e,n)}class vr{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ve?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,l=s instanceof Ve?s.text.length:s.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Ve){let a=s.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=s.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof Ve?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Kg{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new vr(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=i?s:n<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class qg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(be.prototype[Symbol.iterator]=function(){return this.iter()},vr.prototype[Symbol.iterator]=Kg.prototype[Symbol.iterator]=qg.prototype[Symbol.iterator]=function(){return this});class WS{constructor(e,n,i,s){this.from=e,this.to=n,this.number=i,this.text=s}get length(){return this.to-this.from}}function Ns(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ot(t,e,n=!0,i=!0){return FS(t,e,n,i)}function $S(t){return t>=56320&&t<57344}function US(t){return t>=55296&&t<56320}function At(t,e){let n=t.charCodeAt(e);if(!US(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return $S(i)?(n-55296<<10)+(i-56320)+65536:n}function of(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function An(t){return t<65536?1:2}const Dc=/\r\n?|\n/;var xt=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(xt||(xt={}));class Dn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,s=0;n<this.sections.length;){let r=this.sections[n++],o=this.sections[n++];o<0?(e(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(e,n=!1){Rc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];s<0?e.push(i,s):e.push(s,i)}return new Dn(e)}composeDesc(e){return this.empty?e:e.empty?this:Gg(this,e)}mapDesc(e,n=!1){return e.empty?this:Pc(this,e,n)}mapPos(e,n=-1,i=xt.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=s+l;if(a<0){if(c>e)return r+(e-s);r+=l}else{if(i!=xt.Simple&&c>=e&&(i==xt.TrackDel&&s<e&&c>e||i==xt.TrackBefore&&s<e||i==xt.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!l)return e==s||n<0?r:r+a;r+=a}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,n=e){for(let i=0,s=0;i<this.sections.length&&s<=n;){let r=this.sections[i++],o=this.sections[i++],l=s+r;if(o>=0&&s<=n&&l>=e)return s<e&&l>n?"cover":!0;s=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Dn(e)}static create(e){return new Dn(e)}}class Ke extends Dn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Rc(this,(n,i,s,r,o)=>e=e.replace(s,s+(i-n),o),!1),e}mapDesc(e,n=!1){return Pc(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let s=0,r=0;s<n.length;s+=2){let o=n[s],l=n[s+1];if(l>=0){n[s]=l,n[s+1]=o;let a=s>>1;for(;i.length<a;)i.push(be.empty);i.push(o?e.slice(r,r+o):be.empty)}r+=o}return new Ke(n,i)}compose(e){return this.empty?e:e.empty?this:Gg(this,e,!0)}map(e,n=!1){return e.empty?this:Pc(this,e,n,!0)}iterChanges(e,n=!1){Rc(this,e,n)}get desc(){return Dn.create(this.sections)}filter(e){let n=[],i=[],s=[],r=new Ir(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let h=Math.min(r.len,a-l);ht(s,h,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;ht(n,h,f),f>0&&gi(i,n,r.text),r.forward(h),l+=h}let c=e[o++];for(;l<c;){if(r.done)break e;let h=Math.min(r.len,c-l);ht(n,h,-1),ht(s,h,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(h),l+=h}}return{changes:new Ke(n,i),filtered:Dn.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],s=this.sections[n+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let s=[],r=[],o=0,l=null;function a(h=!1){if(!h&&!s.length)return;o<n&&ht(s,n-o,-1);let f=new Ke(s,r);l=l?l.compose(f.map(l)):f,s=[],r=[],o=0}function c(h){if(Array.isArray(h))for(let f of h)c(f);else if(h instanceof Ke){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:f,to:u=f,insert:d}=h;if(f>u||f<0||u>n)throw new RangeError(`Invalid change range ${f} to ${u} (in doc of length ${n})`);let p=d?typeof d=="string"?be.of(d.split(i||Dc)):d:be.empty,g=p.length;if(f==u&&g==0)return;f<o&&a(),f>o&&ht(s,f-o,-1),ht(s,u-f,g),gi(r,s,p),o=u}}return c(e),a(!l),l}static empty(e){return new Ke(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")n.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)n.push(r[0],0);else{for(;i.length<s;)i.push(be.empty);i[s]=be.of(r.slice(1)),n.push(r[0],i[s].length)}}}return new Ke(n,i)}static createSet(e,n){return new Ke(e,n)}}function ht(t,e,n,i=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:i?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function gi(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(be.empty);t.push(n)}}function Rc(t,e,n){let i=t.inserted;for(let s=0,r=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)s+=l,r+=l;else{let c=s,h=r,f=be.empty;for(;c+=l,h+=a,a&&i&&(f=f.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(s,c,r,h,f),s=c,r=h}}}function Pc(t,e,n,i=!1){let s=[],r=i?[]:null,o=new Ir(t),l=new Ir(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);ht(s,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let c=l.len;for(ht(s,l.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=h&&(ht(s,0,o.ins),r&&gi(r,s,o.text),a=o.i),o.forward(h),c-=h}l.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(l.ins==-1){let f=Math.min(h,l.len);c+=f,h-=f,l.forward(f)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;ht(s,c,a<o.i?o.ins:0),r&&a<o.i&&gi(r,s,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return r?Ke.createSet(s,r):Dn.create(s);throw new Error("Mismatched change set lengths")}}}function Gg(t,e,n=!1){let i=[],s=n?[]:null,r=new Ir(t),o=new Ir(e);for(let l=!1;;){if(r.done&&o.done)return s?Ke.createSet(i,s):Dn.create(i);if(r.ins==0)ht(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)ht(i,0,o.ins,l),s&&gi(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;ht(i,a,h,l),s&&h&&gi(s,i,o.text)}else o.ins==-1?(ht(i,r.off?0:r.len,a,l),s&&gi(s,i,r.textBit(a))):(ht(i,r.off?0:r.len,o.off?0:o.ins,l),s&&!o.off&&gi(s,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Ir{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?be.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?be.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Gi{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Gi(i,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return N.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return N.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return N.range(e.anchor,e.head)}static create(e,n,i){return new Gi(e,n,i)}}class N{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:N.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new N([this.main],0)}addRange(e,n=!0){return N.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,N.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new N(e.ranges.map(n=>Gi.fromJSON(n)),e.main)}static single(e,n=e){return new N([N.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return N.normalized(e.slice(),n);i=r.to}return new N(e,n)}static cursor(e,n=0,i,s){return Gi.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,n,i,s){let r=(i??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?Gi.create(n,e,48|r):Gi.create(e,n,(n>e?8:0)|r)}static normalized(e,n=0){let i=e[n];e.sort((s,r)=>s.from-r.from),n=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],o=e[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);s<=n&&n--,e.splice(--s,2,r.anchor>r.head?N.range(a,l):N.range(l,a))}}return new N(e,n)}}function Yg(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let lf=0;class Y{constructor(e,n,i,s,r){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=s,this.id=lf++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Y(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:af),!!e.static,e.enables)}of(e){return new Xo([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xo(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xo(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function af(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Xo{constructor(e,n,i,s){this.dependencies=e,this.facet=n,this.type=i,this.value=s,this.id=lf++}dynamicSlot(e){var n;let i=this.value,s=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,h=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:(((n=e[f.id])!==null&&n!==void 0?n:1)&1)==0&&h.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,u){if(a&&u.docChanged||c&&(u.docChanged||u.selection)||Ic(f,h)){let d=i(f);if(l?!fd(d,f.values[o],s):!s(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,u)=>{let d,p=u.config.address[r];if(p!=null){let g=yl(u,p);if(this.dependencies.every(v=>v instanceof Y?u.facet(v)===f.facet(v):v instanceof lt?u.field(v,!1)==f.field(v,!1):!0)||(l?fd(d=i(f),g,s):s(d=i(f),g)))return f.values[o]=g,0}else d=i(f);return f.values[o]=d,1}}}}function fd(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Ic(t,e){let n=!1;for(let i of e)wr(t,i)&1&&(n=!0);return n}function jS(t,e,n){let i=n.map(a=>t[a.id]),s=n.map(a=>a.type),r=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let c=[];for(let h=0;h<i.length;h++){let f=yl(a,i[h]);if(s[h]==2)for(let u of f)c.push(u);else c.push(f)}return e.combine(c)}return{create(a){for(let c of i)wr(a,c);return a.values[o]=l(a),1},update(a,c){if(!Ic(a,r))return 0;let h=l(a);return e.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,c){let h=Ic(a,i),f=c.config.facets[e.id],u=c.facet(e);if(f&&!h&&af(n,f))return a.values[o]=u,0;let d=l(a);return e.compare(d,u)?(a.values[o]=u,0):(a.values[o]=d,1)}}}const bo=Y.define({static:!0});class lt{constructor(e,n,i,s,r){this.id=e,this.createF=n,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let n=new lt(lf++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(bo).find(i=>i.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,s)=>{let r=i.values[n],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[n]=o,1)},reconfigure:(i,s)=>{let r=i.facet(bo),o=s.facet(bo),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[n]=l.create(i),1):s.config.address[this.id]!=null?(i.values[n]=s.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,bo.of({field:this,create:e})]}get extension(){return this}}const ji={lowest:4,low:3,default:2,high:1,highest:0};function Xs(t){return e=>new Xg(e,t)}const cs={highest:Xs(ji.highest),high:Xs(ji.high),default:Xs(ji.default),low:Xs(ji.low),lowest:Xs(ji.lowest)};class Xg{constructor(e,n){this.inner=e,this.prec=n}}class eo{of(e){return new Nc(this,e)}reconfigure(e){return eo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Nc{constructor(e,n){this.compartment=e,this.inner=n}}class bl{constructor(e,n,i,s,r,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let s=[],r=Object.create(null),o=new Map;for(let u of zS(e,n,o))u instanceof lt?s.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let l=Object.create(null),a=[],c=[];for(let u of s)l[u.id]=c.length<<1,c.push(d=>u.slot(d));let h=i?.config.facets;for(let u in r){let d=r[u],p=d[0].facet,g=h&&h[u]||[];if(d.every(v=>v.type==0))if(l[p.id]=a.length<<1|1,af(g,d))a.push(i.facet(p));else{let v=p.combine(d.map(m=>m.value));a.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of d)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=c.length<<1,c.push(m=>v.dynamicSlot(m)));l[p.id]=c.length<<1,c.push(v=>jS(v,p,d))}}let f=c.map(u=>u(l));return new bl(e,o,f,l,a,r)}}function zS(t,e,n){let i=[[],[],[],[],[]],s=new Map;function r(o,l){let a=s.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof Nc&&n.delete(o.compartment)}if(s.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof Nc){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),r(c,l)}else if(o instanceof Xg)r(o.inner,o.prec);else if(o instanceof lt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Xo)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,ji.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(t,ji.default),i.reduce((o,l)=>o.concat(l))}function wr(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function yl(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Jg=Y.define(),Bc=Y.define({combine:t=>t.some(e=>e),static:!0}),Qg=Y.define({combine:t=>t.length?t[0]:void 0,static:!0}),Zg=Y.define(),e0=Y.define(),t0=Y.define(),n0=Y.define({combine:t=>t.length?t[0]:!1});class ii{constructor(e,n){this.type=e,this.value=n}static define(){return new KS}}class KS{of(e){return new ii(this,e)}}class qS{constructor(e){this.map=e}of(e){return new le(this,e)}}class le{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new le(this.type,n)}is(e){return this.type==e}static define(e={}){return new qS(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(n);r&&i.push(r)}return i}}le.reconfigure=le.define();le.appendConfig=le.define();class qe{constructor(e,n,i,s,r,o){this.startState=e,this.changes=n,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Yg(i,n.newLength),r.some(l=>l.type==qe.time)||(this.annotations=r.concat(qe.time.of(Date.now())))}static create(e,n,i,s,r,o){return new qe(e,n,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(qe.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}qe.time=ii.define();qe.userEvent=ii.define();qe.addToHistory=ii.define();qe.remote=ii.define();function GS(t,e){let n=[];for(let i=0,s=0;;){let r,o;if(i<t.length&&(s==e.length||e[s]>=t[i]))r=t[i++],o=t[i++];else if(s<e.length)r=e[s++],o=e[s++];else return n;!n.length||n[n.length-1]<r?n.push(r,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function i0(t,e,n){var i;let s,r,o;return n?(s=e.changes,r=Ke.empty(e.changes.length),o=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(s),effects:le.mapEffects(t.effects,s).concat(le.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Fc(t,e,n){let i=e.selection,s=Ts(e.annotations);return e.userEvent&&(s=s.concat(qe.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ke?e.changes:Ke.of(e.changes||[],n,t.facet(Qg)),selection:i&&(i instanceof N?i:N.single(i.anchor,i.head)),effects:Ts(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function s0(t,e,n){let i=Fc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(n=!1);let o=!!e[r].sequential;i=i0(i,Fc(t,e[r],o?i.changes.newLength:t.doc.length),o)}let s=qe.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return XS(n?YS(s):s)}function YS(t){let e=t.startState,n=!0;for(let s of e.facet(Zg)){let r=s(t);if(r===!1){n=!1;break}Array.isArray(r)&&(n=n===!0?r:GS(n,r))}if(n!==!0){let s,r;if(n===!1)r=t.changes.invertedDesc,s=Ke.empty(e.doc.length);else{let o=t.changes.filter(n);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=qe.create(e,s,t.selection&&t.selection.map(r),le.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(e0);for(let s=i.length-1;s>=0;s--){let r=i[s](t);r instanceof qe?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof qe?t=r[0]:t=s0(e,Ts(r),!1)}return t}function XS(t){let e=t.startState,n=e.facet(t0),i=t;for(let s=n.length-1;s>=0;s--){let r=n[s](t);r&&Object.keys(r).length&&(i=i0(i,Fc(e,r,t.changes.newLength),!0))}return i==t?t:qe.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const JS=[];function Ts(t){return t==null?JS:Array.isArray(t)?t:[t]}var Pe=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(Pe||(Pe={}));const QS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Hc;try{Hc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ZS(t){if(Hc)return Hc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||QS.test(n)))return!0}return!1}function eC(t){return e=>{if(!/\S/.test(e))return Pe.Space;if(ZS(e))return Pe.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Pe.Word;return Pe.Other}}class ue{constructor(e,n,i,s,r,o){this.config=e,this.doc=n,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)wr(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return wr(this,i),yl(this,i)}update(...e){return s0(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:s}=n;for(let l of e.effects)l.is(eo.reconfigure)?(n&&(s=new Map,n.compartments.forEach((a,c)=>s.set(c,a)),n=null),s.set(l.value.compartment,l.value.extension)):l.is(le.reconfigure)?(n=null,i=l.value):l.is(le.appendConfig)&&(n=null,i=Ts(i).concat(l.value));let r;n?r=e.startState.values.slice():(n=bl.resolve(i,s,this),r=new ue(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Bc)?e.newSelection:e.newSelection.asSingle();new ue(n,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:N.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),s=this.changes(i.changes),r=[i.range],o=Ts(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),c=this.changes(a.changes),h=c.map(s);for(let u=0;u<l;u++)r[u]=r[u].map(h);let f=s.mapDesc(c,!0);r.push(a.range.map(f)),s=s.compose(h),o=le.mapEffects(o,h).concat(le.mapEffects(Ts(a.effects),f))}return{changes:s,selection:N.create(r,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ke?e:Ke.of(e,this.doc.length,this.facet(ue.lineSeparator))}toText(e){return be.of(e.split(this.facet(ue.lineSeparator)||Dc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(wr(this,n),yl(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof lt&&this.config.address[s.id]!=null&&(n[i]=s.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];s.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ue.create({doc:e.doc,selection:N.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=bl.resolve(e.extensions||[],new Map),i=e.doc instanceof be?e.doc:be.of((e.doc||"").split(n.staticFacet(ue.lineSeparator)||Dc)),s=e.selection?e.selection instanceof N?e.selection:N.single(e.selection.anchor,e.selection.head):N.single(0);return Yg(s,i.length),n.staticFacet(Bc)||(s=s.asSingle()),new ue(n,i,s,n.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(ue.tabSize)}get lineBreak(){return this.facet(ue.lineSeparator)||`
`}get readOnly(){return this.facet(n0)}phrase(e,...n){for(let i of this.facet(ue.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>n.length?i:n[r-1]})),e}languageDataAt(e,n,i=-1){let s=[];for(let r of this.facet(Jg))for(let o of r(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return eC(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=ot(n,o,!1);if(r(n.slice(a,o))!=Pe.Word)break;o=a}for(;l<s;){let a=ot(n,l);if(r(n.slice(l,a))!=Pe.Word)break;l=a}return o==l?null:N.range(o+i,l+i)}}ue.allowMultipleSelections=Bc;ue.tabSize=Y.define({combine:t=>t.length?t[0]:4});ue.lineSeparator=Qg;ue.readOnly=n0;ue.phrases=Y.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(s=>t[s]==e[s])}});ue.languageData=Jg;ue.changeFilter=Zg;ue.transactionFilter=e0;ue.transactionExtender=t0;eo.reconfigure=le.define();function In(t,e,n={}){let i={};for(let s of t)for(let r of Object.keys(s)){let o=s[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,r))i[r]=n[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class ns{eq(e){return this==e}range(e,n=e){return Vc.create(e,n,this)}}ns.prototype.startSide=ns.prototype.endSide=0;ns.prototype.point=!1;ns.prototype.mapMode=xt.TrackDel;let Vc=class r0{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new r0(e,n,i)}};function Wc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class cf{constructor(e,n,i,s){this.from=e,this.to=n,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,s=0){let r=i?this.to:this.from;for(let o=s,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,n,i,s){for(let r=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,n){let i=[],s=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],h=this.from[a]+e,f=this.to[a]+e,u,d;if(h==f){let p=n.mapPos(h,c.startSide,c.mapMode);if(p==null||(u=d=p,c.startSide!=c.endSide&&(d=n.mapPos(h,c.endSide),d<u)))continue}else if(u=n.mapPos(h,c.startSide),d=n.mapPos(f,c.endSide),u>d||u==d&&c.startSide>0&&c.endSide<=0)continue;(d-u||c.endSide-c.startSide)<0||(o<0&&(o=u),c.point&&(l=Math.max(l,d-u)),i.push(c),s.push(u-o),r.push(d-o))}return{mapped:i.length?new cf(s,r,i,l):null,pos:o}}}class ge{constructor(e,n,i,s){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=s}static create(e,n,i,s){return new ge(e,n,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(Wc)),this.isEmpty)return n.length?ge.of(n):this;let l=new o0(this,null,-1).goto(0),a=0,c=[],h=new Qn;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let f=n[a++];h.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||s>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||s>l.to||r<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(Vc.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?ge.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)s=Math.max(s,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:h,pos:f}=a.map(l,e);h&&(s=Math.max(s,h.maxPoint),n.push(h),i.push(f))}}let r=this.nextLayer.map(e);return n.length==0?r:new ge(i,n,r||ge.empty,s)}between(e,n,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(n>=r&&e<=r+o.length&&o.between(r,e-r,n-r,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Nr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Nr.from(e).goto(n)}static compare(e,n,i,s,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=ud(o,l,i),c=new Js(o,a,r),h=new Js(l,a,r);i.iterGaps((f,u,d)=>dd(c,f,h,u,d,s)),i.empty&&i.length==0&&dd(c,0,h,0,0,s)}static eq(e,n,i=0,s){s==null&&(s=999999999);let r=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),o=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=ud(r,o),a=new Js(r,l,0).goto(i),c=new Js(o,l,0).goto(i);for(;;){if(a.to!=c.to||!$c(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>s)return!0;a.next(),c.next()}}static spans(e,n,i,s,r=-1){let o=new Js(e,null,r).goto(n),l=n,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let h=o.activeForPoint(o.to),f=o.pointFrom<n?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,a);s.point(l,c,o.point,h,f,o.pointRank),a=Math.min(o.openEnd(c),h.length)}else c>l&&(s.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new Qn;for(let s of e instanceof Vc?[e]:n?tC(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return ge.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=ge.empty;s=s.nextLayer)n=new ge(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}ge.empty=new ge([],[],null,-1);function tC(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Wc(e,i)>0)return t.slice().sort(Wc);e=i}return t}ge.empty.nextLayer=ge.empty;class Qn{finishChunk(e){this.chunks.push(new cf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Qn)).add(e,n,i)}addInner(e,n,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ge.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ge.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function ud(t,e,n){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(n?n.mapPos(l):l)==r.chunkPos[o]&&!n?.touchesRange(l,l+r.chunk[o].length)&&s.add(r.chunk[o])}return s}class o0{constructor(e,n,i,s=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Nr{constructor(e){this.heap=e}static from(e,n=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new o0(o,n,i,r));return s.length==1?s[0]:new Nr(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Ra(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Ra(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ra(this.heap,0)}}}function Ra(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let s=t[i];if(i+1<t.length&&s.compare(t[i+1])>=0&&(s=t[i+1],i++),n.compare(s)<0)break;t[i]=n,t[e]=s,e=i}}class Js{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Nr.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){yo(this.active,e),yo(this.activeTo,e),yo(this.activeRank,e),this.minActive=pd(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:s,rank:r}=this.cursor;for(;n<this.activeRank.length&&(r-this.activeRank[n]||s-this.activeTo[n])>0;)n++;vo(this.active,n,i),vo(this.activeTo,n,s),vo(this.activeRank,n,r),e&&vo(e,n,this.cursor.from),this.minActive=pd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&yo(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function dd(t,e,n,i,s,r){t.goto(e),n.goto(i);let o=i+s,l=i,a=i-e;for(;;){let c=t.to+a-n.to,h=c||t.endSide-n.endSide,f=h<0?t.to+a:n.to,u=Math.min(f,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&$c(t.activeForPoint(t.to),n.activeForPoint(n.to))||r.comparePoint(l,u,t.point,n.point):u>l&&!$c(t.active,n.active)&&r.compareRange(l,u,t.active,n.active),f>o)break;(c||t.openEnd!=n.openEnd)&&r.boundChange&&r.boundChange(f),l=f,h<=0&&t.next(),h>=0&&n.next()}}function $c(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function yo(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function vo(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function pd(t,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||t[s].endSide-t[n].endSide)<0&&(n=s,i=e[s]);return n}function hs(t,e,n=t.length){let i=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=ot(t,s));return i}function Uc(t,e,n,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==t.length)break;r+=t.charCodeAt(s)==9?n-r%n:1,s=ot(t,s)}return i===!0?-1:t.length}const jc="",md=typeof Symbol>"u"?"__"+jc:Symbol.for(jc),zc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Mi{constructor(e,n){this.rules=[];let{finish:i}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let h=[],f=/^@(\w+)\b/.exec(o[0]),u=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))r(d.split(/,\s*/).map(g=>o.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(s(d),p,h,u)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(h.length||u)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)r(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gd[md]||1;return gd[md]=e+1,jc+e.toString(36)}static mount(e,n,i){let s=e[zc],r=i&&i.nonce;s?r&&s.setNonce(r):s=new nC(e,r),s.mount(Array.isArray(n)?n:[n],e)}}let bd=new Map;class nC{constructor(e,n){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let r=bd.get(i);if(r)return e[zc]=r;this.sheet=new s.CSSStyleSheet,bd.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[zc]=this}mount(e,n){let i=this.sheet,s=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],s++)}else{for(;r<a;)s+=this.modules[r++].rules.length;s+=l.rules.length,r++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Br={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iC=typeof navigator<"u"&&/Mac/.test(navigator.platform),sC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var st=0;st<10;st++)Ti[48+st]=Ti[96+st]=String(st);for(var st=1;st<=24;st++)Ti[st+111]="F"+st;for(var st=65;st<=90;st++)Ti[st]=String.fromCharCode(st+32),Br[st]=String.fromCharCode(st);for(var Pa in Ti)Br.hasOwnProperty(Pa)||(Br[Pa]=Ti[Pa]);function rC(t){var e=iC&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||sC&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Br:Ti)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ke(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?t.setAttribute(i,s):s!=null&&(t[i]=s)}e++}for(;e<arguments.length;e++)l0(t,arguments[e]);return t}function l0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)l0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Fr(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Kc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Jo(t,e){if(!e.anchorNode)return!1;try{return Kc(t,e.anchorNode)}catch{return!1}}function Bs(t){return t.nodeType==3?ss(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function xr(t,e,n,i){return n?yd(t,e,n,i,-1)||yd(t,e,n,i,1):!1}function is(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function vl(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function yd(t,e,n,i,s){for(;;){if(t==n&&e==i)return!0;if(e==(s<0?0:Rn(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=is(t)+(s<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?Rn(t):0}else return!1}}function Rn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function to(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function oC(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function a0(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function lC(t,e,n,i,s,r,o,l){let a=t.ownerDocument,c=a.defaultView||window;for(let h=t,f=!1;h&&!f;)if(h.nodeType==1){let u,d=h==a.body,p=1,g=1;if(d)u=oC(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(f=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let w=h.getBoundingClientRect();({scaleX:p,scaleY:g}=a0(h,w)),u={left:w.left,right:w.left+h.clientWidth*p,top:w.top,bottom:w.top+h.clientHeight*g}}let v=0,m=0;if(s=="nearest")e.top<u.top?(m=e.top-(u.top+o),n>0&&e.bottom>u.bottom+m&&(m=e.bottom-u.bottom+o)):e.bottom>u.bottom&&(m=e.bottom-u.bottom+o,n<0&&e.top-m<u.top&&(m=e.top-(u.top+o)));else{let w=e.bottom-e.top,A=u.bottom-u.top;m=(s=="center"&&w<=A?e.top+w/2-A/2:s=="start"||s=="center"&&n<0?e.top-o:e.bottom-A+o)-u.top}if(i=="nearest"?e.left<u.left?(v=e.left-(u.left+r),n>0&&e.right>u.right+v&&(v=e.right-u.right+r)):e.right>u.right&&(v=e.right-u.right+r,n<0&&e.left<u.left+v&&(v=e.left-(u.left+r))):v=(i=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:i=="start"==l?e.left-r:e.right-(u.right-u.left)+r)-u.left,v||m)if(d)c.scrollBy(v,m);else{let w=0,A=0;if(m){let x=h.scrollTop;h.scrollTop+=m/g,A=(h.scrollTop-x)*g}if(v){let x=h.scrollLeft;h.scrollLeft+=v/p,w=(h.scrollLeft-x)*p}e={left:e.left-w,top:e.top-A,right:e.right-w,bottom:e.bottom-A},w&&Math.abs(w-v)<1&&(i="nearest"),A&&Math.abs(A-m)<1&&(s="nearest")}if(d)break;(e.top<u.top||e.bottom>u.bottom||e.left<u.left||e.right>u.right)&&(e={left:Math.max(e.left,u.left),right:Math.min(e.right,u.right),top:Math.max(e.top,u.top),bottom:Math.min(e.bottom,u.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function aC(t){let e=t.ownerDocument,n,i;for(let s=t.parentNode;s&&!(s==e.body||n&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:i}}class cC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Rn(n):0),i,Math.min(e.focusOffset,i?Rn(i):0))}set(e,n,i,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=s}}let ps=null;function c0(t){if(t.setActive)return t.setActive();if(ps)return t.focus(ps);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(ps==null?{get preventScroll(){return ps={preventScroll:!0},!0}}:void 0),!ps){ps=!1;for(let n=0;n<e.length;){let i=e[n++],s=e[n++],r=e[n++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let vd;function ss(t,e,n=e){let i=vd||(vd=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Es(t,e,n,i){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function hC(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function h0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function fC(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Rn(n));;)if(i){if(n.nodeType!=1)return!1;let s=n.childNodes[i-1];s.contentEditable=="false"?i--:(n=s,i=Rn(n))}else{if(n==t)return!0;i=is(n),n=n.parentNode}}function f0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function u0(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Rn(n)}else if(n.parentNode&&!vl(n))i=is(n),n=n.parentNode;else return null}}function d0(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!vl(n))i=is(n)+1,n=n.parentNode;else return null}}class ut{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ut(e.parentNode,is(e),n)}static after(e,n){return new ut(e.parentNode,is(e)+1,n)}}const hf=[];class Me{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,s=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=s?s.nextSibling:i.firstChild)){let l=Me.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,n),o.flags&=-8}if(r=s?s.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&r!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=wd(r);else i.insertBefore(o.dom,r);s=o.dom}for(r=s?s.nextSibling:i.firstChild,r&&n&&n.node==i&&(n.written=!0);r;)r=wd(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let s=Rn(e)==0?0:n==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Me.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let o=this.children[s];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let s=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,h=i;a<this.children.length;a++){let f=this.children[a],u=c+f.length;if(c<e&&u>n)return f.domBoundsAround(e,n,c);if(u>=e&&s==-1&&(s=a,r=c),c>n&&f.dom.parentNode==this.dom){o=a,l=h;break}h=u,c=u+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=hf){this.markDirty();for(let s=e;s<n;s++){let r=this.children[s];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new p0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,s,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Me.prototype.breakAfter=0;function wd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class p0{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function m0(t,e,n,i,s,r,o,l,a){let{children:c}=t,h=c.length?c[e]:null,f=r.length?r[r.length-1]:null,u=f?f.breakAfter:o;if(!(e==i&&h&&!o&&!u&&r.length<2&&h.merge(n,s,r.length?f:null,n==0,l,a))){if(i<c.length){let d=c[i];d&&(s<d.length||d.breakAfter&&f?.breakAfter)?(e==i&&(d=d.split(s),s=0),!u&&f&&d.merge(0,s,f,!0,0,a)?r[r.length-1]=d:((s||d.children.length&&!d.children[0].length)&&d.merge(0,s,null,!1,0,a),r.push(d))):d?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,n>0&&(!o&&r.length&&h.merge(n,h.length,r[0],!1,l,0)?h.breakAfter=r.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||r.length)&&t.replaceChildren(e,i,r)}}function g0(t,e,n,i,s,r){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:c,off:h}=o.findPos(e,-1),f=e-n;for(let u of i)f+=u.length;t.length+=f,m0(t,c,h,l,a,i,0,s,r)}let _t=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},qc=typeof document<"u"?document:{documentElement:{style:{}}};const Gc=/Edge\/(\d+)/.exec(_t.userAgent),b0=/MSIE \d/.test(_t.userAgent),Yc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_t.userAgent),na=!!(b0||Yc||Gc),xd=!na&&/gecko\/(\d+)/i.test(_t.userAgent),Ia=!na&&/Chrome\/(\d+)/.exec(_t.userAgent),uC="webkitFontSmoothing"in qc.documentElement.style,y0=!na&&/Apple Computer/.test(_t.vendor),Sd=y0&&(/Mobile\/\w+/.test(_t.userAgent)||_t.maxTouchPoints>2);var G={mac:Sd||/Mac/.test(_t.platform),windows:/Win/.test(_t.platform),linux:/Linux|X11/.test(_t.platform),ie:na,ie_version:b0?qc.documentMode||6:Yc?+Yc[1]:Gc?+Gc[1]:0,gecko:xd,gecko_version:xd?+(/Firefox\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,chrome:!!Ia,chrome_version:Ia?+Ia[1]:0,ios:Sd,android:/Android\b/.test(_t.userAgent),safari:y0,webkit_version:uC?+(/\bAppleWebKit\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,tabSize:qc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const dC=256;class rn extends Me{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof rn)||this.length-(n-e)+i.length>dC||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new rn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ut(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return pC(this.dom,e,n)}}class Zn extends Me{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let s of n)s.setParent(this)}setAttrs(e){if(h0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,s,r,o){return i&&(!(i instanceof Zn&&i.mark.eq(this.mark))||e&&r<=0||n<this.length&&o<=0)?!1:(g0(this,e,n,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,s=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=r),i=a,r++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Zn(this.mark,n,o)}domAtPos(e){return v0(this,e)}coordsAt(e,n){return x0(this,e,n)}}function pC(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let s=e,r=e,o=0;e==0&&n<0||e==i&&n>=0?G.chrome||G.gecko||(e?(s--,o=1):r<i&&(r++,o=-1)):n<0?s--:r<i&&r++;let l=ss(t,s,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return G.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?to(a,o<0):a||null}class bi extends Me{static create(e,n,i){return new bi(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=bi.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,s,r,o){return i&&(!(i instanceof bi)||!this.widget.compare(i.widget)||e>0&&r<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof bi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return be.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):be.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ut.before(this.dom):ut.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let s=this.dom.getClientRects(),r=null;if(!s.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?s.length-1:0;r=s[l],!(e>0?l==0:l==s.length-1||r.top<r.bottom);l+=o?-1:1);return to(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Fs extends Me{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Fs&&e.side==this.side}split(){return new Fs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ut.before(this.dom):ut.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return be.empty}get isHidden(){return!0}}rn.prototype.children=bi.prototype.children=Fs.prototype.children=hf;function v0(t,e){let n=t.dom,{children:i}=t,s=0;for(let r=0;s<i.length;s++){let o=i[s],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=s;r>0;r--){let o=i[r-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let r=s;r<i.length;r++){let o=i[r];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ut(n,0)}function w0(t,e,n){let i,{children:s}=t;n>0&&e instanceof Zn&&s.length&&(i=s[s.length-1])instanceof Zn&&i.mark.eq(e.mark)?w0(i,e.children[0],n-1):(s.push(e),e.setParent(t)),t.length+=e.length}function x0(t,e,n){let i=null,s=-1,r=null,o=-1;function l(c,h){for(let f=0,u=0;f<c.children.length&&u<=h;f++){let d=c.children[f],p=u+d.length;p>=h&&(d.children.length?l(d,h-u):(!r||r.isHidden&&(n>0||gC(r,d)))&&(p>h||u==p&&d.getSide()>0)?(r=d,o=h-u):(u<h||u==p&&d.getSide()<0&&!d.isHidden)&&(i=d,s=h-u)),u=p}}l(t,e);let a=(n<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?s:o),n):mC(t)}function mC(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Bs(e);return n[n.length-1]||null}function gC(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function Xc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Cd=Object.create(null);function wl(t,e,n){if(t==e)return!0;t||(t=Cd),e||(e=Cd);let i=Object.keys(t),s=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let r of i)if(r!=n&&(s.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function Jc(t,e,n){let i=!1;if(e)for(let s in e)n&&s in n||(i=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(i=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return i}function bC(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class si{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var St=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(St||(St={}));class Z extends ns{constructor(e,n,i,s){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new no(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Ei(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=S0(e,n);i=(r?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new Ei(e,i,s,n,e.widget||null,!0)}static line(e){return new io(e)}static set(e,n=!1){return ge.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Z.none=ge.empty;class no extends Z{constructor(e){let{start:n,end:i}=S0(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof no&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&wl(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}no.prototype.point=!1;class io extends Z{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof io&&this.spec.class==e.spec.class&&wl(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}io.prototype.mapMode=xt.TrackBefore;io.prototype.point=!0;class Ei extends Z{constructor(e,n,i,s,r,o){super(n,i,r,e),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?xt.TrackBefore:xt.TrackAfter:xt.TrackDel}get type(){return this.startSide!=this.endSide?St.WidgetRange:this.startSide<=0?St.WidgetBefore:St.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ei&&yC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Ei.prototype.point=!0;function S0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function yC(t,e){return t==e||!!(t&&e&&t.compare(e))}function Qo(t,e,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class Ue extends Me{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,s,r,o){if(i){if(!(i instanceof Ue))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),g0(this,e,n,i?i.children.slice():[],r,o),!0}split(e){let n=new Ue;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:s}=this.childPos(e);s&&(n.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)n.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wl(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){w0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=Xc(n,this.attrs||{})),i&&(this.attrs=Xc({class:i},this.attrs||{}))}domAtPos(e){return v0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(h0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Jc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&Me.get(s)instanceof Zn;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=Me.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!G.ios||!this.children.some(r=>r instanceof rn))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof rn)||/[^ -~]/.test(i.text))return null;let s=Bs(i.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=x0(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-s.lineHeight)<2&&s.textHeight<r){let o=(r-s.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Ue&&this.children.length==0&&e.children.length==0&&wl(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],o=s+r.length;if(o>=n){if(r instanceof Ue)return r;if(o>n)break}s=o+r.breakAfter}return null}}class Gn extends Me{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,s,r,o){return i&&(!(i instanceof Gn)||!this.widget.compare(i.widget)||e>0&&r<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ut.before(this.dom):ut.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Gn(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return hf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):be.empty}domBoundsAround(){return null}become(e){return e instanceof Gn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof Qc?null:to(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class Qc extends si{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Sr{constructor(e,n,i,s){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Gn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ue),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wo(new Fs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Gn)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(wo(new rn(this.text.slice(this.textOff,this.textOff+s)),n),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,n,i,s){this.buildText(n-e,i,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,i,s,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Ei){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof Ei)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Gn(i.widget||Hs.block,l,i));else{let a=bi.create(i.widget||Hs.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=s.length&&(e<n||i.startSide>0),h=!a.isEditable&&(e<n||r>s.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(f.append(wo(new Fs(1),s),r),r=s.length+Math.max(0,r-s.length)),f.append(wo(a,s),r),this.atCursorPos=h,this.pendingBuffer=h?e<n||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=r)}static build(e,n,i,s,r){let o=new Sr(e,n,i,r);return o.openEnd=ge.spans(s,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function wo(t,e){for(let n of e)t=new Zn(n,[t],t.length);return t}class Hs extends si{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Hs.inline=new Hs("span");Hs.block=new Hs("div");var Te=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(Te||(Te={}));const rs=Te.LTR,ff=Te.RTL;function C0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const vC=C0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),wC=C0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Zc=Object.create(null),dn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Zc[e]=n,Zc[n]=-e}function k0(t){return t<=247?vC[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?wC[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const xC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class yi{get dir(){return this.level%2?ff:rs}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,s){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(r<0||(s!=0?s<0?l.from<n:l.to>n:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function A0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=e[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!A0(i.inner,s.inner))return!1}return!0}const Ae=[];function SC(t,e,n,i,s){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:n,a=r?256:s;for(let c=o,h=a,f=a;c<l;c++){let u=k0(t.charCodeAt(c));u==512?u=h:u==8&&f==4&&(u=16),Ae[c]=u==4?2:u,u&7&&(f=u),h=u}for(let c=o,h=a,f=a;c<l;c++){let u=Ae[c];if(u==128)c<l-1&&h==Ae[c+1]&&h&24?u=Ae[c]=h:Ae[c]=256;else if(u==64){let d=c+1;for(;d<l&&Ae[d]==64;)d++;let p=c&&h==8||d<n&&Ae[d]==8?f==1?1:8:256;for(let g=c;g<d;g++)Ae[g]=p;c=d-1}else u==8&&f==1&&(Ae[c]=1);h=u,u&7&&(f=u)}}}function CC(t,e,n,i,s){let r=s==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:e,h=o<i.length?i[o].from:n;for(let f=c,u,d,p;f<h;f++)if(d=Zc[u=t.charCodeAt(f)])if(d<0){for(let g=l-3;g>=0;g-=3)if(dn[g+1]==-d){let v=dn[g+2],m=v&2?s:v&4?v&1?r:s:0;m&&(Ae[f]=Ae[dn[g]]=m),l=g;break}}else{if(dn.length==189)break;dn[l++]=f,dn[l++]=u,dn[l++]=a}else if((p=Ae[f])==2||p==1){let g=p==s;a=g?0:1;for(let v=l-3;v>=0;v-=3){let m=dn[v+2];if(m&2)break;if(g)dn[v+2]|=2;else{if(m&4)break;dn[v+2]|=4}}}}}function kC(t,e,n,i){for(let s=0,r=i;s<=n.length;s++){let o=s?n[s-1].to:t,l=s<n.length?n[s].from:e;for(let a=o;a<l;){let c=Ae[a];if(c==256){let h=a+1;for(;;)if(h==l){if(s==n.length)break;h=n[s++].to,l=s<n.length?n[s].from:e}else if(Ae[h]==256)h++;else break;let f=r==1,u=(h<e?Ae[h]:i)==1,d=f==u?f?1:2:i;for(let p=h,g=s,v=g?n[g-1].to:t;p>a;)p==v&&(p=n[--g].from,v=g?n[g-1].to:t),Ae[--p]=d;a=h}else r=c,a++}}}function eh(t,e,n,i,s,r,o){let l=i%2?2:1;if(i%2==s%2)for(let a=e,c=0;a<n;){let h=!0,f=!1;if(c==r.length||a<r[c].from){let g=Ae[a];g!=l&&(h=!1,f=g==16)}let u=!h&&l==1?[]:null,d=h?i:i+1,p=a;e:for(;;)if(c<r.length&&p==r[c].from){if(f)break e;let g=r[c];if(!h)for(let v=g.to,m=c+1;;){if(v==n)break e;if(m<r.length&&r[m].from==v)v=r[m++].to;else{if(Ae[v]==l)break e;break}}if(c++,u)u.push(g);else{g.from>a&&o.push(new yi(a,g.from,d));let v=g.direction==rs!=!(d%2);th(t,v?i+1:i,s,g.inner,g.from,g.to,o),a=g.to}p=g.to}else{if(p==n||(h?Ae[p]!=l:Ae[p]==l))break;p++}u?eh(t,a,p,i+1,s,u,o):a<p&&o.push(new yi(a,p,d)),a=p}else for(let a=n,c=r.length;a>e;){let h=!0,f=!1;if(!c||a>r[c-1].to){let g=Ae[a-1];g!=l&&(h=!1,f=g==16)}let u=!h&&l==1?[]:null,d=h?i:i+1,p=a;e:for(;;)if(c&&p==r[c-1].to){if(f)break e;let g=r[--c];if(!h)for(let v=g.from,m=c;;){if(v==e)break e;if(m&&r[m-1].to==v)v=r[--m].from;else{if(Ae[v-1]==l)break e;break}}if(u)u.push(g);else{g.to<a&&o.push(new yi(g.to,a,d));let v=g.direction==rs!=!(d%2);th(t,v?i+1:i,s,g.inner,g.from,g.to,o),a=g.from}p=g.from}else{if(p==e||(h?Ae[p-1]!=l:Ae[p-1]==l))break;p--}u?eh(t,p,a,i+1,s,u,o):p<a&&o.push(new yi(p,a,d)),a=p}}function th(t,e,n,i,s,r,o){let l=e%2?2:1;SC(t,s,r,i,l),CC(t,s,r,i,l),kC(s,r,i,l),eh(t,s,r,e,n,i,o)}function AC(t,e,n){if(!t)return[new yi(0,0,e==ff?1:0)];if(e==rs&&!n.length&&!xC.test(t))return _0(t.length);if(n.length)for(;t.length>Ae.length;)Ae[Ae.length]=256;let i=[],s=e==rs?0:1;return th(t,s,s,n,0,t.length,i),i}function _0(t){return[new yi(0,t,0)]}let M0="";function _C(t,e,n,i,s){var r;let o=i.head-t.from,l=yi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],c=a.side(s,n);if(o==c){let u=l+=s?1:-1;if(u<0||u>=e.length)return null;a=e[l=u],o=a.side(!s,n),c=a.side(s,n)}let h=ot(t.text,o,a.forward(s,n));(h<a.from||h>a.to)&&(h=c),M0=t.text.slice(Math.min(o,h),Math.max(o,h));let f=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return f&&h==c&&f.level+(s?0:1)<a.level?N.cursor(f.side(!s,n)+t.from,f.forward(s,n)?1:-1,f.level):N.cursor(h+t.from,a.forward(s,n)?-1:1,a.level)}function MC(t,e,n){for(let i=e;i<n;i++){let s=k0(t.charCodeAt(i));if(s==1)return rs;if(s==2||s==4)return ff}return rs}const T0=Y.define(),E0=Y.define(),O0=Y.define(),L0=Y.define(),nh=Y.define(),D0=Y.define(),R0=Y.define(),uf=Y.define(),df=Y.define(),P0=Y.define({combine:t=>t.some(e=>e)}),I0=Y.define({combine:t=>t.some(e=>e)}),N0=Y.define();class Os{constructor(e,n="nearest",i="nearest",s=5,r=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=s,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new Os(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Os(N.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const xo=le.define({map:(t,e)=>t.map(e)}),B0=le.define();function Tt(t,e,n){let i=t.facet(L0);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const zn=Y.define({combine:t=>t.length?t[0]:!0});let TC=0;const Ss=Y.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class $e{constructor(e,n,i,s,r){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Ss.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ss.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:s,provide:r,decorations:o}=n||{};return new $e(TC++,e,i,s,l=>{let a=[];return o&&a.push(Hr.of(c=>{let h=c.plugin(l);return h?o(h):Z.none})),r&&a.push(r(l)),a})}static fromClass(e,n){return $e.define((i,s)=>new e(i,s),n)}}class Na{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Tt(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Tt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Tt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const F0=Y.define(),pf=Y.define(),Hr=Y.define(),H0=Y.define(),ia=Y.define(),V0=Y.define();function kd(t,e){let n=t.state.facet(V0);if(!n.length)return n;let i=n.map(r=>r instanceof Function?r(t):r),s=[];return ge.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let c=r-e.from,h=o-e.from,f=s;for(let u=l.length-1;u>=0;u--,a--){let d=l[u].spec.bidiIsolate,p;if(d==null&&(d=MC(e.text,c,h)),a>0&&f.length&&(p=f[f.length-1]).to==c&&p.direction==d)p.to=h,f=p.inner;else{let g={from:c,to:h,direction:d,inner:[]};f.push(g),f=g.inner}}}}),s}const W0=Y.define();function mf(t){let e=0,n=0,i=0,s=0;for(let r of t.state.facet(W0)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:n,top:i,bottom:s}}const rr=Y.define();class qt{constructor(e,n,i,s){this.fromA=e,this.toA=n,this.fromB=i,this.toB=s}join(e){return new qt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let s=0,r=0,o=0,l=0;;s++){let a=s==e.length?null:e[s],c=o-l,h=a?a.fromB:1e9;for(;r<n.length&&n[r]<h;){let f=n[r],u=n[r+1],d=Math.max(l,f),p=Math.min(h,u);if(d<=p&&new qt(d+c,p+c,d,p).addToSet(i),u>h)break;r+=2}if(!a)return i;new qt(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class xl{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ke.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,l,a)=>s.push(new qt(r,o,l,a))),this.changedRanges=s}static create(e,n,i){return new xl(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ad extends Me{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Z.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ue],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new qt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!IC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let r=s>-1?OC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;i=new qt(c,h,e.changes.mapPos(c,-1),e.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(G.ie||G.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=RC(o,l,e.changes);return i=qt.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=G.chrome||G.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||s.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Gn&&o.widget instanceof Qc&&r.push(o.dom);s.updateGaps(r)}updateChildren(e,n,i){let s=i?i.range.addToSet(e.slice()):e,r=this.childCursor(n);for(let o=s.length-1;;o--){let l=o>=0?s[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:h,toB:f}=l,u,d,p,g;if(i&&i.range.fromB<f&&i.range.toB>h){let x=Sr.build(this.view.state.doc,h,i.range.fromB,this.decorations,this.dynamicDecorationMap),C=Sr.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);d=x.breakAtStart,p=x.openStart,g=C.openEnd;let M=this.compositionView(i);C.breakAtStart?M.breakAfter=1:C.content.length&&M.merge(M.length,M.length,C.content[0],!1,C.openStart,0)&&(M.breakAfter=C.content[0].breakAfter,C.content.shift()),x.content.length&&M.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),u=x.content.concat(M).concat(C.content)}else({content:u,breakAtStart:d,openStart:p,openEnd:g}=Sr.build(this.view.state.doc,h,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:m}=r.findPos(c,1),{i:w,off:A}=r.findPos(a,-1);m0(this,w,A,v,m,u,d,p,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(B0)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new rn(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new Zn(s,[n],n.length);let i=new Ue;return i.append(n,0),i}fixCompositionDOM(e){let n=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Me.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];n(e.line,s);for(let r=e.marks.length-1;r>=-1;r--)i=s.childPos(i.off,1),s=s.children[i.i],n(r>=0?e.marks[r].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,r=!s&&!(this.view.state.facet(zn)||this.dom.tabIndex>-1)&&Jo(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||n||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(G.gecko&&l.empty&&!this.hasComposition&&EC(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=c=new ut(f,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!xr(a.node,a.offset,h.anchorNode,h.anchorOffset)||!xr(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{G.android&&G.chrome&&this.dom.contains(h.focusNode)&&PC(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Fr(this.view.root);if(f)if(l.empty){if(G.gecko){let u=LC(a.node,a.offset);if(u&&u!=3){let d=(u==1?u0:d0)(a.node,a.offset);d&&(a=new ut(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(c.node,c.offset)}catch{}}else{let u=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),u.setEnd(c.node,c.offset),u.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(u)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new ut(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new ut(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&xr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Fr(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Ue.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!a||!c||a.bottom>c.top)return;let h=this.domAtPos(n.head+n.assoc);i.collapse(h.node,h.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&i.collapse(s,r)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let s=e.offset;!i&&s<n.childNodes.length;s++){let r=Me.get(n.childNodes[s]);r instanceof Ue&&(i=r.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let r=Me.get(n.childNodes[s]);r instanceof Ue&&(i=r.domAtPos(r.length))}return i?new ut(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Me.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(i<s.length||s instanceof Ue)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,s=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Ue&&!(i instanceof Ue&&n>=0)))i=l,s=c;else if(i&&c==e&&a==e&&l instanceof Gn&&Math.abs(n)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=c}return i?i.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),s=this.children[n];if(!(s instanceof Ue))return null;for(;s.children.length;){let{i:l,off:a}=s.childPos(i,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}i=a}if(!(s instanceof rn))return null;let r=ot(s.text,i);if(r==i)return null;let o=ss(s.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Te.LTR;for(let c=0,h=0;h<this.children.length;h++){let f=this.children[h],u=c+f.length;if(u>s)break;if(c>=i){let d=f.dom.getBoundingClientRect();if(n.push(d.height),o){let p=f.dom.lastChild,g=p?Bs(p):[];if(g.length){let v=g[g.length-1],m=a?v.right-d.left:d.right-v.left;m>l&&(l=m,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=u)}}}c=u+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Te.RTL:Te.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Ue){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Bs(e.firstChild)[0];n=e.getBoundingClientRect().height,i=r?r.width/27:7,s=r?r.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new p0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,s=0;;s++){let r=s==n.viewports.length?null:n.viewports[s],o=r?r.from-1:this.length;if(o>i){let l=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Z.replace({widget:new Qc(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Z.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Hr).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,s=this.view.state.facet(H0).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(s.length&&(this.dynamicDecorationMap[e++]=i,n.push(ge.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(N0))try{if(c(this.view,e.range,e))return!0}catch(h){Tt(this.view.state,h,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!i)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=mf(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;lC(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Te.LTR)}}function EC(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function $0(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=u0(n.focusNode,n.focusOffset),s=d0(n.focusNode,n.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let l=Me.get(s.node);if(!l||l instanceof rn&&l.text!=s.node.nodeValue)r=s;else if(t.docView.lastCompositionAfterCursor){let a=Me.get(i.node);!a||a instanceof rn&&a.text!=i.node.nodeValue||(r=s)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function OC(t,e,n){let i=$0(t,n);if(!i)return null;let{node:s,from:r,to:o}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new qt(a.mapPos(r),a.mapPos(o),r,o),h=[];for(let f=s.parentNode;;f=f.parentNode){let u=Me.get(f);if(u instanceof Zn)h.push({node:f,deco:u.mark});else{if(u instanceof Ue||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:c,text:s,marks:h,line:f};if(f!=t.contentDOM)h.push({node:f,deco:new no({inclusive:!0,attributes:bC(f),tagName:f.tagName.toLowerCase()})});else return null}}}function LC(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let DC=class{constructor(){this.changes=[]}compareRange(e,n){Qo(e,n,this.changes)}comparePoint(e,n){Qo(e,n,this.changes)}boundChange(e){Qo(e,e,this.changes)}};function RC(t,e,n){let i=new DC;return ge.compare(t,e,n,i),i.changes}function PC(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function IC(t,e){let n=!1;return e&&t.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(n=!0)}),n}function NC(t,e,n=1){let i=t.charCategorizer(e),s=t.doc.lineAt(e),r=e-s.from;if(s.length==0)return N.cursor(e);r==0?n=1:r==s.length&&(n=-1);let o=r,l=r;n<0?o=ot(s.text,r,!1):l=ot(s.text,r);let a=i(s.text.slice(o,l));for(;o>0;){let c=ot(s.text,o,!1);if(i(s.text.slice(c,o))!=a)break;o=c}for(;l<s.length;){let c=ot(s.text,l);if(i(s.text.slice(l,c))!=a)break;l=c}return N.range(o+s.from,l+s.from)}function BC(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function FC(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ba(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function _d(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Md(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function ih(t,e,n){let i,s,r,o,l=!1,a,c,h,f;for(let p=t.firstChild;p;p=p.nextSibling){let g=Bs(p);for(let v=0;v<g.length;v++){let m=g[v];s&&Ba(s,m)&&(m=_d(Md(m,s.bottom),s.top));let w=BC(e,m),A=FC(n,m);if(w==0&&A==0)return p.nodeType==3?Td(p,e,n):ih(p,e,n);(!i||o>A||o==A&&r>w)&&(i=p,s=m,r=w,o=A,l=w?e<m.left?v>0:v<g.length-1:!0),w==0?n>m.bottom&&(!h||h.bottom<m.bottom)?(a=p,h=m):n<m.top&&(!f||f.top>m.top)&&(c=p,f=m):h&&Ba(h,m)?h=Md(h,m.bottom):f&&Ba(f,m)&&(f=_d(f,m.top))}}if(h&&h.bottom>=n?(i=a,s=h):f&&f.top<=n&&(i=c,s=f),!i)return{node:t,offset:0};let u=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return Td(i,u,n);if(l&&i.contentEditable!="false")return ih(i,u,n);let d=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:t,offset:d}}function Td(t,e,n){let i=t.nodeValue.length,s=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=ss(t,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let f=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&f<r){let u=e>=(h.left+h.right)/2,d=u;if((G.chrome||G.gecko)&&ss(t,l).getBoundingClientRect().left==h.right&&(d=!u),f<=0)return{node:t,offset:l+(d?1:0)};s=l+(d?1:0),r=f}}}return{node:t,offset:s>-1?s:o>0?t.nodeValue.length:0}}function U0(t,e,n,i=-1){var s,r;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:c}=t.viewState,{x:h,y:f}=e,u=f-l;if(u<0)return 0;if(u>c)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(u),a.type!=St.Text;)for(;u=i>0?a.bottom+x:a.top-x,!(u>=0&&u<=c);){if(C)return n?null:0;C=!0,i=-i}f=l+u;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Ed(t,o,a,h,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Ed(t,o,a,h,f);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,v=g.elementFromPoint(h,f);v&&!t.contentDOM.contains(v)&&(v=null),v||(h=Math.max(o.left+1,Math.min(o.right-1,h)),v=g.elementFromPoint(h,f),v&&!t.contentDOM.contains(v)&&(v=null));let m,w=-1;if(v&&((s=t.docView.nearest(v))===null||s===void 0?void 0:s.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(h,f);x&&({offsetNode:m,offset:w}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(h,f);x&&({startContainer:m,startOffset:w}=x,(!t.contentDOM.contains(m)||G.safari&&HC(m,w,h)||G.chrome&&VC(m,w,h))&&(m=void 0))}m&&(w=Math.min(Rn(m),w))}if(!m||!t.docView.dom.contains(m)){let x=Ue.find(t.docView,d);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:m,offset:w}=ih(x.dom,h,f))}let A=t.docView.nearest(m);if(!A)return null;if(A.isWidget&&((r=A.dom)===null||r===void 0?void 0:r.nodeType)==1){let x=A.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?A.posAtStart:A.posAtEnd}else return A.localPosFromDOM(m,w)+A.posAtStart}function Ed(t,e,n,i,s){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((s-n.top-(t.defaultLineHeight-l)*.5)/l);r+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+Uc(o,r,t.state.tabSize)}function HC(t,e,n){let i,s=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let r=s.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=s.parentNode;if(!o||o.nodeName=="DIV")break;s=o}}return ss(t,i-1,i).getBoundingClientRect().right>n}function VC(t,e,n){if(e!=0)return!1;for(let s=t;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=t.nodeType==1?t.getBoundingClientRect():ss(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function sh(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!s||r.type==St.Text&&(s.type!=r.type||(n<0?r.from<e:r.to>e)))&&(s=r)}}return s||i}return i}function WC(t,e,n,i){let s=sh(t,e.head,e.assoc||-1),r=!i||s.type!=St.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(s.from),a=t.posAtCoords({x:n==(l==Te.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return N.cursor(a,n?-1:1)}return N.cursor(n?s.to:s.from,n?-1:1)}function Od(t,e,n,i){let s=t.state.doc.lineAt(e.head),r=t.bidiSpans(s),o=t.textDirectionAt(s.from);for(let l=e,a=null;;){let c=_C(s,r,o,l,n),h=M0;if(!c){if(s.number==(n?t.state.doc.lines:1))return l;h=`
`,s=t.state.doc.line(s.number+(n?1:-1)),r=t.bidiSpans(s),c=t.visualLineSide(s,!n)}if(a){if(!a(h))return l}else{if(!i)return c;a=i(h)}l=c}}function $C(t,e,n){let i=t.state.charCategorizer(e),s=i(n);return r=>{let o=i(r);return s==Pe.Space&&(s=o),s==o}}function UC(t,e,n,i){let s=e.head,r=n?1:-1;if(s==(n?t.state.doc.length:0))return N.cursor(s,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(s,e.assoc||-1),h=t.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(s);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(s-d.from))),l=(r<0?d.top:d.bottom)+h}let f=a.left+o,u=i??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(u+d)*r,g=U0(t,{x:f,y:p},!1,r);if(p<a.top||p>a.bottom||(r<0?g<s:g>s)){let v=t.docView.coordsForChar(g),m=!v||p<v.top?-1:1;return N.cursor(g,m,void 0,o)}}}function Zo(t,e,n){for(;;){let i=0;for(let s of t)s.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||n||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function j0(t,e){let n=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],r=null;if(s.empty){let o=Zo(t,s.from,0);o!=s.from&&(r=N.cursor(o,-1))}else{let o=Zo(t,s.from,-1),l=Zo(t,s.to,1);(o!=s.from||l!=s.to)&&(r=N.range(s.from==s.anchor?o:l,s.from==s.head?o:l))}r&&(n||(n=e.ranges.slice()),n[i]=r)}return n?N.create(n,e.mainIndex):e}function Fa(t,e,n){let i=Zo(t.state.facet(ia).map(s=>s(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:N.cursor(i,i<n.from?1:-1)}const or="";class jC{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ue.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=or}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let r=this.text.length;this.readNode(s);let o=s.nextSibling;if(o==n)break;let l=Me.get(s),a=Me.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:vl(s))||vl(o)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>r)&&this.lineBreak(),s=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=s.exec(n))&&(r=l.index,o=l[0].length),this.append(n.slice(i,r<0?n.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let n=Me.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(zC(e,i.node,i.offset)?n:0))}}function zC(t,e,n){for(;;){if(!e||n<Rn(e))return!1;if(e==t)return!0;n=is(e)+1,e=e.parentNode}}class Ld{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class KC{constructor(e,n,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=r||o?[]:YC(e),a=new jC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=XC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Kc(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Kc(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),h=e.viewport;if((G.ios||G.chrome)&&e.state.selection.main.empty&&a!=c&&(h.from>0||h.to<e.state.doc.length)){let f=Math.min(a,c),u=Math.max(a,c),d=h.from-f,p=h.to-u;(d==0||d==1||f==0)&&(p==0||p==-1||u==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=N.single(c,a)}}}function z0(t,e){let n,{newSel:i}=e,s=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=s.from,c=null;(r===8||G.android&&e.text.length<l-o)&&(a=s.to,c="end");let h=GC(t.state.doc.sliceString(o,l,or),e.text,a-o,c);h&&(G.chrome&&r==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==or+or&&h.toB--,n={from:o+h.from,to:o+h.toA,insert:be.of(e.text.slice(h.from,h.toB).split(or))})}else i&&(!t.hasFocus&&t.state.facet(zn)||i.main.eq(s))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!s.empty&&i&&i.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(G.mac||G.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=N.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:be.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:G.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=N.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:be.of([" "])}),n)return gf(t,n,i,r);if(i&&!i.main.eq(s)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=j0(t.state.facet(ia).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function gf(t,e,n,i=-1){if(G.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(G.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Es(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Es(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Es(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=qC(t,e,n));return t.state.facet(D0).some(a=>a(t,e.from,e.to,r,l))||t.dispatch(l()),!0}function qC(t,e,n){let i,s=t.state,r=s.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=r.from<e.from?s.sliceDoc(r.from,e.from):"",a=r.to>e.to?s.sliceDoc(e.to,r.to):"";i=s.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+a))}else{let l=s.changes(e),a=n&&n.main.to<=l.newLength?n.main:void 0;if(s.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&$0(t,n.main.head);if(f){let p=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-p}}else h=t.state.doc.lineAt(r.head);let u=r.to-e.to,d=r.to-r.from;i=s.changeByRange(p=>{if(p.from==r.from&&p.to==r.to)return{changes:l,range:a||p.map(l)};let g=p.to-u,v=g-c.length;if(p.to-p.from!=d||t.state.sliceDoc(v,g)!=c||p.to>=h.from&&p.from<=h.to)return{range:p};let m=s.changes({from:v,to:g,insert:e.insert}),w=p.to-r.to;return{changes:m,range:a?N.range(Math.max(0,a.anchor+w),Math.max(0,a.head+w)):p.map(m)}})}else i={changes:l,selection:a&&s.selection.replaceRange(a)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:o,scrollIntoView:!0})}function GC(t,e,n,i){let s=Math.min(t.length,e.length),r=0;for(;r<s&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));n-=o+a-r}if(o<r&&t.length<e.length){let a=n<=r&&n>=o?r-n:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=n<=r&&n>=l?r-n:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function YC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=t.observer.selectionRange;return n&&(e.push(new Ld(n,i)),(s!=n||r!=i)&&e.push(new Ld(s,r))),e}function XC(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?N.single(n+e,i+e):null}class JC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,G.safari&&e.contentDOM.addEventListener("input",()=>null),G.gecko&&dk(e.contentDOM.ownerDocument)}handleEvent(e){!rk(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,n);for(let s of i.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=QC(e),i=this.handlers,s=this.view.contentDOM;for(let r in n)if(r!="scroll"){let o=!n[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(s.removeEventListener(r,this.handleEvent),l=null),l||s.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!n[r]&&s.removeEventListener(r,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&q0.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),G.android&&G.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return G.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=K0.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||ZC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Es(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:G.safari&&!G.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Dd(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(s){Tt(n.state,s)}}}function QC(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let s=i.spec,r=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&n(l).handlers.push(Dd(i.value,a))}if(o)for(let l in o){let a=o[l];a&&n(l).observers.push(Dd(i.value,a))}}for(let i in on)n(i).handlers.push(on[i]);for(let i in Yt)n(i).observers.push(Yt[i]);return e}const K0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ZC="dthko",q0=[16,17,18,20,91,92,224,225],So=6;function Co(t){return Math.max(0,t)*.7+8}function ek(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class tk{constructor(e,n,i,s){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=aC(e.contentDOM),this.atoms=e.state.facet(ia).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ue.allowMultipleSelections)&&nk(e,n),this.dragging=sk(e,n)&&X0(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ek(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,s=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=mf(this.view);e.clientX-a.left<=s+So?n=-Co(s-e.clientX):e.clientX+a.right>=o-So&&(n=Co(e.clientX-o)),e.clientY-a.top<=r+So?i=-Co(r-e.clientY):e.clientY+a.bottom>=l-So&&(i=Co(e.clientY-l)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,i=j0(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function nk(t,e){let n=t.state.facet(T0);return n.length?n[0](e):G.mac?e.metaKey:e.ctrlKey}function ik(t,e){let n=t.state.facet(E0);return n.length?n[0](e):G.mac?!e.altKey:!e.ctrlKey}function sk(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Fr(t.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function rk(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Me.get(n))&&i.ignoreEvent(e))return!1;return!0}const on=Object.create(null),Yt=Object.create(null),G0=G.ie&&G.ie_version<15||G.ios&&G.webkit_version<604;function ok(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Y0(t,n.value)},50)}function sa(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function Y0(t,e){e=sa(t.state,uf,e);let{state:n}=t,i,s=1,r=n.toText(e),o=r.lines==n.selection.ranges.length;if(rh!=null&&n.selection.ranges.every(a=>a.empty)&&rh==r.toString()){let a=-1;i=n.changeByRange(c=>{let h=n.doc.lineAt(c.from);if(h.from==a)return{range:c};a=h.from;let f=n.toText((o?r.line(s++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:f},range:N.cursor(c.from+f.length)}})}else o?i=n.changeByRange(a=>{let c=r.line(s++);return{changes:{from:a.from,to:a.to,insert:c.text},range:N.cursor(a.from+c.length)}}):i=n.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Yt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};on.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Yt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Yt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};on.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(O0))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=ck(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new tk(t,e,n,i)),i&&t.observer.ignore(()=>{c0(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Rd(t,e,n,i){if(i==1)return N.cursor(e,n);if(i==2)return NC(t.state,e,n);{let s=Ue.find(t.docView,e),r=t.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:r.from,l=s?s.posAtEnd:r.to;return l<t.state.doc.length&&l==r.to&&l++,N.range(o,l)}}let Pd=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function lk(t,e,n,i){let s=Ue.find(t.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let o=s.coordsAt(r,-1);if(o&&Pd(n,i,o))return-1;let l=s.coordsAt(r,1);return l&&Pd(n,i,l)?1:o&&o.bottom>=i?-1:1}function Id(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:lk(t,n,e.clientX,e.clientY)}}const ak=G.ie&&G.ie_version<=11;let Nd=null,Bd=0,Fd=0;function X0(t){if(!ak)return t.detail;let e=Nd,n=Fd;return Nd=t,Fd=Date.now(),Bd=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Bd+1)%3:1}function ck(t,e){let n=Id(t,e),i=X0(e),s=t.state.selection;return{update(r){r.docChanged&&(n.pos=r.changes.mapPos(n.pos),s=s.map(r.changes))},get(r,o,l){let a=Id(t,r),c,h=Rd(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let f=Rd(t,n.pos,n.bias,i),u=Math.min(f.from,h.from),d=Math.max(f.to,h.to);h=u<h.from?N.range(u,d):N.range(d,u)}return o?s.replaceRange(s.main.extend(h.from,h.to)):l&&i==1&&s.ranges.length>1&&(c=hk(s,a.pos))?c:l?s.addRange(h):N.create([h])}}}function hk(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:s}=t.ranges[n];if(i<=e&&s>=e)return N.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}on.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.nearest(e.target);if(s&&s.isWidget){let r=s.posAtStart,o=r+s.length;(r>=n.to||o<=n.from)&&(n=N.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",sa(t.state,df,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};on.dragend=t=>(t.inputState.draggedContent=null,!1);function Hd(t,e,n,i){if(n=sa(t.state,uf,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&ik(t,e)?{from:r.from,to:r.to}:null,l={from:s,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}on.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,r=()=>{++s==n.length&&Hd(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Hd(t,e,i,!0),!0}return!1};on.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=G0?null:e.clipboardData;return n?(Y0(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(ok(t),!1)};function fk(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function uk(t){let e=[],n=[],i=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>s&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),s=o.number}i=!0}return{text:sa(t,df,e.join(t.lineBreak)),ranges:n,linewise:i}}let rh=null;on.copy=on.cut=(t,e)=>{let{text:n,ranges:i,linewise:s}=uk(t.state);if(!n&&!s)return!1;rh=s?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=G0?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",n),!0):(fk(t,n),!1)};const J0=ii.define();function Q0(t,e){let n=[];for(let i of t.facet(R0)){let s=i(t,e);s&&n.push(s)}return n.length?t.update({effects:n,annotations:J0.of(!0)}):null}function Z0(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Q0(t.state,e);n?t.dispatch(n):t.update([])}},10)}Yt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Z0(t)};Yt.blur=t=>{t.observer.clearSelectionRange(),Z0(t)};Yt.compositionstart=Yt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Yt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,G.chrome&&G.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Yt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};on.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),c=t.posAtDOM(l.endContainer,l.endOffset);return gf(t,{from:a,to:c,insert:t.state.toText(r)},null),!0}}let s;if(G.chrome&&G.android&&(s=K0.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return G.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),G.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Yt.compositionend(t,e),20),!1};const Vd=new Set;function dk(t){Vd.has(t)||(Vd.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Wd=["pre-wrap","normal","pre-line","break-spaces"];let Vs=!1;function $d(){Vs=!1}class pk{constructor(e){this.lineWrapping=e,this.doc=be.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Wd.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,i,s,r,o){let l=Wd.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=s,this.lineLength=r,a){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class mk{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class _n{constructor(e,n,i,s,r){this.from=e,this.length=n,this.top=i,this.height=s,this._content=r}get type(){return typeof this._content=="number"?St.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ei?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new _n(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Oe=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(Oe||(Oe={}));const el=.001;class Ct{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>el&&(Vs=!0),this.height=e)}replace(e,n,i){return Ct.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,s){let r=this,o=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:h,toB:f}=s[l],u=r.lineAt(a,Oe.ByPosNoHeight,i.setDoc(n),0,0),d=u.to>=c?u:r.lineAt(c,Oe.ByPosNoHeight,i,0,0);for(f+=d.to-c,c=d.to;l>0&&u.from<=s[l-1].toA;)a=s[l-1].fromA,h=s[l-1].fromB,l--,a<u.from&&(u=r.lineAt(a,Oe.ByPosNoHeight,i,0,0));h+=u.from-a,a=u.from;let p=bf.build(i.setDoc(o),e,h,f);r=Sl(r,r.replace(a,c,p))}return r.updateHeight(i,0)}static empty(){return new It(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,s=0,r=0;for(;;)if(n==i)if(s>r*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(r>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(s<r){let l=e[n++];l&&(s+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new gk(Ct.of(e.slice(0,n)),o,Ct.of(e.slice(i)))}}function Sl(t,e){return t==e?t:(t.constructor!=e.constructor&&(Vs=!0),e)}Ct.prototype.size=1;class eb extends Ct{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,s){return new _n(s,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,n,i,s,r,o){e<=r+this.length&&n>=r&&o(this.blockAt(0,i,s,r))}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class It extends eb{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,s){return new _n(s,this.length,i,this.height,this.breaks)}replace(e,n,i){let s=i[0];return i.length==1&&(s instanceof It||s instanceof et&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof et?s=new It(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ct.of(i)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class et extends Ct{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,r=s-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:l}}blockAt(e,n,i,s){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),h=n.doc.lineAt(c),f=l+h.length*a,u=Math.max(i,e-f/2);return new _n(h.from,h.length,u,f,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:h,length:f}=n.doc.line(r+c);return new _n(h,f,i+l*c,l,0)}}lineAt(e,n,i,s,r){if(n==Oe.ByHeight)return this.blockAt(e,i,s,r);if(n==Oe.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new _n(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),h=l+c.length*a,f=c.number-o,u=s+l*f+a*(c.from-r-f);return new _n(c.from,c.length,Math.max(s,Math.min(u,s+this.height-h)),h,0)}forEachLine(e,n,i,s,r,o){e=Math.max(e,r),n=Math.min(n,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let h=e,f=s;h<=n;){let u=i.doc.lineAt(h);if(h==e){let p=u.number-l;f+=a*p+c*(e-r-p)}let d=a+c*u.length;o(new _n(u.from,u.length,f,d,0)),f+=d,h=u.to+1}}replace(e,n,i){let s=this.length-n;if(s>0){let r=i[i.length-1];r instanceof et?i[i.length-1]=new et(r.length+s):i.push(null,new et(s-1))}if(e>0){let r=i[0];r instanceof et?i[0]=new et(e+r.length):i.unshift(new et(e-1),null)}return Ct.of(i)}decomposeLeft(e,n){n.push(new et(e-1),null)}decomposeRight(e,n){n.push(null,new et(this.length-e-1))}updateHeight(e,n=0,i=!1,s){let r=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],l=Math.max(n,s.from),a=-1;for(s.from>n&&o.push(new et(s.from-n-1).updateHeight(e,n));l<=r&&s.more;){let h=e.doc.lineAt(l).length;o.length&&o.push(null);let f=s.heights[s.index++];a==-1?a=f:Math.abs(f-a)>=el&&(a=-2);let u=new It(h,f);u.outdated=!1,o.push(u),l+=h+1}l<=r&&o.push(null,new et(r-l).updateHeight(e,l));let c=Ct.of(o);return(a<0||Math.abs(c.height-this.height)>=el||Math.abs(a-this.heightMetrics(e,n).perLine)>=el)&&(Vs=!0),Sl(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class gk extends Ct{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,n,i,s):this.right.blockAt(e,n,r,s+this.left.length+this.break)}lineAt(e,n,i,s,r){let o=s+this.left.height,l=r+this.left.length+this.break,a=n==Oe.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,n,i,s,r):this.right.lineAt(e,n,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let h=n==Oe.ByPosNoHeight?Oe.ByPosNoHeight:Oe.ByPos;return a?c.join(this.right.lineAt(l,h,i,o,l)):this.left.lineAt(l,h,i,s,r).join(c)}forEachLine(e,n,i,s,r,o){let l=s+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,s,r,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let c=this.lineAt(a,Oe.ByPos,i,s,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,r,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,l,a,o)}}replace(e,n,i){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&Ud(r,o-1),n<this.length){let l=r.length;this.decomposeRight(n,r),Ud(r,l)}return Ct.of(r)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ct.of(this.break?[e,null,n]:[e,n]):(this.left=Sl(this.left,e),this.right=Sl(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,s){let{left:r,right:o}=this,l=n+r.length+this.break,a=null;return s&&s.from<=n+r.length&&s.more?a=r=r.updateHeight(e,n,i,s):r.updateHeight(e,n,i),s&&s.from<=l+o.length&&s.more?a=o=o.updateHeight(e,l,i,s):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ud(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof et&&(i=t[e+1])instanceof et&&t.splice(e-1,3,new et(n.length+1+i.length))}const bk=5;class bf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof It?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new It(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new eb(o,s,i)):(o||r||s>=bk)&&this.addLineDeco(s,r,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new It(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new et(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof It)return e;let n=new It(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof It)&&!this.isCovered?this.nodes.push(new It(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof It&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,n,i,s){let r=new bf(i,e);return ge.spans(n,i,s,r,0),r.finish(i)}}function yk(t,e,n){let i=new vk;return ge.compare(t,e,n,i,0),i.changes}class vk{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,s){(e<n||i&&i.heightRelevant||s&&s.heightRelevant)&&Qo(e,n,this.changes,5)}}function wk(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,s=i.defaultView||window,r=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(s.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let h=c,f=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&f.overflow!="visible"){let u=h.getBoundingClientRect();r=Math.max(r,u.left),o=Math.min(o,u.right),l=Math.max(l,u.top),a=Math.min(c==t.parentNode?s.innerHeight:a,u.bottom)}c=f.position=="absolute"||f.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-n.left,right:Math.max(r,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function xk(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Sk(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Ha{constructor(e,n,i,s){this.from=e,this.to=n,this.size=i,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=n[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e,n){return Z.replace({widget:new Ck(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Ck extends si{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class jd{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zd,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Te.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(pf).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new pk(n),this.stateDeco=e.facet(Hr).filter(i=>typeof i!="function"),this.heightMap=Ct.empty().applyChanges(this.stateDeco,be.empty,this.heightOracle.setDoc(e.doc),[new qt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Z.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let s=i?n.head:n.anchor;if(!e.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);e.push(new ko(r,o))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?zd:new yf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(lr(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Hr).filter(h=>typeof h!="function");let s=e.changedRanges,r=qt.extendWithRanges(s,yk(i,this.stateDeco,e?e.changes:Ke.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$d(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Vs)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(I0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Te.RTL:Te.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,h=0;if(l.width&&l.height){let{scaleX:x,scaleY:C}=a0(n,l);(x>.005&&Math.abs(this.scaleX-x)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=x,this.scaleY=C,c|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,u=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=u)&&(this.paddingTop=f,this.paddingBottom=u,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=f0(e.scrollDOM);let p=(this.printing?Sk:wk)(n,this.paddingTop),g=p.top-this.pixelViewport.top,v=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!xk(e.dom))return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let x=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(x)&&(o=!0),o||s.lineWrapping&&Math.abs(w-this.contentDOMWidth)>s.charWidth){let{lineHeight:C,charWidth:M,textHeight:k}=e.docView.measureTextSize();o=C>0&&s.refresh(r,C,M,k,Math.max(5,w/M),x),o&&(e.docView.minWidth=0,c|=16)}g>0&&v>0?h=Math.max(g,v):g<0&&v<0&&(h=Math.min(g,v)),$d();for(let C of this.viewports){let M=C.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(C);this.heightMap=(o?Ct.empty().applyChanges(this.stateDeco,be.empty,this.heightOracle,[new qt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new mk(C.from,M))}Vs&&(c|=2)}let A=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new ko(s.lineAt(o-i*1e3,Oe.ByHeight,r,0,0).from,s.lineAt(l+(1-i)*1e3,Oe.ByHeight,r,0,0).to);if(n){let{head:c}=n.range;if(c<a.from||c>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=s.lineAt(c,Oe.ByPos,r,0,0),u;n.y=="center"?u=(f.top+f.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&c<a.from?u=f.top:u=f.bottom-h,a=new ko(s.lineAt(u-1e3/2,Oe.ByHeight,r,0,0).from,s.lineAt(u+h+1e3/2,Oe.ByHeight,r,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new ko(this.heightMap.lineAt(i,Oe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Oe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Oe.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(n,Oe.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||s<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let s of e)n.touchesRange(s.from,s.to)||i.push(new Ha(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=Te.LTR&&!i)return[];let l=[],a=(h,f,u,d)=>{if(f-h<r)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let m of g)if(m>h&&m<f){a(h,m-10,u,d),a(m+10,f,u,d);return}let v=Ak(e,m=>m.from>=u.from&&m.to<=u.to&&Math.abs(m.from-h)<r&&Math.abs(m.to-f)<r&&!g.some(w=>m.from<w&&m.to>w));if(!v){if(f<u.to&&n&&i&&n.visibleRanges.some(A=>A.from<=f&&A.to>=f)){let A=n.moveToLineBoundary(N.cursor(f),!1,!0).head;A>h&&(f=A)}let m=this.gapSize(u,h,f,d),w=i||m<2e6?m:2e6;v=new Ha(h,f,m,w)}l.push(v)},c=h=>{if(h.length<o||h.type!=St.Text)return;let f=kk(h.from,h.to,this.stateDeco);if(f.total<o)return;let u=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let g=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,m;if(u!=null){let w=_o(f,u),A=((this.visibleBottom-this.visibleTop)/2+g)/h.height;v=w-A,m=w+A}else v=(this.visibleTop-h.top-g)/h.height,m=(this.visibleBottom-h.top+g)/h.height;d=Ao(f,v),p=Ao(f,m)}else{let g=f.total*this.heightOracle.charWidth,v=s*this.heightOracle.charWidth,m=0;if(g>2e6)for(let M of e)M.from>=h.from&&M.from<h.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=M.size-M.displaySize);let w=this.pixelViewport.left+m,A=this.pixelViewport.right+m,x,C;if(u!=null){let M=_o(f,u),k=((A-w)/2+v)/g;x=M-k,C=M+k}else x=(w-v)/g,C=(A+v)/g;d=Ao(f,x),p=Ao(f,C)}d>h.from&&a(h.from,d,h,f),p<h.to&&a(p,h.to,h,f)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return l}gapSize(e,n,i,s){let r=_o(s,i)-_o(s,n);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){Ha.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Z.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];ge.spans(n,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let r=0;r<i.length&&!(s&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(s|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||lr(this.heightMap.lineAt(e,Oe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||lr(this.heightMap.lineAt(this.scaler.fromDOM(e),Oe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return lr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ko{constructor(e,n){this.from=e,this.to=n}}function kk(t,e,n){let i=[],s=t,r=0;return ge.spans(n,t,e,{span(){},point(o,l){o>s&&(i.push({from:s,to:o}),r+=o-s),s=l}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function Ao({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let s=0;;s++){let{from:r,to:o}=e[s],l=o-r;if(i<=l)return r+i;i-=l}}function _o(t,e){let n=0;for(let{from:i,to:s}of t.ranges){if(e<=s){n+=e-i;break}n+=s-i}return n/t.total}function Ak(t,e){for(let n of t)if(e(n))return n}const zd={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class yf{constructor(e,n,i){let s=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=n.lineAt(l,Oe.ByPos,e,0,0).top,h=n.lineAt(a,Oe.ByPos,e,0,0).bottom;return s+=h-c,{from:l,to:a,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let n=0,i=0,s=0;;n++){let r=n<this.viewports.length?this.viewports[n]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let n=0,i=0,s=0;;n++){let r=n<this.viewports.length?this.viewports[n]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}eq(e){return e instanceof yf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function lr(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new _n(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(s=>lr(s,e)):t._content)}const Mo=Y.define({combine:t=>t.join(" ")}),oh=Y.define({combine:t=>t.indexOf(!0)>-1}),lh=Mi.newName(),tb=Mi.newName(),nb=Mi.newName(),ib={"&light":"."+tb,"&dark":"."+nb};function ah(t,e,n){return new Mi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+i}})}const _k=ah("."+lh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ib),Mk={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Va=G.ie&&G.ie_version<=11;class Tk{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new cC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(G.ie&&G.ie_version<=11||G.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&G.android&&e.constructor.EDIT_CONTEXT!==!1&&!(G.chrome&&G.chrome_version<126)&&(this.editContext=new Ok(e),e.state.facet(zn)&&(e.contentDOM.editContext=this.editContext.editContext)),Va&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(zn)?i.root.activeElement!=this.dom:!Jo(this.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(G.ie&&G.ie_version<=11||G.android&&G.chrome)&&!i.state.selection.main.empty&&s.focusNode&&xr(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Fr(e.root);if(!n)return!1;let i=G.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Ek(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let s=Jo(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fC(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Mk),Va&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Va&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Es(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,s=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:s}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Jo(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new KC(this.view,e,n,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,s=z0(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Kd(n,e.previousSibling||e.target.previousSibling,-1),s=Kd(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(zn)!=e.state.facet(zn)&&(e.view.contentDOM.editContext=e.state.facet(zn)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Kd(t,e,n){for(;e;){let i=Me.get(e);if(i&&i.parent==t)return i;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function qd(t,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return xr(o.node,o.offset,s,r)&&([n,i,s,r]=[s,r,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}}function Ek(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return qd(t,s)}let n=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?qd(t,n):null}class Ok{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:r,head:o}=s,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let c={from:l,to:a,insert:be.of(i.text.split(`
`))};if(c.from==this.from&&r<this.from?c.from=r:c.to==this.to&&r>this.to&&(c.to=r),c.from==c.to&&!c.insert.length){let h=N.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(s)||e.dispatch({selection:h,userEvent:"select"});return}if((G.mac||G.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:l,to:a,insert:be.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let h=this.to-this.from+(c.to-c.from+c.insert.length);gf(e,c,N.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let s=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,s.push(r)}n.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(a<c){let h=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(Z.mark({attributes:{style:h}}).range(a,c))}}}e.dispatch({effects:B0.of(Z.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Fr(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,c)=>{if(i)return;let h=c.length-(o-r);if(s&&o>=s.to)if(s.from==r&&s.to==o&&s.insert.eq(c)){s=this.pendingContextChange=null,n+=h,this.to+=h;return}else s=null,this.revertPending(e.state);if(r+=n,o+=n,o<=this.from)this.from+=h,this.to+=h;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=h}n+=h}),s&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(r=>i(r,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||hC(e.parent)||document,this.viewState=new jd(e.state||ue.create(e)),e.scrollTo&&e.scrollTo.is(xo)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ss).map(s=>new Na(s));for(let s of this.plugins)s.update(this);this.observer=new Tk(this),this.inputState=new JC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ad(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof qe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,s,r=this.state;for(let u of e){if(u.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=u.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(u=>u.annotation(J0))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Q0(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(h=null)):this.observer.clear(),r.facet(ue.phrases)!=this.state.facet(ue.phrases))return this.setState(r);s=xl.create(this,r,e),s.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let u of e){if(f&&(f=f.map(u.changes)),u.scrollIntoView){let{main:d}=u.state.selection;f=new Os(d.empty?d:N.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of u.effects)d.is(xo)&&(f=d.value.clip(this.state))}this.viewState.update(s,f),this.bidiCache=Cl.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(rr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(u=>u.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Mo)!=s.state.facet(Mo)&&(this.viewState.mustMeasureContent=!0),(n||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let u of this.state.facet(nh))try{u(s)}catch(d){Tt(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!z0(this,h)&&c.force&&Es(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new jd(e),this.plugins=e.facet(Ss).map(i=>new Na(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Ad(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ss),i=e.state.facet(Ss);if(n!=i){let s=[];for(let r of i){let o=n.indexOf(r);if(o<0)s.push(new Na(r));else{let l=this.plugins[o];l.mustUpdate=e,s.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){Tt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(f0(i))r=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(s);r=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(d=>{try{return d.read(this)}catch(p){return Tt(this.state,p),Gd}}),f=xl.create(this,this.state,[]),u=!1;f.flags|=a,n?n.flags|=a:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),u=this.docView.update(f),u&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(h[d]!=Gd)try{let p=c[d];p.write&&p.write(h[d],this)}catch(p){Tt(this.state,p)}if(u&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(p>1||p<-1){s=s+p,i.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(nh))l(n)}get themeClasses(){return lh+" "+(this.state.facet(oh)?nb:tb)+" "+this.state.facet(Mo)}updateAttrs(){let e=Yd(this,F0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(zn)?"true":"false",class:"cm-content",style:`${G.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Yd(this,pf,n);let i=this.observer.ignore(()=>{let s=Jc(this.contentDOM,this.contentAttrs,n),r=Jc(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let s of i.effects)if(s.is(q.announce)){n&&(this.announceDOM.textContent=""),n=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(rr);let e=this.state.facet(q.cspNonce);Mi.mount(this.root,this.styleModules.concat(_k).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Fa(this,e,Od(this,e,n,i))}moveByGroup(e,n){return Fa(this,e,Od(this,e,n,i=>$C(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),r=i[n?i.length-1:0];return N.cursor(r.side(n,s)+e.from,r.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,i=!0){return WC(this,e,n,i)}moveVertically(e,n,i){return Fa(this,e,UC(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),U0(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),o=r[yi.find(r,e-s.from,-1,n)];return to(i,o.dir==Te.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(P0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Lk)return _0(e.length);let n=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||A0(r.isolates,i=kd(this,e))))return r.order;i||(i=kd(this,e));let s=AC(e.text,n,i);return this.bidiCache.push(new Cl(e.from,e.to,n,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||G.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{c0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return xo.of(new Os(typeof e=="number"?N.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return xo.of(new Os(N.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return $e.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return $e.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Mi.newName(),s=[Mo.of(i),rr.of(ah(`.${i}`,e))];return n&&n.dark&&s.push(oh.of(!0)),s}static baseTheme(e){return cs.lowest(rr.of(ah("."+lh,e,ib)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),s=i&&Me.get(i)||Me.get(e);return((n=s?.rootView)===null||n===void 0?void 0:n.view)||null}}q.styleModule=rr;q.inputHandler=D0;q.clipboardInputFilter=uf;q.clipboardOutputFilter=df;q.scrollHandler=N0;q.focusChangeEffect=R0;q.perLineTextDirection=P0;q.exceptionSink=L0;q.updateListener=nh;q.editable=zn;q.mouseSelectionStyle=O0;q.dragMovesSelection=E0;q.clickAddsSelectionRange=T0;q.decorations=Hr;q.outerDecorations=H0;q.atomicRanges=ia;q.bidiIsolatedRanges=V0;q.scrollMargins=W0;q.darkTheme=oh;q.cspNonce=Y.define({combine:t=>t.length?t[0]:""});q.contentAttributes=pf;q.editorAttributes=F0;q.lineWrapping=q.contentAttributes.of({class:"cm-lineWrapping"});q.announce=le.define();const Lk=4096,Gd={};class Cl{constructor(e,n,i,s,r,o){this.from=e,this.to=n,this.dir=i,this.isolates=s,this.fresh=r,this.order=o}static update(e,n){if(n.empty&&!e.some(r=>r.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:Te.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==s&&!n.touchesRange(o.from,o.to)&&i.push(new Cl(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Yd(t,e,n){for(let i=t.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(t):r;o&&Xc(o,n)}return n}const Dk=G.mac?"mac":G.windows?"win":G.linux?"linux":"key";function Rk(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let s,r,o,l;for(let a=0;a<n.length-1;++a){const c=n[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function To(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Pk=cs.default(q.domEventHandlers({keydown(t,e){return rb(sb(e.state),t,e,"editor")}})),ra=Y.define({enables:Pk}),Xd=new WeakMap;function sb(t){let e=t.facet(ra),n=Xd.get(e);return n||Xd.set(e,n=Bk(e.reduce((i,s)=>i.concat(s),[]))),n}function Ik(t,e,n){return rb(sb(t.state),e,t,n)}let mi=null;const Nk=4e3;function Bk(t,e=Dk){let n=Object.create(null),i=Object.create(null),s=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c,h)=>{var f,u;let d=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>Rk(m,e));for(let m=1;m<p.length;m++){let w=p.slice(0,m).join(" ");s(w,!0),d[w]||(d[w]={preventDefault:!0,stopPropagation:!1,run:[A=>{let x=mi={view:A,prefix:w,scope:o};return setTimeout(()=>{mi==x&&(mi=null)},Nk),!0}]})}let g=p.join(" ");s(g,!1);let v=d[g]||(d[g]={preventDefault:!1,stopPropagation:!1,run:((u=(f=d._any)===null||f===void 0?void 0:f.run)===null||u===void 0?void 0:u.slice())||[]});a&&v.run.push(a),c&&(v.preventDefault=!0),h&&(v.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let h=n[c]||(n[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let u in h)h[u].run.push(d=>f(d,ch))}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}let ch=null;function rb(t,e,n,i){ch=e;let s=rC(e),r=At(s,0),o=An(r)==s.length&&s!=" ",l="",a=!1,c=!1,h=!1;mi&&mi.view==n&&mi.scope==i&&(l=mi.prefix+" ",q0.indexOf(e.keyCode)<0&&(c=!0,mi=null));let f=new Set,u=v=>{if(v){for(let m of v.run)if(!f.has(m)&&(f.add(m),m(n)))return v.stopPropagation&&(h=!0),!0;v.preventDefault&&(v.stopPropagation&&(h=!0),c=!0)}return!1},d=t[i],p,g;return d&&(u(d[l+To(s,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(G.windows&&e.ctrlKey&&e.altKey)&&!(G.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=Ti[e.keyCode])&&p!=s?(u(d[l+To(p,e,!0)])||e.shiftKey&&(g=Br[e.keyCode])!=s&&g!=p&&u(d[l+To(g,e,!1)]))&&(a=!0):o&&e.shiftKey&&u(d[l+To(s,e,!0)])&&(a=!0),!a&&u(d._any)&&(a=!0)),c&&(a=!0),a&&h&&e.stopPropagation(),ch=null,a}class so{constructor(e,n,i,s,r){this.className=e,this.left=n,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=ob(e);return[new so(n,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return Fk(e,n,i)}}function ob(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Te.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Jd(t,e,n,i){let s=t.coordsAtPos(e,n*2);if(!s)return i;let r=t.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,l=t.posAtCoords({x:r.left+1,y:o}),a=t.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function Fk(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),r=t.textDirection==Te.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=ob(t),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),f=l.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),u=l.right-(h?parseInt(h.paddingRight):0),d=sh(t,i,1),p=sh(t,s,-1),g=d.type==St.Text?d:null,v=p.type==St.Text?p:null;if(g&&(t.lineWrapping||d.widgetLineBreaks)&&(g=Jd(t,i,1,g)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=Jd(t,s,-1,v)),g&&v&&g.from==v.from&&g.to==v.to)return w(A(n.from,n.to,g));{let C=g?A(n.from,null,g):x(d,!1),M=v?A(null,n.to,v):x(p,!0),k=[];return(g||d).to<(v||p).from-(g&&v?1:0)||d.widgetLineBreaks>1&&C.bottom+t.defaultLineHeight/2<M.top?k.push(m(f,C.bottom,u,M.top)):C.bottom<M.top&&t.elementAtHeight((C.bottom+M.top)/2).type==St.Text&&(C.bottom=M.top=(C.bottom+M.top)/2),w(C).concat(k).concat(w(M))}function m(C,M,k,I){return new so(e,C-a.left,M-a.top,k-C,I-M)}function w({top:C,bottom:M,horizontal:k}){let I=[];for(let R=0;R<k.length;R+=2)I.push(m(k[R],C,k[R+1],M));return I}function A(C,M,k){let I=1e9,R=-1e9,W=[];function $(ee,re,se,te,ae){let de=t.coordsAtPos(ee,ee==k.to?-2:2),Ie=t.coordsAtPos(se,se==k.from?2:-2);!de||!Ie||(I=Math.min(de.top,Ie.top,I),R=Math.max(de.bottom,Ie.bottom,R),ae==Te.LTR?W.push(r&&re?f:de.left,r&&te?u:Ie.right):W.push(!r&&te?f:Ie.left,!r&&re?u:de.right))}let L=C??k.from,J=M??k.to;for(let ee of t.visibleRanges)if(ee.to>L&&ee.from<J)for(let re=Math.max(ee.from,L),se=Math.min(ee.to,J);;){let te=t.state.doc.lineAt(re);for(let ae of t.bidiSpans(te)){let de=ae.from+te.from,Ie=ae.to+te.from;if(de>=se)break;Ie>re&&$(Math.max(de,re),C==null&&de<=L,Math.min(Ie,se),M==null&&Ie>=J,ae.dir)}if(re=te.to+1,re>=se)break}return W.length==0&&$(L,C==null,J,M==null,t.textDirection),{top:I,bottom:R,horizontal:W}}function x(C,M){let k=l.top+(M?C.top:C.bottom);return{top:k,bottom:k,horizontal:[]}}}function Hk(t,e){return t.constructor==e.constructor&&t.eq(e)}class Vk{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(tl)!=e.state.facet(tl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(tl);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Hk(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[i].constructor&&s.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const tl=Y.define();function lb(t){return[$e.define(e=>new Vk(e,t)),tl.of(t)]}const Vr=Y.define({combine(t){return In(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Wk(t={}){return[Vr.of(t),$k,Uk,jk,I0.of(!0)]}function ab(t){return t.startState.facet(Vr)!=t.state.facet(Vr)}const $k=lb({above:!0,markers(t){let{state:e}=t,n=e.facet(Vr),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty||n.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:N.cursor(s.head,s.head>s.anchor?-1:1);for(let a of so.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=ab(t);return n&&Qd(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Qd(e.state,t)},class:"cm-cursorLayer"});function Qd(t,e){e.style.animationDuration=t.facet(Vr).cursorBlinkRate+"ms"}const Uk=lb({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:so.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||ab(t)},class:"cm-selectionLayer"}),jk=cs.highest(q.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),cb=le.define({map(t,e){return t==null?null:e.mapPos(t)}}),ar=lt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(cb)?i.value:n,t)}}),zk=$e.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(ar);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(ar)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(ar),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(ar)!=t&&this.view.dispatch({effects:cb.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Kk(){return[ar,zk]}function Zd(t,e,n,i,s){e.lastIndex=0;for(let r=t.iterRange(n,i),o=n,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)s(o+l.index,l)}function qk(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:s,to:r}of n)s=Math.max(t.state.doc.lineAt(s).from,s-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class Gk{constructor(e){const{regexp:n,decoration:i,decorate:s,boundary:r,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(l,a,c,h)=>s(h,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,h)=>{let f=i(l,a,c);f&&h(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,h)=>h(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let n=new Qn,i=n.add.bind(n);for(let{from:s,to:r}of qk(e,this.maxLength))Zd(e.state.doc,this.regexp,s,r,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(a,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),i,s):n}updateRange(e,n,i,s){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,s);if(l>=o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,h=Math.max(r.from,a.from),f=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){h=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let u=[],d,p=(g,v,m)=>u.push(m.range(g,v));if(a==c)for(this.regexp.lastIndex=h-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,p);else Zd(e.state.doc,this.regexp,h,f,(g,v)=>this.addMatch(v,e,g,p));n=n.update({filterFrom:h,filterTo:f,filter:(g,v)=>g<h||v>f,add:u})}}return n}}const hh=/x/.unicode!=null?"gu":"g",Yk=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,hh),Xk={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wa=null;function Jk(){var t;if(Wa==null&&typeof document<"u"&&document.body){let e=document.body.style;Wa=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Wa||!1}const nl=Y.define({combine(t){let e=In(t,{render:null,specialChars:Yk,addSpecialChars:null});return(e.replaceTabs=!Jk())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hh)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hh)),e}});function Qk(t={}){return[nl.of(t),Zk()]}let ep=null;function Zk(){return ep||(ep=$e.fromClass(class{constructor(t){this.view=t,this.decorations=Z.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(nl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Gk({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:s}=n.state,r=At(e[0],0);if(r==9){let o=s.lineAt(i),l=n.state.tabSize,a=hs(o.text,l,i-o.from);return Z.replace({widget:new iA((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Z.replace({widget:new nA(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(nl);t.startState.facet(nl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const eA="";function tA(t){return t>=32?eA:t==10?"":String.fromCharCode(9216+t)}class nA extends si{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=tA(this.code),i=e.state.phrase("Control character")+" "+(Xk[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,n);if(s)return s;let r=document.createElement("span");return r.textContent=n,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class iA extends si{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function sA(){return oA}const rA=Z.line({class:"cm-activeLine"}),oA=$e.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let s=t.lineBlockAt(i.head);s.from>e&&(n.push(rA.range(s.from)),e=s.from)}return Z.set(n)}},{decorations:t=>t.decorations});class lA extends si{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?Bs(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),s=to(n[0],i.direction!="rtl"),r=parseInt(i.lineHeight);return s.bottom-s.top>r*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+r}:s}ignoreEvent(){return!1}}function aA(t){let e=$e.fromClass(class{constructor(n){this.view=n,this.placeholder=t?Z.set([Z.widget({widget:new lA(t),side:1}).range(0)]):Z.none}get decorations(){return this.view.state.doc.length?Z.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,q.contentAttributes.of({"aria-placeholder":t})]:e}const fh=2e3;function cA(t,e,n){let i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),r=[];if(e.off>fh||n.off>fh||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=i;a<=s;a++){let c=t.doc.line(a);c.length<=l&&r.push(N.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=i;a<=s;a++){let c=t.doc.line(a),h=Uc(c.text,o,t.tabSize,!0);if(h<0)r.push(N.cursor(c.to));else{let f=Uc(c.text,l,t.tabSize);r.push(N.range(c.from+h,c.from+f))}}}return r}function hA(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function tp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),s=n-i.from,r=s>fh?-1:s==i.length?hA(t,e.clientX):hs(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:r,off:s}}function fA(t,e){let n=tp(t,e),i=t.state.selection;return n?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(n.line).from),o=s.state.doc.lineAt(r);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},i=i.map(s.changes)}},get(s,r,o){let l=tp(t,s);if(!l)return i;let a=cA(t.state,n,l);return a.length?o?N.create(a.concat(i.ranges)):N.create(a):i}}:null}function uA(t){let e=(n=>n.altKey&&n.button==0);return q.mouseSelectionStyle.of((n,i)=>e(i)?fA(n,i):null)}const dA={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},pA={style:"cursor: crosshair"};function mA(t={}){let[e,n]=dA[t.key||"Alt"],i=$e.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||n(s))},keyup(s){(s.keyCode==e||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[i,q.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?pA:null})]}const Qs="-10000px";class hb{constructor(e,n,i,s){this.facet=n,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,n){var i;let s=e.state.facet(this.facet),r=s.filter(a=>a);if(s===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=n?[]:null;for(let a=0;a<r.length;a++){let c=r[a],h=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let u=this.tooltips[f];u&&u.create==c.create&&(h=f)}if(h<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let f=o[a]=this.tooltipViews[h];l&&(l[a]=n[h]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return n&&(l.forEach((a,c)=>n[c]=a),n.length=l.length),this.input=s,this.tooltips=r,this.tooltipViews=o,!0}}function gA(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const $a=Y.define({combine:t=>{var e,n,i;return{position:G.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||gA}}}),np=new WeakMap,vf=$e.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet($a);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new hb(t,wf,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet($a);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=Qs,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(G.gecko)n=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Qs&&r.style.left=="0px"){let o=r.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=mf(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet($a).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:i,scaleX:s,scaleY:r}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:h}=c,f=t.pos[l],u=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(n.top,i.top)||f.top>=Math.min(n.bottom,i.bottom)||f.right<Math.max(n.left,i.left)-.1||f.left>Math.min(n.right,i.right)+.1)){h.style.top=Qs;continue}let d=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,g=u.right-u.left,v=(e=np.get(c))!==null&&e!==void 0?e:u.bottom-u.top,m=c.offset||yA,w=this.view.textDirection==Te.LTR,A=u.width>i.right-i.left?w?i.left:i.right-u.width:w?Math.max(i.left,Math.min(f.left-(d?14:0)+m.x,i.right-g)):Math.min(Math.max(i.left,f.left-g+(d?14:0)-m.x),i.right-g),x=this.above[l];!a.strictSide&&(x?f.top-v-p-m.y<i.top:f.bottom+v+p+m.y>i.bottom)&&x==i.bottom-f.bottom>f.top-i.top&&(x=this.above[l]=!x);let C=(x?f.top-i.top:i.bottom-f.bottom)-p;if(C<v&&c.resize!==!1){if(C<this.view.defaultLineHeight){h.style.top=Qs;continue}np.set(c,v),h.style.height=(v=C)/r+"px"}else h.style.height&&(h.style.height="");let M=x?f.top-v-p-m.y:f.bottom+p+m.y,k=A+g;if(c.overlap!==!0)for(let I of o)I.left<k&&I.right>A&&I.top<M+v&&I.bottom>M&&(M=x?I.top-v-2-p:I.bottom+p+2);if(this.position=="absolute"?(h.style.top=(M-t.parent.top)/r+"px",ip(h,(A-t.parent.left)/s)):(h.style.top=M/r+"px",ip(h,A/s)),d){let I=f.left+(w?m.x:-m.x)-(A+14-7);d.style.left=I/s+"px"}c.overlap!==!0&&o.push({left:A,top:M,right:k,bottom:M+v}),h.classList.toggle("cm-tooltip-above",x),h.classList.toggle("cm-tooltip-below",!x),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Qs}},{eventObservers:{scroll(){this.maybeMeasure()}}});function ip(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const bA=q.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),yA={x:0,y:0},wf=Y.define({enables:[vf,bA]}),kl=Y.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class oa{static create(e){return new oa(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new hb(e,kl,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(n===void 0)n=s;else if(n!==s)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const vA=wf.compute([kl],t=>{let e=t.facet(kl);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:oa.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class wA{constructor(e,n,i,s,r){this.view=e,this.source=n,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let s,r=1;if(i instanceof bi)s=i.posAtStart;else{if(s=e.posAtCoords(n),s==null)return;let l=e.coordsAtPos(s);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(s)).find(h=>h.from<=s&&h.to>=s),c=a&&a.dir==Te.RTL?-1:1;r=n.x<l.left?-c:c}let o=this.source(e,s,r);if(o?.then){let l=this.pending={pos:s};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Tt(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(vf),n=e?e.manager.tooltips.findIndex(i=>i.create==oa.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:r}=this;if(s.length&&r&&!xA(r.dom,e)||this.pending){let{pos:o}=s[0]||this.pending,l=(i=(n=s[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!SA(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Eo=4;function xA(t,e){let{left:n,right:i,top:s,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();s=Math.min(l.top,s),r=Math.max(l.bottom,r)}return e.clientX>=n-Eo&&e.clientX<=i+Eo&&e.clientY>=s-Eo&&e.clientY<=r+Eo}function SA(t,e,n,i,s,r){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>s||Math.min(o.bottom,l)<s)return!1;let a=t.posAtCoords({x:i,y:s},!1);return a>=e&&a<=n}function CA(t,e={}){let n=le.define(),i=lt.define({create(){return[]},update(s,r){if(s.length&&(e.hideOnChange&&(r.docChanged||r.selection)?s=[]:e.hideOn&&(s=s.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of s){let a=r.changes.mapPos(l.pos,-1,xt.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}s=o}for(let o of r.effects)o.is(n)&&(s=o.value),o.is(kA)&&(s=[]);return s},provide:s=>kl.from(s)});return{active:i,extension:[i,$e.define(s=>new wA(s,t,i,n,e.hoverTime||300)),vA]}}function fb(t,e){let n=t.plugin(vf);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const kA=le.define(),sp=Y.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Wr(t,e){let n=t.plugin(ub),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const ub=$e.fromClass(class{constructor(t){this.input=t.state.facet($r),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(sp);this.top=new Oo(t,!0,e.topContainer),this.bottom=new Oo(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(sp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Oo(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Oo(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet($r);if(n!=this.input){let i=n.filter(a=>a),s=[],r=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),h;c<0?(h=a(t.view),l.push(h)):(h=this.panels[c],h.update&&h.update(t)),s.push(h),(h.top?r:o).push(h)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>q.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Oo{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=rp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=rp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rp(t){let e=t.nextSibling;return t.remove(),e}const $r=Y.define({enables:ub});class ei extends ns{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ei.prototype.elementClass="";ei.prototype.toDOM=void 0;ei.prototype.mapMode=xt.TrackBefore;ei.prototype.startSide=ei.prototype.endSide=-1;ei.prototype.point=!0;const il=Y.define(),AA=Y.define(),_A={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ge.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Cr=Y.define();function MA(t){return[db(),Cr.of({..._A,...t})]}const op=Y.define({combine:t=>t.some(e=>e)});function db(t){return[TA]}const TA=$e.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Cr).map(e=>new ap(t,e)),this.fixed=!t.state.facet(op);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(op)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ge.iter(this.view.state.facet(il),this.view.viewport.from),i=[],s=this.gutters.map(r=>new EA(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==St.Text&&o){uh(n,i,l.from);for(let a of s)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of s)a.widget(this.view,l)}else if(r.type==St.Text){uh(n,i,r.from);for(let o of s)o.line(this.view,r,i)}else if(r.widget)for(let o of s)o.widget(this.view,r);for(let r of s)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Cr),n=t.state.facet(Cr),i=t.docChanged||t.heightChanged||t.viewportChanged||!ge.eq(t.startState.facet(il),t.state.facet(il),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(i=!0);else{i=!0;let s=[];for(let r of n){let o=e.indexOf(r);o<0?s.push(new ap(this.view,r)):(this.gutters[o].update(t),s.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>q.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,s=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Te.LTR?{left:i,right:s}:{right:i,left:s}})});function lp(t){return Array.isArray(t)?t:[t]}function uh(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class EA{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ge.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:s}=this,r=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==s.elements.length){let l=new pb(e,o,r,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,o,r,i);this.height=n.bottom,this.i++}line(e,n,i){let s=[];uh(this.cursor,s,n.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,n,s);r&&s.unshift(r);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),s=i?[i]:null;for(let r of e.state.facet(AA)){let o=r(e,n.widget,n);o&&(s||(s=[])).push(o)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class ap{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=s.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=lp(n.markers(e)),n.initialSpacer&&(this.spacer=new pb(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=lp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!ge.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class pb{constructor(e,n,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,s)}update(e,n,i,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),OA(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<n.length?n[r++]:null,c=!1;if(a){let h=a.elementClass;h&&(i+=" "+h);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(s);let f=s.nextSibling;s.remove(),s=f}}if(!a)break;a.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function OA(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const LA=Y.define(),DA=Y.define(),Cs=Y.define({combine(t){return In(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let s in n){let r=i[s],o=n[s];i[s]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class Ua extends ei{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ja(t,e){return t.state.facet(Cs).formatNumber(e,t.state)}const RA=Cr.compute([Cs],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(LA)},lineMarker(e,n,i){return i.some(s=>s.toDOM)?null:new Ua(ja(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let s of e.state.facet(DA)){let r=s(e,n,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Cs)!=e.state.facet(Cs),initialSpacer(e){return new Ua(ja(e,cp(e.state.doc.lines)))},updateSpacer(e,n){let i=ja(n.view,cp(n.view.state.doc.lines));return i==e.number?e:new Ua(i)},domEventHandlers:t.facet(Cs).domEventHandlers,side:"before"}));function PA(t={}){return[Cs.of(t),db(),RA]}function cp(t){let e=9;for(;e<t;)e=e*10+9;return e}const IA=new class extends ei{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},NA=il.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.head).from;s>n&&(n=s,e.push(IA.range(s)))}return ge.of(e)});function BA(){return NA}const FA=1024;let HA=0;class za{constructor(e,n){this.from=e,this.to=n}}let pe=class{constructor(e={}){this.id=HA++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Pn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}};pe.closedBy=new pe({deserialize:t=>t.split(" ")});pe.openedBy=new pe({deserialize:t=>t.split(" ")});pe.group=new pe({deserialize:t=>t.split(" ")});pe.isolate=new pe({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});pe.contextHash=new pe({perNode:!0});pe.lookAhead=new pe({perNode:!0});pe.mounted=new pe({perNode:!0});class Al{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[pe.mounted.id]}}const VA=Object.create(null);let Pn=class mb{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):VA,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new mb(e.name||"",n,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(pe.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(pe.group),r=-1;r<(s?s.length:0);r++){let o=n[r<0?i.name:s[r]];if(o)return o}}}};Pn.none=new Pn("",Object.create(null),0,8);const Lo=new WeakMap,hp=new WeakMap;var rt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(rt||(rt={}));class dt{constructor(e,n,i,s,r){if(this.type=e,this.children=n,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Al.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let s=i.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new ph(this.topNode,e)}cursorAt(e,n=0,i=0){let s=Lo.get(this)||this.topNode,r=new ph(s);return r.moveTo(e,n),Lo.set(this,r._tree),r}get topNode(){return new Gt(this,0,0,null)}resolve(e,n=0){let i=Ur(Lo.get(this)||this.topNode,e,n,!1);return Lo.set(this,i),i}resolveInner(e,n=0){let i=Ur(hp.get(this)||this.topNode,e,n,!0);return hp.set(this,i),i}resolveStack(e,n=0){return UA(this,e,n)}iterate(e){let{enter:n,leave:i,from:s=0,to:r=this.length}=e,o=e.mode||0,l=(o&rt.IncludeAnonymous)>0;for(let a=this.cursor(o|rt.IncludeAnonymous);;){let c=!1;if(a.from<=r&&a.to>=s&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Cf(Pn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,s)=>new dt(this.type,n,i,s,this.propValues),e.makeTree||((n,i,s)=>new dt(Pn.none,n,i,s)))}static build(e){return jA(e)}}dt.empty=new dt(Pn.none,[],[],0);class xf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xf(this.buffer,this.index)}}class Oi{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Pn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],s=this.set.types[n],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,n,i,s,r){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(gb(r,s,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let s=this.buffer,r=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){r[a++]=s[l++],r[a++]=s[l++]-i;let c=r[a++]=s[l++]-i;r[a++]=s[l++]-e,o=Math.max(o,c)}return new Oi(r,o,this.set)}}function gb(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Ur(t,e,n,i){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Gt&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:rt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Gt&&o.index<0&&((s=l.enter(e,n,r))===null||s===void 0?void 0:s.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,r);if(!o)return t;t=o}}class bb{cursor(e=0){return new ph(this,e)}getChild(e,n=null,i=null){let s=fp(this,e,n,i);return s.length?s[0]:null}getChildren(e,n=null,i=null){return fp(this,e,n,i)}resolve(e,n=0){return Ur(this,e,n,!1)}resolveInner(e,n=0){return Ur(this,e,n,!0)}matchContext(e){return dh(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(i=n,n=s.prevSibling):n=s}return i}get node(){return this}get next(){return this.parent}}class Gt extends bb{constructor(e,n,i,s){super(),this._tree=e,this.from=n,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,s,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=n>0?l.length:-1;e!=c;e+=n){let h=l[e],f=a[e]+o.from;if(gb(s,i,f,f+h.length)){if(h instanceof Oi){if(r&rt.ExcludeBuffers)continue;let u=h.findChild(0,h.buffer.length,n,i-f,s);if(u>-1)return new vi(new WA(o,h,e,f),null,u)}else if(r&rt.IncludeAnonymous||!h.type.isAnonymous||Sf(h)){let u;if(!(r&rt.IgnoreMounts)&&(u=Al.get(h))&&!u.overlay)return new Gt(u.tree,f,e,o);let d=new Gt(h,f,e,o);return r&rt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?h.children.length-1:0,n,i,s)}}}if(r&rt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let s;if(!(i&rt.IgnoreOverlays)&&(s=Al.get(this._tree))&&s.overlay){let r=e-this.from;for(let{from:o,to:l}of s.overlay)if((n>0?o<=r:o<r)&&(n<0?l>=r:l>r))return new Gt(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function fp(t,e,n,i){let s=t.cursor(),r=[];if(!s.firstChild())return r;if(n!=null){for(let o=!1;!o;)if(o=s.type.is(n),!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function dh(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class WA{constructor(e,n,i,s){this.parent=e,this.buffer=n,this.index=i,this.start=s}}class vi extends bb{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,i);return r<0?null:new vi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&rt.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return r<0?null:new vi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vi(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new vi(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];e.push(i.slice(s,r,o)),n.push(0)}return new dt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function yb(t){if(!t.length)return null;let e=0,n=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>n.from||o.to<n.to)&&(n=o,e=r)}let i=n instanceof Gt&&n.index<0?null:n.parent,s=t.slice();return i?s[e]=i:s.splice(e,1),new $A(s,n)}class $A{constructor(e,n){this.heads=e,this.node=n}get next(){return yb(this.heads)}}function UA(t,e,n){let i=t.resolveInner(e,n),s=null;for(let r=i instanceof Gt?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(s||(s=[i])).push(o.resolve(e,n)),r=o}else{let o=Al.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Gt(o.tree,o.overlay[0].from+r.from,-1,r);(s||(s=[i])).push(Ur(l,e,n,!1))}}return s?yb(s):i}class ph{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Gt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Gt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&rt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&rt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&rt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:n,parent:i}=s)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let r=n+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&rt.IncludeAnonymous||l instanceof Oi||!l.type.isAnonymous||Sf(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,i=r+1;break e}s=this.stack[--r]}for(let s=i;s<this.stack.length;s++)n=new vi(this.buffer,n,this.stack[s]);return this.bufferNode=new vi(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return dh(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return dh(this._tree,e,s);let o=i[n.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function Sf(t){return t.children.some(e=>e instanceof Oi||!e.type.isAnonymous||Sf(e))}function jA(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:s=FA,reused:r=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new xf(n,n.length):n,a=i.types,c=0,h=0;function f(C,M,k,I,R,W){let{id:$,start:L,end:J,size:ee}=l,re=h,se=c;for(;ee<0;)if(l.next(),ee==-1){let Ne=r[$];k.push(Ne),I.push(L-C);return}else if(ee==-3){c=$;return}else if(ee==-4){h=$;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let te=a[$],ae,de,Ie=L-C;if(J-L<=s&&(de=v(l.pos-M,R))){let Ne=new Uint16Array(de.size-de.skip),Ce=l.pos-de.size,Ze=Ne.length;for(;l.pos>Ce;)Ze=m(de.start,Ne,Ze);ae=new Oi(Ne,J-de.start,i),Ie=de.start-C}else{let Ne=l.pos-ee;l.next();let Ce=[],Ze=[],Lt=$>=o?$:-1,Jt=0,kt=J;for(;l.pos>Ne;)Lt>=0&&l.id==Lt&&l.size>=0?(l.end<=kt-s&&(p(Ce,Ze,L,Jt,l.end,kt,Lt,re,se),Jt=Ce.length,kt=l.end),l.next()):W>2500?u(L,Ne,Ce,Ze):f(L,Ne,Ce,Ze,Lt,W+1);if(Lt>=0&&Jt>0&&Jt<Ce.length&&p(Ce,Ze,L,Jt,L,kt,Lt,re,se),Ce.reverse(),Ze.reverse(),Lt>-1&&Jt>0){let Qt=d(te,se);ae=Cf(te,Ce,Ze,0,Ce.length,0,J-L,Qt,Qt)}else ae=g(te,Ce,Ze,J-L,re-J,se)}k.push(ae),I.push(Ie)}function u(C,M,k,I){let R=[],W=0,$=-1;for(;l.pos>M;){let{id:L,start:J,end:ee,size:re}=l;if(re>4)l.next();else{if($>-1&&J<$)break;$<0&&($=ee-s),R.push(L,J,ee),W++,l.next()}}if(W){let L=new Uint16Array(W*4),J=R[R.length-2];for(let ee=R.length-3,re=0;ee>=0;ee-=3)L[re++]=R[ee],L[re++]=R[ee+1]-J,L[re++]=R[ee+2]-J,L[re++]=re;k.push(new Oi(L,R[2]-J,i)),I.push(J-C)}}function d(C,M){return(k,I,R)=>{let W=0,$=k.length-1,L,J;if($>=0&&(L=k[$])instanceof dt){if(!$&&L.type==C&&L.length==R)return L;(J=L.prop(pe.lookAhead))&&(W=I[$]+L.length+J)}return g(C,k,I,R,W,M)}}function p(C,M,k,I,R,W,$,L,J){let ee=[],re=[];for(;C.length>I;)ee.push(C.pop()),re.push(M.pop()+k-R);C.push(g(i.types[$],ee,re,W-R,L-W,J)),M.push(R-k)}function g(C,M,k,I,R,W,$){if(W){let L=[pe.contextHash,W];$=$?[L].concat($):[L]}if(R>25){let L=[pe.lookAhead,R];$=$?[L].concat($):[L]}return new dt(C,M,k,I,$)}function v(C,M){let k=l.fork(),I=0,R=0,W=0,$=k.end-s,L={size:0,start:0,skip:0};e:for(let J=k.pos-C;k.pos>J;){let ee=k.size;if(k.id==M&&ee>=0){L.size=I,L.start=R,L.skip=W,W+=4,I+=4,k.next();continue}let re=k.pos-ee;if(ee<0||re<J||k.start<$)break;let se=k.id>=o?4:0,te=k.start;for(k.next();k.pos>re;){if(k.size<0)if(k.size==-3)se+=4;else break e;else k.id>=o&&(se+=4);k.next()}R=te,I+=ee,W+=se}return(M<0||I==C)&&(L.size=I,L.start=R,L.skip=W),L.size>4?L:void 0}function m(C,M,k){let{id:I,start:R,end:W,size:$}=l;if(l.next(),$>=0&&I<o){let L=k;if($>4){let J=l.pos-($-4);for(;l.pos>J;)k=m(C,M,k)}M[--k]=L,M[--k]=W-C,M[--k]=R-C,M[--k]=I}else $==-3?c=I:$==-4&&(h=I);return k}let w=[],A=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,w,A,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:w.length?A[0]+w[0].length:0;return new dt(a[t.topID],w.reverse(),A.reverse(),x)}const up=new WeakMap;function sl(t,e){if(!t.isAnonymous||e instanceof Oi||e.type!=t)return 1;let n=up.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof dt)){n=1;break}n+=sl(t,i)}up.set(e,n)}return n}function Cf(t,e,n,i,s,r,o,l,a){let c=0;for(let p=i;p<s;p++)c+=sl(t,e[p]);let h=Math.ceil(c*1.5/8),f=[],u=[];function d(p,g,v,m,w){for(let A=v;A<m;){let x=A,C=g[A],M=sl(t,p[A]);for(A++;A<m;A++){let k=sl(t,p[A]);if(M+k>=h)break;M+=k}if(A==x+1){if(M>h){let k=p[x];d(k.children,k.positions,0,k.children.length,g[x]+w);continue}f.push(p[x])}else{let k=g[A-1]+p[A-1].length-C;f.push(Cf(t,p,g,x,A,C,k,null,a))}u.push(C+w-r)}}return d(e,n,i,s,0),(l||a)(f,u,o)}class Zi{constructor(e,n,i,s,r=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let s=[new Zi(0,e.length,e,0,!1,i)];for(let r of n)r.to>e.length&&s.push(r);return s}static applyChanges(e,n,i=128){if(!n.length)return e;let s=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let h=l<n.length?n[l]:null,f=h?h.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let u=o;if(a>=u.from||f<=u.to||c){let d=Math.max(u.from,a)-c,p=Math.min(u.to,f)-c;u=d>=p?null:new Zi(d,p,u.tree,u.offset+c,l>0,!!h)}if(u&&s.push(u),o.to>f)break;o=r<e.length?e[r++]:null}if(!h)break;a=h.toA,c=h.toA-h.toB}return s}}class zA{startParse(e,n,i){return typeof e=="string"&&(e=new KA(e)),i=i?i.length?i.map(s=>new za(s.from,s.to)):[new za(0,0)]:[new za(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let s=this.startParse(e,n,i);for(;;){let r=s.advance();if(r)return r}}}class KA{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new pe({perNode:!0});let qA=0,Vn=class mh{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=qA++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof mh&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new mh(i,[],null,[]);if(s.set.push(s),n)for(let r of n.set)s.set.push(r);return s}static defineModifier(e){let n=new dp(e);return i=>i.modified.indexOf(n)>-1?i:dp.get(i.base||i,i.modified.concat(n).sort((s,r)=>s.id-r.id))}},GA=0,dp=class vb{constructor(e){this.name=e,this.instances=[],this.id=GA++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&YA(n,l.modified));if(i)return i;let s=[],r=new Vn(e.name,s,e,n);for(let l of n)l.instances.push(r);let o=XA(n);for(let l of e.set)if(!l.modified.length)for(let a of o)s.push(vb.get(l,a));return r}};function YA(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function XA(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function JA(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let r=[],o=2,l=s;for(let f=0;;){if(l=="..."&&f>0&&f+3==s.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!u)throw new RangeError("Invalid path: "+s);if(r.push(u[0]=="*"?"":u[0][0]=='"'?JSON.parse(u[0]):u[0]),f+=u[0].length,f==s.length)break;let d=s[f++];if(f==s.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+s);let h=new _l(i,o,a>0?r.slice(0,a):null);e[c]=h.sort(e[c])}}return wb.add(e)}const wb=new pe;let _l=class{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};_l.empty=new _l([],2,null);function xb(t,e){let n=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))n[r.tag.id]=r.class;else for(let o of r.tag)n[o.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let o=s;for(let l of r)for(let a of l.set){let c=n[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function QA(t,e){let n=null;for(let i of t){let s=i.style(e);s&&(n=n?n+" "+s:s)}return n}function ZA(t,e,n,i=0,s=t.length){let r=new e_(i,Array.isArray(e)?e:[e],n);r.highlightRange(t.cursor(),i,s,"",r.highlighters),r.flush(s)}class e_{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,s,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(r=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=s,h=t_(e)||_l.empty,f=QA(r,h.tags);if(f&&(c&&(c+=" "),c+=f,h.mode==1&&(s+=(s?" ":"")+f)),this.startSpan(Math.max(n,l),c),h.opaque)return;let u=e.tree&&e.tree.prop(pe.mounted);if(u&&u.overlay){let d=e.node.enter(u.overlay[0].from+l,1),p=this.highlighters.filter(v=>!v.scope||v.scope(u.tree.type)),g=e.firstChild();for(let v=0,m=l;;v++){let w=v<u.overlay.length?u.overlay[v]:null,A=w?w.from+l:a,x=Math.max(n,m),C=Math.min(i,A);if(x<C&&g)for(;e.from<C&&(this.highlightRange(e,x,C,s,r),this.startSpan(Math.min(C,e.to),c),!(e.to>=A||!e.nextSibling())););if(!w||A>i)break;m=w.to+l,m>n&&(this.highlightRange(d.cursor(),Math.max(n,w.from+l),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),c))}g&&e.parent()}else if(e.firstChild()){u&&(s="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,s,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function t_(t){let e=t.type.prop(wb);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const U=Vn.define,Do=U(),fi=U(),pp=U(fi),mp=U(fi),ui=U(),Ro=U(ui),Ka=U(ui),vn=U(),Vi=U(vn),pn=U(),mn=U(),gh=U(),Zs=U(gh),Po=U(),K={comment:Do,lineComment:U(Do),blockComment:U(Do),docComment:U(Do),name:fi,variableName:U(fi),typeName:pp,tagName:U(pp),propertyName:mp,attributeName:U(mp),className:U(fi),labelName:U(fi),namespace:U(fi),macroName:U(fi),literal:ui,string:Ro,docString:U(Ro),character:U(Ro),attributeValue:U(Ro),number:Ka,integer:U(Ka),float:U(Ka),bool:U(ui),regexp:U(ui),escape:U(ui),color:U(ui),url:U(ui),keyword:pn,self:U(pn),null:U(pn),atom:U(pn),unit:U(pn),modifier:U(pn),operatorKeyword:U(pn),controlKeyword:U(pn),definitionKeyword:U(pn),moduleKeyword:U(pn),operator:mn,derefOperator:U(mn),arithmeticOperator:U(mn),logicOperator:U(mn),bitwiseOperator:U(mn),compareOperator:U(mn),updateOperator:U(mn),definitionOperator:U(mn),typeOperator:U(mn),controlOperator:U(mn),punctuation:gh,separator:U(gh),bracket:Zs,angleBracket:U(Zs),squareBracket:U(Zs),paren:U(Zs),brace:U(Zs),content:vn,heading:Vi,heading1:U(Vi),heading2:U(Vi),heading3:U(Vi),heading4:U(Vi),heading5:U(Vi),heading6:U(Vi),contentSeparator:U(vn),list:U(vn),quote:U(vn),emphasis:U(vn),strong:U(vn),link:U(vn),monospace:U(vn),strikethrough:U(vn),inserted:U(),deleted:U(),changed:U(),invalid:U(),meta:Po,documentMeta:U(Po),annotation:U(Po),processingInstruction:U(Po),definition:Vn.defineModifier("definition"),constant:Vn.defineModifier("constant"),function:Vn.defineModifier("function"),standard:Vn.defineModifier("standard"),local:Vn.defineModifier("local"),special:Vn.defineModifier("special")};for(let t in K){let e=K[t];e instanceof Vn&&(e.name=t)}xb([{tag:K.link,class:"tok-link"},{tag:K.heading,class:"tok-heading"},{tag:K.emphasis,class:"tok-emphasis"},{tag:K.strong,class:"tok-strong"},{tag:K.keyword,class:"tok-keyword"},{tag:K.atom,class:"tok-atom"},{tag:K.bool,class:"tok-bool"},{tag:K.url,class:"tok-url"},{tag:K.labelName,class:"tok-labelName"},{tag:K.inserted,class:"tok-inserted"},{tag:K.deleted,class:"tok-deleted"},{tag:K.literal,class:"tok-literal"},{tag:K.string,class:"tok-string"},{tag:K.number,class:"tok-number"},{tag:[K.regexp,K.escape,K.special(K.string)],class:"tok-string2"},{tag:K.variableName,class:"tok-variableName"},{tag:K.local(K.variableName),class:"tok-variableName tok-local"},{tag:K.definition(K.variableName),class:"tok-variableName tok-definition"},{tag:K.special(K.variableName),class:"tok-variableName2"},{tag:K.definition(K.propertyName),class:"tok-propertyName tok-definition"},{tag:K.typeName,class:"tok-typeName"},{tag:K.namespace,class:"tok-namespace"},{tag:K.className,class:"tok-className"},{tag:K.macroName,class:"tok-macroName"},{tag:K.propertyName,class:"tok-propertyName"},{tag:K.operator,class:"tok-operator"},{tag:K.comment,class:"tok-comment"},{tag:K.meta,class:"tok-meta"},{tag:K.invalid,class:"tok-invalid"},{tag:K.punctuation,class:"tok-punctuation"}]);var qa;const cr=new pe,n_=new pe;class Mn{constructor(e,n,i=[],s=""){this.data=e,this.name=s,ue.prototype.hasOwnProperty("tree")||Object.defineProperty(ue.prototype,"tree",{get(){return pt(this)}}),this.parser=n,this.extension=[Li.of(this),ue.languageData.of((r,o,l)=>{let a=gp(r,o,l),c=a.type.prop(cr);if(!c)return[];let h=r.facet(c),f=a.type.prop(n_);if(f){let u=a.resolve(o-a.from,l);for(let d of f)if(d.test(u,r)){let p=r.facet(d.facet);return d.type=="replace"?p:p.concat(h)}}return h})].concat(i)}isActiveAt(e,n,i=-1){return gp(e,n,i).type.prop(cr)==this.data}findRegions(e){let n=e.facet(Li);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(cr)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(pe.mounted);if(l){if(l.tree.prop(cr)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(s(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof dt&&s(c,r.positions[a]+o)}};return s(pt(e),0),i}get allowsNesting(){return!0}}Mn.setState=le.define();function gp(t,e,n){let i=t.facet(Li),s=pt(t).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,n,rt.ExcludeBuffers))r.type.isTop&&(s=r);return s}function pt(t){let e=t.field(Mn.state,!1);return e?e.tree:dt.empty}class i_{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let er=null;class Ml{constructor(e,n,i=[],s,r,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Ml(e,n,[],dt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new i_(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=dt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Zi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Zi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=er;er=this;try{return e()}finally{er=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=bp(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,h,f,u)=>a.push({fromA:c,toA:h,fromB:f,toB:u})),i=Zi.applyChanges(i,a),s=dt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);h<f&&l.push({from:h,to:f})}}}return new Ml(this.parser,n,i,s,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=bp(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends zA{createParse(n,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let a=er;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new dt(Pn.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return er}}function bp(t,e,n){return Zi.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ws{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Ws(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Ml.create(e.facet(Li).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Ws(i)}}Mn.state=lt.define({create:Ws.init,update(t,e){for(let n of e.effects)if(n.is(Mn.setState))return n.value;return e.startState.facet(Li)!=e.state.facet(Li)?Ws.init(e.state):t.apply(e)}});let Sb=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Sb=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Ga=typeof navigator<"u"&&(!((qa=navigator.scheduling)===null||qa===void 0)&&qa.isInputPending)?()=>navigator.scheduling.isInputPending():null,s_=$e.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Mn.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Mn.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Sb(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(Mn.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ga?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<s&&i.doc.length>s+1e3,a=r.context.work(()=>Ga&&Ga()||Date.now()>o,s+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Mn.setState.of(new Ws(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Tt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Li=Y.define({combine(t){return t.length?t[0]:null},enables:t=>[Mn.state,s_,q.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),r_=Y.define(),kf=Y.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Tl(t){let e=t.facet(kf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function jr(t,e){let n="",i=t.tabSize,s=t.facet(kf)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let r=0;r<e;r++)n+=s;return n}function Af(t,e){t instanceof ue&&(t=new la(t));for(let i of t.state.facet(r_)){let s=i(t,e);if(s!==void 0)return s}let n=pt(t.state);return n.length>=e?l_(t,n,e):null}class la{constructor(e,n={}){this.state=e,this.options=n,this.unit=Tl(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,n);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,n=1){let{text:i,from:s}=this.lineAt(e,n),r=this.countColumn(i,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,n=e.length){return hs(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:s}=this.lineAt(e,n),r=this.options.overrideIndentation;if(r){let o=r(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const o_=new pe;function l_(t,e,n){let i=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=i.node){let r=[];for(let o=s;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Cb(i,t,n)}function Cb(t,e,n){for(let i=t;i;i=i.next){let s=c_(i.node);if(s)return s(_f.create(e,n,i))}return 0}function a_(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function c_(t){let e=t.type.prop(o_);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(pe.closedBy))){let s=t.lastChild,r=s&&i.indexOf(s.name)>-1;return o=>d_(o,!0,1,void 0,r&&!a_(o)?s.from:void 0)}return t.parent==null?h_:null}function h_(){return 0}class _f extends la{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new _f(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(f_(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Cb(this.context.next,this.base,this.pos)}}function f_(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function u_(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,r=t.state.doc.lineAt(n.from),o=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(r.text.slice(n.to-r.from))[0].length;return{from:n.from,to:n.to+c}}l=a.to}}function d_(t,e,n,i,s){let r=t.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||s==t.pos+o,a=u_(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const p_=200;function m_(){return ue.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,s=n.lineAt(i);if(i>s.from+p_)return t;let r=n.sliceString(s.from,i);if(!e.some(c=>c.test(r)))return t;let{state:o}=t,l=-1,a=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==l)continue;l=h.from;let f=Af(o,h.from);if(f==null)continue;let u=/^\s*/.exec(h.text)[0],d=jr(o,f);u!=d&&a.push({from:h.from,to:h.from+u.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const g_=Y.define(),b_=new pe;function y_(t,e,n){let i=pt(t);if(i.length<n)return null;let s=i.resolveStack(n,1),r=null;for(let o=s;o;o=o.next){let l=o.node;if(l.to<=n||l.from>n)continue;if(r&&l.from<e)break;let a=l.type.prop(b_);if(a&&(l.to<i.length-50||i.length==t.doc.length||!v_(l))){let c=a(l,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(r=c)}}return r}function v_(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function El(t,e,n){for(let i of t.facet(g_)){let s=i(t,e,n);if(s)return s}return y_(t,e,n)}function kb(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const aa=le.define({map:kb}),ro=le.define({map:kb});function Ab(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const os=lt.define({create(){return Z.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=yp(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(aa)&&!w_(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Tb),s=i?Z.replace({widget:new M_(i(e.state,n.value))}):vp;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(ro)&&(t=t.update({filter:(i,s)=>n.value.from!=i||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=yp(t,e.selection.main.head)),t},provide:t=>q.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,s)=>{n.push(i,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],s=t[n++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(vp.range(i,s))}return Z.set(e,!0)}});function yp(t,e,n=e){let i=!1;return t.between(e,n,(s,r)=>{s<n&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(s,r)=>s>=n||r<=e}):t}function Ol(t,e,n){var i;let s=null;return(i=t.field(os,!1))===null||i===void 0||i.between(e,n,(r,o)=>{(!s||s.from>r)&&(s={from:r,to:o})}),s}function w_(t,e,n){let i=!1;return t.between(e,e,(s,r)=>{s==e&&r==n&&(i=!0)}),i}function _b(t,e){return t.field(os,!1)?e:e.concat(le.appendConfig.of(Eb()))}const x_=t=>{for(let e of Ab(t)){let n=El(t.state,e.from,e.to);if(n)return t.dispatch({effects:_b(t.state,[aa.of(n),Mb(t,n)])}),!0}return!1},S_=t=>{if(!t.state.field(os,!1))return!1;let e=[];for(let n of Ab(t)){let i=Ol(t.state,n.from,n.to);i&&e.push(ro.of(i),Mb(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Mb(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,s=t.state.doc.lineAt(e.to).number;return q.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${s}.`)}const C_=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let s=t.lineBlockAt(i),r=El(e,s.from,s.to);r&&n.push(aa.of(r)),i=(r?t.lineBlockAt(r.to):s).to+1}return n.length&&t.dispatch({effects:_b(t.state,n)}),!!n.length},k_=t=>{let e=t.state.field(os,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,s)=>{n.push(ro.of({from:i,to:s}))}),t.dispatch({effects:n}),!0},A_=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:x_},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:S_},{key:"Ctrl-Alt-[",run:C_},{key:"Ctrl-Alt-]",run:k_}],__={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Tb=Y.define({combine(t){return In(t,__)}});function Eb(t){return[os,O_]}function Ob(t,e){let{state:n}=t,i=n.facet(Tb),s=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=Ol(t.state,l.from,l.to);a&&t.dispatch({effects:ro.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,s,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=s,r}const vp=Z.replace({widget:new class extends si{toDOM(t){return Ob(t,null)}}});class M_ extends si{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Ob(e,this.value)}}const T_={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ya extends ei{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function E_(t={}){let e={...T_,...t},n=new Ya(e,!0),i=new Ya(e,!1),s=$e.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Li)!=o.state.facet(Li)||o.startState.field(os,!1)!=o.state.field(os,!1)||pt(o.startState)!=pt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Qn;for(let a of o.viewportLineBlocks){let c=Ol(o.state,a.from,a.to)?i:El(o.state,a.from,a.to)?n:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[s,MA({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(s))===null||l===void 0?void 0:l.markers)||ge.empty},initialSpacer(){return new Ya(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Ol(o.state,l.from,l.to);if(c)return o.dispatch({effects:ro.of(c)}),!0;let h=El(o.state,l.from,l.to);return h?(o.dispatch({effects:aa.of(h)}),!0):!1}}}),Eb()]}const O_=q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ca{constructor(e,n){this.specs=e;let i;function s(l){let a=Mi.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof Mn?l=>l.prop(cr)==o.data:o?l=>l==o:void 0,this.style=xb(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new Mi(i):null,this.themeType=n.themeType}static define(e,n){return new ca(e,n||{})}}const bh=Y.define(),Lb=Y.define({combine(t){return t.length?[t[0]]:null}});function Xa(t){let e=t.facet(bh);return e.length?e:t.facet(Lb)}function L_(t,e){let n=[R_],i;return t instanceof ca&&(t.module&&n.push(q.styleModule.of(t.module)),i=t.themeType),e?.fallback?n.push(Lb.of(t)):i?n.push(bh.computeN([q.darkTheme],s=>s.facet(q.darkTheme)==(i=="dark")?[t]:[])):n.push(bh.of(t)),n}class D_{constructor(e){this.markCache=Object.create(null),this.tree=pt(e.state),this.decorations=this.buildDeco(e,Xa(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=pt(e.state),i=Xa(e.state),s=i!=Xa(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<r.to&&!s&&n.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,n){if(!n||!this.tree.length)return Z.none;let i=new Qn;for(let{from:s,to:r}of e.visibleRanges)ZA(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Z.mark({class:a})))},s,r);return i.finish()}}const R_=cs.high($e.fromClass(D_,{decorations:t=>t.decorations})),P_=ca.define([{tag:K.meta,color:"#404740"},{tag:K.link,textDecoration:"underline"},{tag:K.heading,textDecoration:"underline",fontWeight:"bold"},{tag:K.emphasis,fontStyle:"italic"},{tag:K.strong,fontWeight:"bold"},{tag:K.strikethrough,textDecoration:"line-through"},{tag:K.keyword,color:"#708"},{tag:[K.atom,K.bool,K.url,K.contentSeparator,K.labelName],color:"#219"},{tag:[K.literal,K.inserted],color:"#164"},{tag:[K.string,K.deleted],color:"#a11"},{tag:[K.regexp,K.escape,K.special(K.string)],color:"#e40"},{tag:K.definition(K.variableName),color:"#00f"},{tag:K.local(K.variableName),color:"#30a"},{tag:[K.typeName,K.namespace],color:"#085"},{tag:K.className,color:"#167"},{tag:[K.special(K.variableName),K.macroName],color:"#256"},{tag:K.definition(K.propertyName),color:"#00c"},{tag:K.comment,color:"#940"},{tag:K.invalid,color:"#f00"}]),I_=q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Db=1e4,Rb="()[]{}",Pb=Y.define({combine(t){return In(t,{afterCursor:!0,brackets:Rb,maxScanDistance:Db,renderMatch:F_})}}),N_=Z.mark({class:"cm-matchingBracket"}),B_=Z.mark({class:"cm-nonmatchingBracket"});function F_(t){let e=[],n=t.matched?N_:B_;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const H_=lt.define({create(){return Z.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(Pb);for(let s of e.state.selection.ranges){if(!s.empty)continue;let r=Tn(e.state,s.head,-1,i)||s.head>0&&Tn(e.state,s.head-1,1,i)||i.afterCursor&&(Tn(e.state,s.head,1,i)||s.head<e.state.doc.length&&Tn(e.state,s.head+1,-1,i));r&&(n=n.concat(i.renderMatch(r,e.state)))}return Z.set(n,!0)},provide:t=>q.decorations.from(t)}),V_=[H_,I_];function W_(t={}){return[Pb.of(t),V_]}const $_=new pe;function yh(t,e,n){let i=t.prop(e<0?pe.openedBy:pe.closedBy);if(i)return i;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function vh(t){let e=t.type.prop($_);return e?e(t.node):t}function Tn(t,e,n,i={}){let s=i.maxScanDistance||Db,r=i.brackets||Rb,o=pt(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let c=yh(a.type,n,r);if(c&&a.from<a.to){let h=vh(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return U_(t,e,n,a,h,c,r)}}return j_(t,e,n,o,l.type,s,r)}function U_(t,e,n,i,s,r,o){let l=i.parent,a={from:s.from,to:s.to},c=0,h=l?.cursor();if(h&&(n<0?h.childBefore(i.from):h.childAfter(i.to)))do if(n<0?h.to<=i.from:h.from>=i.to){if(c==0&&r.indexOf(h.type.name)>-1&&h.from<h.to){let f=vh(h);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(yh(h.type,n,o))c++;else if(yh(h.type,-n,o)){if(c==0){let f=vh(h);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function j_(t,e,n,i,s,r,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let u=0;!h.next().done&&u<=r;){let d=h.value;n<0&&(u+=d.length);let p=e+u*n;for(let g=n>0?0:d.length-1,v=n>0?d.length:-1;g!=v;g+=n){let m=o.indexOf(d[g]);if(!(m<0||i.resolveInner(p+g,1).type!=s))if(m%2==0==n>0)f++;else{if(f==1)return{start:c,end:{from:p+g,to:p+g+1},matched:m>>1==a>>1};f--}}n>0&&(u+=d.length)}return h.done?{start:c,matched:!1}:null}const z_=Object.create(null),wp=[Pn.none],xp=[],Sp=Object.create(null),K_=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])K_[t]=q_(z_,e);function Ja(t,e){xp.indexOf(t)>-1||(xp.push(t),console.warn(e))}function q_(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let h=t[c]||K[c];h?typeof h=="function"?a.length?a=a.map(h):Ja(c,`Modifier ${c} used at start of tag`):a.length?Ja(c,`Tag ${c} used as modifier`):a=Array.isArray(h)?h:[h]:Ja(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(l=>l.id),r=Sp[s];if(r)return r.id;let o=Sp[s]=Pn.define({id:wp.length,name:i,props:[JA({[i]:n})]});return wp.push(o),o.id}Te.RTL,Te.LTR;const G_=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Tf(t.state,n.from);return i.line?Y_(t):i.block?J_(t):!1};function Mf(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(i(n.update(s)),!0):!1}}const Y_=Mf(eM,0),X_=Mf(Ib,0),J_=Mf((t,e)=>Ib(t,e,Z_(e)),0);function Tf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const tr=50;function Q_(t,{open:e,close:n},i,s){let r=t.sliceDoc(i-tr,i),o=t.sliceDoc(s,s+tr),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:s+a,margin:a&&1}};let h,f;s-i<=2*tr?h=f=t.sliceDoc(i,s):(h=t.sliceDoc(i,i+tr),f=t.sliceDoc(s-tr,s));let u=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-n.length;return h.slice(u,u+e.length)==e&&f.slice(p,p+n.length)==n?{open:{pos:i+u+e.length,margin:/\s/.test(h.charAt(u+e.length))?1:0},close:{pos:s-d-n.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function Z_(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=n.to<=i.to?i:t.doc.lineAt(n.to);s.from>i.from&&s.from==n.to&&(s=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function Ib(t,e,n=e.selection.ranges){let i=n.map(r=>Tf(e,r.from).block);if(!i.every(r=>r))return null;let s=n.map((r,o)=>Q_(e,i[o],r.from,r.to));if(t!=2&&!s.every(r=>r))return{changes:e.changes(n.map((r,o)=>s[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&s.some(r=>r)){let r=[];for(let o=0,l;o<s.length;o++)if(l=s[o]){let a=i[o],{open:c,close:h}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:r}}return null}function eM(t,e,n=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:o}of n){let l=i.length,a=1e9,c=Tf(e,r).line;if(c){for(let h=r;h<=o;){let f=e.doc.lineAt(h);if(f.from>s&&(r==o||o>f.from)){s=f.from;let u=/^\s*/.exec(f.text)[0].length,d=u==f.length,p=f.text.slice(u,u+c.length)==c?u:-1;u<f.text.length&&u<a&&(a=u),i.push({line:f,comment:p,token:c,indent:u,empty:d,single:!1})}h=f.to+1}if(a<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:h,single:f}of i)(f||!h)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,h=c+a.length;o.text[h-o.from]==" "&&h++,r.push({from:c,to:h})}return{changes:r}}return null}const wh=ii.define(),tM=ii.define(),nM=Y.define(),Nb=Y.define({combine(t){return In(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,s)=>e(i,s)||n(i,s)})}}),Bb=lt.define({create(){return En.empty},update(t,e){let n=e.state.facet(Nb),i=e.annotation(wh);if(i){let a=Et.fromTransaction(e,i.selection),c=i.side,h=c==0?t.undone:t.done;return a?h=Ll(h,h.length,n.minDepth,a):h=Vb(h,e.startState.selection),new En(c==0?i.rest:h,c==0?h:i.rest)}let s=e.annotation(tM);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(qe.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=Et.fromTransaction(e),o=e.annotation(qe.time),l=e.annotation(qe.userEvent);return r?t=t.addChanges(r,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new En(t.done.map(Et.fromJSON),t.undone.map(Et.fromJSON))}});function iM(t={}){return[Bb,Nb.of(t),q.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Fb:e.inputType=="historyRedo"?xh:null;return i?(e.preventDefault(),i(n)):!1}})]}function ha(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let s=n.field(Bb,!1);if(!s)return!1;let r=s.pop(t,n,e);return r?(i(r),!0):!1}}const Fb=ha(0,!1),xh=ha(1,!1),sM=ha(0,!0),rM=ha(1,!0);class Et{constructor(e,n,i,s,r){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new Et(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Et(e.changes&&Ke.fromJSON(e.changes),[],e.mapped&&Dn.fromJSON(e.mapped),e.startSelection&&N.fromJSON(e.startSelection),e.selectionsAfter.map(N.fromJSON))}static fromTransaction(e,n){let i=jt;for(let s of e.startState.facet(nM)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Et(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,jt)}static selection(e){return new Et(void 0,jt,void 0,void 0,e)}}function Ll(t,e,n,i){let s=e+1>n+20?e-n-1:0,r=t.slice(s,e);return r.push(i),r}function oM(t,e){let n=[],i=!1;return t.iterChangedRanges((s,r)=>n.push(s,r)),e.iterChangedRanges((s,r,o,l)=>{for(let a=0;a<n.length;){let c=n[a++],h=n[a++];l>=c&&o<=h&&(i=!0)}}),i}function lM(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Hb(t,e){return t.length?e.length?t.concat(e):t:e}const jt=[],aM=200;function Vb(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-aM));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Ll(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Et.selection([e])]}function cM(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Qa(t,e){if(!t.length)return t;let n=t.length,i=jt;for(;n;){let s=hM(t[n-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=t.slice(0,n);return r[n-1]=s,r}else e=s.mapped,n--,i=s.selectionsAfter}return i.length?[Et.selection(i)]:jt}function hM(t,e,n){let i=Hb(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):jt,n);if(!t.changes)return Et.selection(i);let s=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new Et(s,le.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const fM=/^(input\.type|delete)($|\.)/;class En{constructor(e,n,i=0,s=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new En(this.done,this.undone):this}addChanges(e,n,i,s,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||fM.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,oM(l.changes,e.changes))||i=="input.type.compose")?o=Ll(o,o.length-1,s.minDepth,new Et(e.changes.compose(l.changes),Hb(le.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,jt)):o=Ll(o,o.length,s.minDepth,e),new En(o,jt,n,i)}addSelection(e,n,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:jt;return r.length>0&&n-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&lM(r[r.length-1],e)?this:new En(Vb(this.done,e),this.undone,n,i)}addMapping(e){return new En(Qa(this.done,e),Qa(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1],o=r.selectionsAfter[0]||n.selection;if(i&&r.selectionsAfter.length)return n.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:wh.of({side:e,rest:cM(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=s.length==1?jt:s.slice(0,s.length-1);return r.mapped&&(l=Qa(l,r.mapped)),n.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:wh.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}En.empty=new En(jt,jt);const uM=[{key:"Mod-z",run:Fb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:xh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:xh,preventDefault:!0},{key:"Mod-u",run:sM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:rM,preventDefault:!0}];function js(t,e){return N.create(t.ranges.map(e),t.mainIndex)}function Nn(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ln({state:t,dispatch:e},n){let i=js(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Nn(t,i)),!0)}function fa(t,e){return N.cursor(e?t.to:t.from)}function Wb(t,e){return ln(t,n=>n.empty?t.moveByChar(n,e):fa(n,e))}function mt(t){return t.textDirectionAt(t.state.selection.main.head)==Te.LTR}const $b=t=>Wb(t,!mt(t)),Ub=t=>Wb(t,mt(t));function jb(t,e){return ln(t,n=>n.empty?t.moveByGroup(n,e):fa(n,e))}const dM=t=>jb(t,!mt(t)),pM=t=>jb(t,mt(t));function mM(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ua(t,e,n){let i=pt(t).resolveInner(e.head),s=n?pe.closedBy:pe.openedBy;for(let a=e.head;;){let c=n?i.childAfter(a):i.childBefore(a);if(!c)break;mM(t,c,s)?i=c:a=n?c.to:c.from}let r=i.type.prop(s),o,l;return r&&(o=n?Tn(t,i.from,1):Tn(t,i.to,-1))&&o.matched?l=n?o.end.to:o.end.from:l=n?i.to:i.from,N.cursor(l,n?-1:1)}const gM=t=>ln(t,e=>ua(t.state,e,!mt(t))),bM=t=>ln(t,e=>ua(t.state,e,mt(t)));function zb(t,e){return ln(t,n=>{if(!n.empty)return fa(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Kb=t=>zb(t,!1),qb=t=>zb(t,!0);function Gb(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,s;if(e){for(let r of t.state.facet(q.scrollMargins)){let o=r(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(i=Math.max(o?.bottom,i))}s=t.scrollDOM.clientHeight-n-i}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function Yb(t,e){let n=Gb(t),{state:i}=t,s=js(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):fa(o,e));if(s.eq(i.selection))return!1;let r;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<c&&(r=q.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Nn(i,s),{effects:r}),!0}const Cp=t=>Yb(t,!1),Sh=t=>Yb(t,!0);function Ni(t,e,n){let i=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?i.to:i.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=N.cursor(i.from+r))}return s}const yM=t=>ln(t,e=>Ni(t,e,!0)),vM=t=>ln(t,e=>Ni(t,e,!1)),wM=t=>ln(t,e=>Ni(t,e,!mt(t))),xM=t=>ln(t,e=>Ni(t,e,mt(t))),SM=t=>ln(t,e=>N.cursor(t.lineBlockAt(e.head).from,1)),CM=t=>ln(t,e=>N.cursor(t.lineBlockAt(e.head).to,-1));function kM(t,e,n){let i=!1,s=js(t.selection,r=>{let o=Tn(t,r.head,-1)||Tn(t,r.head,1)||r.head>0&&Tn(t,r.head-1,1)||r.head<t.doc.length&&Tn(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return N.cursor(l)});return i?(e(Nn(t,s)),!0):!1}const AM=({state:t,dispatch:e})=>kM(t,e);function Xt(t,e){let n=js(t.state.selection,i=>{let s=e(i);return N.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Nn(t.state,n)),!0)}function Xb(t,e){return Xt(t,n=>t.moveByChar(n,e))}const Jb=t=>Xb(t,!mt(t)),Qb=t=>Xb(t,mt(t));function Zb(t,e){return Xt(t,n=>t.moveByGroup(n,e))}const _M=t=>Zb(t,!mt(t)),MM=t=>Zb(t,mt(t)),TM=t=>Xt(t,e=>ua(t.state,e,!mt(t))),EM=t=>Xt(t,e=>ua(t.state,e,mt(t)));function ey(t,e){return Xt(t,n=>t.moveVertically(n,e))}const ty=t=>ey(t,!1),ny=t=>ey(t,!0);function iy(t,e){return Xt(t,n=>t.moveVertically(n,e,Gb(t).height))}const kp=t=>iy(t,!1),Ap=t=>iy(t,!0),OM=t=>Xt(t,e=>Ni(t,e,!0)),LM=t=>Xt(t,e=>Ni(t,e,!1)),DM=t=>Xt(t,e=>Ni(t,e,!mt(t))),RM=t=>Xt(t,e=>Ni(t,e,mt(t))),PM=t=>Xt(t,e=>N.cursor(t.lineBlockAt(e.head).from)),IM=t=>Xt(t,e=>N.cursor(t.lineBlockAt(e.head).to)),_p=({state:t,dispatch:e})=>(e(Nn(t,{anchor:0})),!0),Mp=({state:t,dispatch:e})=>(e(Nn(t,{anchor:t.doc.length})),!0),Tp=({state:t,dispatch:e})=>(e(Nn(t,{anchor:t.selection.main.anchor,head:0})),!0),Ep=({state:t,dispatch:e})=>(e(Nn(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),NM=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),BM=({state:t,dispatch:e})=>{let n=da(t).map(({from:i,to:s})=>N.range(i,Math.min(s+1,t.doc.length)));return e(t.update({selection:N.create(n),userEvent:"select"})),!0},FM=({state:t,dispatch:e})=>{let n=js(t.selection,i=>{let s=pt(t),r=s.resolveStack(i.from,1);if(i.empty){let o=s.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return N.range(l.to,l.from)}return i});return n.eq(t.selection)?!1:(e(Nn(t,n)),!0)},HM=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=N.create([n.main]):n.main.empty||(i=N.create([N.cursor(n.main.head)])),i?(e(Nn(t,i)),!0):!1};function oo(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,s=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(n="delete.backward",a=Io(t,a,!1)):a>o&&(n="delete.forward",a=Io(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Io(t,o,!1),l=Io(t,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:N.cursor(o,o<r.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(i.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Io(t,e,n){if(t instanceof q)for(let i of t.state.facet(q.atomicRanges).map(s=>s(t)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=n?r:s)});return e}const sy=(t,e,n)=>oo(t,i=>{let s=i.from,{state:r}=t,o=r.doc.lineAt(s),l,a;if(n&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,s-o.from))){if(l[l.length-1]=="	")return s-1;let c=hs(l,r.tabSize),h=c%Tl(r)||Tl(r);for(let f=0;f<h&&l[l.length-1-f]==" ";f++)s--;a=s}else a=ot(o.text,s-o.from,e,e)+o.from,a==s&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,s-o.from))&&(a=ot(o.text,a-o.from,!1,!1)+o.from);return a}),Ch=t=>sy(t,!1,!0),ry=t=>sy(t,!0,!1),oy=(t,e)=>oo(t,n=>{let i=n.head,{state:s}=t,r=s.doc.lineAt(i),o=s.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==n.head&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let a=ot(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),h=o(c);if(l!=null&&h!=l)break;(c!=" "||i!=n.head)&&(l=h),i=a}return i}),ly=t=>oy(t,!1),VM=t=>oy(t,!0),WM=t=>oo(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),$M=t=>oo(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),UM=t=>oo(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),jM=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:be.of(["",""])},range:N.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},zM=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let s=i.from,r=t.doc.lineAt(s),o=s==r.from?s-1:ot(r.text,s-r.from,!1)+r.from,l=s==r.to?s+1:ot(r.text,s-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:t.doc.slice(s,l).append(t.doc.slice(o,s))},range:N.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function da(t){let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),n>=s.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});n=r.number+1}return e}function ay(t,e,n){if(t.readOnly)return!1;let i=[],s=[];for(let r of da(t)){if(n?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(n?r.to+1:r.from-1),l=o.length+1;if(n){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let a of r.ranges)s.push(N.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let a of r.ranges)s.push(N.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:N.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const KM=({state:t,dispatch:e})=>ay(t,e,!1),qM=({state:t,dispatch:e})=>ay(t,e,!0);function cy(t,e,n){if(t.readOnly)return!1;let i=[];for(let s of da(t))n?i.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):i.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const GM=({state:t,dispatch:e})=>cy(t,e,!1),YM=({state:t,dispatch:e})=>cy(t,e,!0),XM=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(da(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=js(e.selection,s=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(s.head),l=t.coordsAtPos(s.head,s.assoc||1);l&&(r=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,r)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function JM(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=pt(t).resolveInner(e),i=n.childBefore(e),s=n.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(pe.closedBy))&&r.indexOf(s.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const Op=hy(!1),QM=hy(!0);function hy(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:o}=s,l=e.doc.lineAt(r),a=!t&&r==o&&JM(e,r);t&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new la(e,{simulateBreak:r,simulateDoubleBreak:!!a}),h=Af(c,r);for(h==null&&(h=hs(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",jr(e,h)];return a&&f.push(jr(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:be.of(f)},range:N.cursor(r+1+f[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ef(t,e){let n=-1;return t.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,s,i),n=l.number),o=l.to+1}let r=t.changes(s);return{changes:s,range:N.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const ZM=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new la(t,{overrideIndentation:r=>{let o=n[r];return o??-1}}),s=Ef(t,(r,o,l)=>{let a=Af(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],h=jr(t,a);(c!=h||l.from<r.from+c.length)&&(n[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:h}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},eT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ef(t,(n,i)=>{i.push({from:n.from,insert:t.facet(kf)})}),{userEvent:"input.indent"})),!0),tT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ef(t,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let r=hs(s,t.tabSize),o=0,l=jr(t,Math.max(0,r-Tl(t)));for(;o<s.length&&o<l.length&&s.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+s.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),nT=t=>(t.setTabFocusMode(),!0),iT=[{key:"Ctrl-b",run:$b,shift:Jb,preventDefault:!0},{key:"Ctrl-f",run:Ub,shift:Qb},{key:"Ctrl-p",run:Kb,shift:ty},{key:"Ctrl-n",run:qb,shift:ny},{key:"Ctrl-a",run:SM,shift:PM},{key:"Ctrl-e",run:CM,shift:IM},{key:"Ctrl-d",run:ry},{key:"Ctrl-h",run:Ch},{key:"Ctrl-k",run:WM},{key:"Ctrl-Alt-h",run:ly},{key:"Ctrl-o",run:jM},{key:"Ctrl-t",run:zM},{key:"Ctrl-v",run:Sh}],sT=[{key:"ArrowLeft",run:$b,shift:Jb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:dM,shift:_M,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wM,shift:DM,preventDefault:!0},{key:"ArrowRight",run:Ub,shift:Qb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:pM,shift:MM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:xM,shift:RM,preventDefault:!0},{key:"ArrowUp",run:Kb,shift:ty,preventDefault:!0},{mac:"Cmd-ArrowUp",run:_p,shift:Tp},{mac:"Ctrl-ArrowUp",run:Cp,shift:kp},{key:"ArrowDown",run:qb,shift:ny,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Mp,shift:Ep},{mac:"Ctrl-ArrowDown",run:Sh,shift:Ap},{key:"PageUp",run:Cp,shift:kp},{key:"PageDown",run:Sh,shift:Ap},{key:"Home",run:vM,shift:LM,preventDefault:!0},{key:"Mod-Home",run:_p,shift:Tp},{key:"End",run:yM,shift:OM,preventDefault:!0},{key:"Mod-End",run:Mp,shift:Ep},{key:"Enter",run:Op,shift:Op},{key:"Mod-a",run:NM},{key:"Backspace",run:Ch,shift:Ch},{key:"Delete",run:ry},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ly},{key:"Mod-Delete",mac:"Alt-Delete",run:VM},{mac:"Mod-Backspace",run:$M},{mac:"Mod-Delete",run:UM}].concat(iT.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),rT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:gM,shift:TM},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:bM,shift:EM},{key:"Alt-ArrowUp",run:KM},{key:"Shift-Alt-ArrowUp",run:GM},{key:"Alt-ArrowDown",run:qM},{key:"Shift-Alt-ArrowDown",run:YM},{key:"Escape",run:HM},{key:"Mod-Enter",run:QM},{key:"Alt-l",mac:"Ctrl-l",run:BM},{key:"Mod-i",run:FM,preventDefault:!0},{key:"Mod-[",run:tT},{key:"Mod-]",run:eT},{key:"Mod-Alt-\\",run:ZM},{key:"Shift-Mod-k",run:XM},{key:"Shift-Mod-\\",run:AM},{key:"Mod-/",run:G_},{key:"Alt-A",run:X_},{key:"Ctrl-m",mac:"Shift-Alt-m",run:nT}].concat(sT),Lp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class $s{constructor(e,n,i=0,s=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?l=>r(Lp(l)):Lp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return At(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=of(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=An(e);let s=this.normalize(n);if(s.length)for(let r=0,o=i;;r++){let l=s.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==s.length-1){if(a)return this.value=a,this;break}o==i&&r<n.length&&n.charCodeAt(r)==l&&o++}}}match(e,n,i){let s=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?s={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:i}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&($s.prototype[Symbol.iterator]=function(){return this});const fy={from:-1,to:-1,match:/.*/.exec("")},Of="gm"+(/x/.unicode==null?"":"u");class uy{constructor(e,n,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=fy,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new dy(e,n,i,s,r);this.re=new RegExp(n,Of+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=Dl(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=Dl(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Za=new WeakMap;class Ls{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=Za.get(e);if(!s||s.from>=i||s.to<=n){let l=new Ls(n,e.sliceString(n,i));return Za.set(e,l),l}if(s.from==n&&s.to==i)return s;let{text:r,from:o}=s;return o>n&&(r=e.sliceString(n,o)+r,o=n),s.to<i&&(r+=e.sliceString(s.to,i)),Za.set(e,new Ls(o,r)),new Ls(n,r.slice(n-o,i-o))}}class dy{constructor(e,n,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=fy,this.matchPos=Dl(e,s),this.re=new RegExp(n,Of+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=Ls.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=Dl(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ls.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(uy.prototype[Symbol.iterator]=dy.prototype[Symbol.iterator]=function(){return this});function oT(t){try{return new RegExp(t,Of),!0}catch{return!1}}function Dl(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function kh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=ke("input",{class:"cm-textfield",name:"line",value:e}),i=ke("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:kr.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),s())},onsubmit:r=>{r.preventDefault(),s()}},ke("label",t.state.phrase("Go to line"),": ",n)," ",ke("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ke("button",{name:"close",onclick:()=>{t.dispatch({effects:kr.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function s(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!r)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,c,h,f]=r,u=h?+h.slice(1):0,d=c?+c:l.number;if(c&&f){let v=d/100;a&&(v=v*(a=="-"?-1:1)+l.number/o.doc.lines),d=Math.round(o.doc.lines*v)}else c&&a&&(d=d*(a=="-"?-1:1)+l.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),g=N.cursor(p.from+Math.max(0,Math.min(u,p.length)));t.dispatch({effects:[kr.of(!1),q.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const kr=le.define(),Dp=lt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(kr)&&(t=n.value);return t},provide:t=>$r.from(t,e=>e?kh:null)}),lT=t=>{let e=Wr(t,kh);if(!e){let n=[kr.of(!0)];t.state.field(Dp,!1)==null&&n.push(le.appendConfig.of([Dp,aT])),t.dispatch({effects:n}),e=Wr(t,kh)}return e&&e.dom.querySelector("input").select(),!0},aT=q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),cT={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},hT=Y.define({combine(t){return In(t,cT,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function fT(t){return[gT,mT]}const uT=Z.mark({class:"cm-selectionMatch"}),dT=Z.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Rp(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=Pe.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=Pe.Word)}function pT(t,e,n,i){return t(e.sliceDoc(n,n+1))==Pe.Word&&t(e.sliceDoc(i-1,i))==Pe.Word}const mT=$e.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(hT),{state:n}=t,i=n.selection;if(i.ranges.length>1)return Z.none;let s=i.main,r,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return Z.none;let a=n.wordAt(s.head);if(!a)return Z.none;o=n.charCategorizer(s.head),r=n.sliceDoc(a.from,a.to)}else{let a=s.to-s.from;if(a<e.minSelectionLength||a>200)return Z.none;if(e.wholeWords){if(r=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!(Rp(o,n,s.from,s.to)&&pT(o,n,s.from,s.to)))return Z.none}else if(r=n.sliceDoc(s.from,s.to),!r)return Z.none}let l=[];for(let a of t.visibleRanges){let c=new $s(n.doc,r,a.from,a.to);for(;!c.next().done;){let{from:h,to:f}=c.value;if((!o||Rp(o,n,h,f))&&(s.empty&&h<=s.from&&f>=s.to?l.push(dT.range(h,f)):(h>=s.to||f<=s.from)&&l.push(uT.range(h,f)),l.length>e.maxMatches))return Z.none}}return Z.set(l)}},{decorations:t=>t.decorations}),gT=q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),bT=({state:t,dispatch:e})=>{let{selection:n}=t,i=N.create(n.ranges.map(s=>t.wordAt(s.head)||N.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function yT(t,e){let{main:n,ranges:i}=t.selection,s=t.wordAt(n.head),r=s&&s.from==n.from&&s.to==n.to;for(let o=!1,l=new $s(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new $s(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const vT=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(r=>r.from===r.to))return bT({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let s=yT(t,i);return s?(e(t.update({selection:t.selection.addRange(N.range(s.from,s.to),!1),effects:q.scrollIntoView(s.to)})),!0):!1},zs=Y.define({combine(t){return In(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new LT(e),scrollToMatch:e=>q.scrollIntoView(e)})}});class py{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||oT(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new CT(this):new xT(this)}getCursor(e,n=0,i){let s=e.doc?e:ue.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?ws(this,s,n,i):vs(this,s,n,i)}}class my{constructor(e){this.spec=e}}function vs(t,e,n,i){return new $s(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:s=>s.toLowerCase(),t.wholeWord?wT(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function wT(t,e){return(n,i,s,r)=>((r>n||r+s.length<i)&&(r=Math.max(0,n-2),s=t.sliceString(r,Math.min(t.length,i+2))),(e(Rl(s,n-r))!=Pe.Word||e(Pl(s,n-r))!=Pe.Word)&&(e(Pl(s,i-r))!=Pe.Word||e(Rl(s,i-r))!=Pe.Word))}class xT extends my{constructor(e){super(e)}nextMatch(e,n,i){let s=vs(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let r=Math.min(e.doc.length,n+this.spec.unquoted.length);s=vs(this.spec,e,0,r).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==i?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let r=Math.max(n,s-1e4-this.spec.unquoted.length),o=vs(this.spec,e,r,s),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==n)return null;s-=1e4}}prevMatch(e,n,i){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=vs(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=vs(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function ws(t,e,n,i){return new uy(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ST(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Rl(t,e){return t.slice(ot(t,e,!1),e)}function Pl(t,e){return t.slice(e,ot(t,e))}function ST(t){return(e,n,i)=>!i[0].length||(t(Rl(i.input,i.index))!=Pe.Word||t(Pl(i.input,i.index))!=Pe.Word)&&(t(Pl(i.input,i.index+i[0].length))!=Pe.Word||t(Rl(i.input,i.index+i[0].length))!=Pe.Word)}class CT extends my{nextMatch(e,n,i){let s=ws(this.spec,e,i,e.doc.length).next();return s.done&&(s=ws(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let r=Math.max(n,i-s*1e4),o=ws(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==n||l.from>r+10))return l;if(r==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let r=+i.slice(0,s);if(r>0&&r<e.match.length)return e.match[r]+i.slice(s)}return n})}matchAll(e,n){let i=ws(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=ws(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const zr=le.define(),Lf=le.define(),Ci=lt.define({create(t){return new ec(Ah(t).create(),null)},update(t,e){for(let n of e.effects)n.is(zr)?t=new ec(n.value.create(),t.panel):n.is(Lf)&&(t=new ec(t.query,n.value?Df:null));return t},provide:t=>$r.from(t,e=>e.panel)});class ec{constructor(e,n){this.query=e,this.panel=n}}const kT=Z.mark({class:"cm-searchMatch"}),AT=Z.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_T=$e.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ci))}update(t){let e=t.state.field(Ci);(e!=t.startState.field(Ci)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Z.none;let{view:n}=this,i=new Qn;for(let s=0,r=n.visibleRanges,o=r.length;s<o;s++){let{from:l,to:a}=r[s];for(;s<o-1&&a>r[s+1].from-500;)a=r[++s].to;t.highlight(n.state,l,a,(c,h)=>{let f=n.state.selection.ranges.some(u=>u.from==c&&u.to==h);i.add(c,h,f?AT:kT)})}return i.finish()}},{decorations:t=>t.decorations});function lo(t){return e=>{let n=e.state.field(Ci,!1);return n&&n.query.spec.valid?t(e,n):yy(e)}}const Il=lo((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let s=N.single(i.from,i.to),r=t.state.facet(zs);return t.dispatch({selection:s,effects:[Rf(t,i),r.scrollToMatch(s.main,t)],userEvent:"select.search"}),by(t),!0}),Nl=lo((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);if(!s)return!1;let r=N.single(s.from,s.to),o=t.state.facet(zs);return t.dispatch({selection:r,effects:[Rf(t,s),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),by(t),!0}),MT=lo((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:N.create(n.map(i=>N.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),TT=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,r=[],o=0;for(let l=new $s(t.doc,t.sliceDoc(i,s));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(N.range(l.value.from,l.value.to))}return e(t.update({selection:N.create(r,o),userEvent:"select.search.matches"})),!0},Pp=lo((t,{query:e})=>{let{state:n}=t,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,i,i);if(!r)return!1;let o=r,l=[],a,c,h=[];o.from==i&&o.to==s&&(c=n.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),h.push(q.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return o&&(a=N.single(o.from,o.to).map(f),h.push(Rf(t,o)),h.push(n.facet(zs).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:h,userEvent:"input.replace"}),!0}),ET=lo((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:r,to:o}=s;return{from:r,to:o,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:q.announce.of(i),userEvent:"input.replace.all"}),!0});function Df(t){return t.state.facet(zs).createPanel(t)}function Ah(t,e){var n,i,s,r,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=t.facet(zs);return new py({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:c.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function gy(t){let e=Wr(t,Df);return e&&e.dom.querySelector("[main-field]")}function by(t){let e=gy(t);e&&e==t.root.activeElement&&e.select()}const yy=t=>{let e=t.state.field(Ci,!1);if(e&&e.panel){let n=gy(t);if(n&&n!=t.root.activeElement){let i=Ah(t.state,e.query.spec);i.valid&&t.dispatch({effects:zr.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[Lf.of(!0),e?zr.of(Ah(t.state,e.query.spec)):le.appendConfig.of(RT)]});return!0},vy=t=>{let e=t.state.field(Ci,!1);if(!e||!e.panel)return!1;let n=Wr(t,Df);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Lf.of(!1)}),!0},OT=[{key:"Mod-f",run:yy,scope:"editor search-panel"},{key:"F3",run:Il,shift:Nl,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Il,shift:Nl,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:vy,scope:"editor search-panel"},{key:"Mod-Shift-l",run:TT},{key:"Mod-Alt-g",run:lT},{key:"Mod-d",run:vT,preventDefault:!0}];class LT{constructor(e){this.view=e;let n=this.query=e.state.field(Ci).query.spec;this.commit=this.commit.bind(this),this.searchField=ke("input",{value:n.search,placeholder:Rt(e,"Find"),"aria-label":Rt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ke("input",{value:n.replace,placeholder:Rt(e,"Replace"),"aria-label":Rt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ke("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=ke("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=ke("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,r,o){return ke("button",{class:"cm-button",name:s,onclick:r,type:"button"},o)}this.dom=ke("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Il(e),[Rt(e,"next")]),i("prev",()=>Nl(e),[Rt(e,"previous")]),i("select",()=>MT(e),[Rt(e,"all")]),ke("label",null,[this.caseField,Rt(e,"match case")]),ke("label",null,[this.reField,Rt(e,"regexp")]),ke("label",null,[this.wordField,Rt(e,"by word")]),...e.state.readOnly?[]:[ke("br"),this.replaceField,i("replace",()=>Pp(e),[Rt(e,"replace")]),i("replaceAll",()=>ET(e),[Rt(e,"replace all")])],ke("button",{name:"close",onclick:()=>vy(e),"aria-label":Rt(e,"close"),type:"button"},[""])])}commit(){let e=new py({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:zr.of(e)}))}keydown(e){Ik(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Nl:Il)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Pp(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(zr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(zs).top}}function Rt(t,e){return t.state.phrase(e)}const No=30,Bo=/[\s\.,:;?!]/;function Rf(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,r=Math.max(i.from,e-No),o=Math.min(s,n+No),l=t.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<No;a++)if(!Bo.test(l[a+1])&&Bo.test(l[a])){l=l.slice(a);break}}if(o!=s){for(let a=l.length-1;a>l.length-No;a--)if(!Bo.test(l[a-1])&&Bo.test(l[a])){l=l.slice(0,a);break}}return q.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const DT=q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RT=[Ci,cs.low(_T),DT];class wy{constructor(e,n,i,s){this.state=e,this.pos=n,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=pt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),s=n.text.slice(i-n.from,this.pos-n.from),r=s.search(xy(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Ip(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function PT(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let r=1;r<s.length;r++)n[s[r]]=!0}let i=Ip(e)+Ip(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function IT(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:PT(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:n}:null}}class Np{constructor(e,n,i,s){this.completion=e,this.source=n,this.match=i,this.score=s}}function es(t){return t.selection.main.from}function xy(t,e){var n;let{source:i}=t,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?t:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Sy=ii.define();function NT(t,e,n,i){let{main:s}=t.selection,r=n-s.from,o=i-s.from;return{...t.changeByRange(l=>{if(l!=s&&n!=i&&t.sliceDoc(l.from+r,l.from+o)!=t.sliceDoc(n,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+r,to:i==s.from?l.to:l.from+o,insert:a},range:N.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Bp=new WeakMap;function BT(t){if(!Array.isArray(t))return t;let e=Bp.get(t);return e||Bp.set(t,e=IT(t)),e}const Bl=le.define(),Kr=le.define();class FT{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=At(e,n),s=An(i);this.chars.push(i);let r=e.slice(n,n+s),o=r.toUpperCase();this.folded.push(At(o==r?r.toLowerCase():o,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:s,precise:r,byWord:o}=this;if(n.length==1){let w=At(e,0),A=An(w),x=A==e.length?0:-100;if(w!=n[0])if(w==i[0])x+=-200;else return null;return this.ret(x,[0,A])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,c=0;if(l<0){for(let w=0,A=Math.min(e.length,200);w<A&&c<a;){let x=At(e,w);(x==n[c]||x==i[c])&&(s[c++]=w),w+=An(x)}if(c<a)return null}let h=0,f=0,u=!1,d=0,p=-1,g=-1,v=/[a-z]/.test(e),m=!0;for(let w=0,A=Math.min(e.length,200),x=0;w<A&&f<a;){let C=At(e,w);l<0&&(h<a&&C==n[h]&&(r[h++]=w),d<a&&(C==n[d]||C==i[d]?(d==0&&(p=w),g=w+1,d++):d=0));let M,k=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(M=of(C))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!w||k==1&&v||x==0&&k!=0)&&(n[f]==C||i[f]==C&&(u=!0)?o[f++]=w:o.length&&(m=!1)),x=k,w+=An(C)}return f==a&&o[0]==0&&m?this.result(-100+(u?-200:0),o,e):d==a&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[p,g]):f==a?this.result(-100+(u?-200:0)+-700+(m?0:-1100),o,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,i){let s=[],r=0;for(let o of n){let l=o+(this.astral?An(At(i,o)):1);r&&s[r-1]==o?s[r-1]=l:(s[r++]=o,s[r++]=l)}return this.ret(e-i.length,s)}}class HT{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Xe=Y.define({combine(t){return In(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:VT,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>Fp(e(i),n(i)),optionClass:(e,n)=>i=>Fp(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function Fp(t,e){return t?e?t+" "+e:t:e}function VT(t,e,n,i,s,r){let o=t.textDirection==Te.RTL,l=o,a=!1,c="top",h,f,u=e.left-s.left,d=s.right-e.right,p=i.right-i.left,g=i.bottom-i.top;if(l&&u<Math.min(p,d)?l=!1:!l&&d<Math.min(p,u)&&(l=!0),p<=(l?u:d))h=Math.max(s.top,Math.min(n.top,s.bottom-g))-e.top,f=Math.min(400,l?u:d);else{a=!0,f=Math.min(400,(o?e.right:s.right-e.left)-30);let w=s.bottom-e.bottom;w>=g||w>e.top?h=n.bottom-e.top:(c="bottom",h=e.bottom-n.top)}let v=(e.bottom-e.top)/r.offsetHeight,m=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${h/v}px; max-width: ${f/m}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function WT(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,s,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let c=0;c<r.length;){let h=r[c++],f=r[c++];h>a&&o.appendChild(document.createTextNode(l.slice(a,h)));let u=o.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(l.slice(h,f))),u.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function tc(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class $T{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:r,selected:o}=s.open,l=e.state.facet(Xe);this.optionContent=WT(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=tc(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(n).open;for(let h=a.target,f;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(f=/-(\d+)$/.exec(h.id))&&+f[1]<c.length){this.applyCompletion(e,c[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Xe).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Kr.of(null)})}),this.showOptions(r,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:r,selected:o,disabled:l}=i.open;(!s.open||s.open.options!=r)&&(this.range=tc(r.length,o,e.state.facet(Xe).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=tc(n.options.length,n.selected,this.view.state.facet(Xe).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let r=typeof s=="string"?document.createTextNode(s):s(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Tt(this.view.state,o,"completion info")):this.addInfoPane(r,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:r}=e;i.appendChild(s),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&jT(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return s.top>Math.min(r.bottom,n.bottom)-10||s.bottom<Math.max(r.top,n.top)+10?null:this.view.state.facet(Xe).positionInfo(this.view,n,s,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",o=>{o.target==s&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let u=typeof c=="string"?c:c.name;if(u!=r&&(o>i.from||i.from==0))if(r=u,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let d=s.appendChild(document.createElement("completion-section"));d.textContent=u}}const h=s.appendChild(document.createElement("li"));h.id=n+"-"+o,h.setAttribute("role","option");let f=this.optionClass(l);f&&(h.className=f);for(let u of this.optionContent){let d=u(l,this.view.state,this.view,a);d&&h.appendChild(d)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function UT(t,e){return n=>new $T(n,t,e)}function jT(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/s)}function Hp(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function zT(t,e){let n=[],i=null,s=c=>{n.push(c);let{section:h}=c.completion;if(h){i||(i=[]);let f=typeof h=="string"?h:h.name;i.some(u=>u.name==f)||i.push(typeof h=="string"?{name:f}:h)}},r=e.facet(Xe);for(let c of t)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)s(new Np(f,c.source,h?h(f):[],1e9-n.length));else{let f=e.sliceDoc(c.from,c.to),u,d=r.filterStrict?new HT(f):new FT(f);for(let p of c.result.options)if(u=d.match(p.label)){let g=p.displayLabel?h?h(p,u.matched):[]:u.matched;s(new Np(p,c.source,g,u.score+(p.boost||0)))}}}if(i){let c=Object.create(null),h=0,f=(u,d)=>{var p,g;return((p=u.rank)!==null&&p!==void 0?p:1e9)-((g=d.rank)!==null&&g!==void 0?g:1e9)||(u.name<d.name?-1:1)};for(let u of i.sort(f))h-=1e5,c[u.name]=h;for(let u of n){let{section:d}=u.completion;d&&(u.score+=c[typeof d=="string"?d:d.name])}}let o=[],l=null,a=r.compareCompletions;for(let c of n.sort((h,f)=>f.score-h.score||a(h.completion,f.completion))){let h=c.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?o.push(c):Hp(c.completion)>Hp(l)&&(o[o.length-1]=c),l=c.completion}return o}class ks{constructor(e,n,i,s,r,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ks(this.options,Vp(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,s,r,o){if(s&&!o&&e.some(c=>c.isPending))return s.setDisabled();let l=zT(e,n);if(!l.length)return s&&e.some(c=>c.isPending)?s.setDisabled():null;let a=n.facet(Xe).selectOnOpen?0:-1;if(s&&s.selected!=a&&s.selected!=-1){let c=s.options[s.selected].completion;for(let h=0;h<l.length;h++)if(l[h].completion==c){a=h;break}}return new ks(l,Vp(i,a),{pos:e.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:JT,above:r.aboveCursor},s?s.timestamp:Date.now(),a,!1)}map(e){return new ks(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new ks(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Fl{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Fl(YT,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Xe),r=(i.override||n.languageDataAt("autocomplete",es(n)).map(BT)).map(a=>(this.active.find(h=>h.source==a)||new zt(a,this.active.some(h=>h.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,c)=>a==this.active[c])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(Pf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!KT(r,this.active)||l?o=ks.build(r,n,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new zt(a.source,0):a));for(let a of e.effects)a.is(ky)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Fl(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?qT:GT}}function KT(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let s=n==t.length,r=i==e.length;if(s||r)return s==r;if(t[n++].result!=e[i++].result)return!1}}const qT={"aria-autocomplete":"list"},GT={};function Vp(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const YT=[];function Cy(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Sy);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class zt{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Cy(e,n),s=this;(i&8||i&16&&this.touches(e))&&(s=new zt(s.source,0)),i&4&&s.state==0&&(s=new zt(this.source,1)),s=s.updateFor(e,i);for(let r of e.effects)if(r.is(Bl))s=new zt(s.source,1,r.value);else if(r.is(Kr))s=new zt(s.source,0);else if(r.is(Pf))for(let o of r.value)o.source==s.source&&(s=o);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(es(e.state))}}class Ds extends zt{constructor(e,n,i,s,r,o){super(e,3,n),this.limit=i,this.result=s,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=es(e.state);if(l>o||!s||n&2&&(es(e.startState)==this.from||l<this.limit))return new zt(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return XT(s.validFor,e.state,r,o)?new Ds(this.source,this.explicit,a,s,r,o):s.update&&(s=s.update(s,r,o,new wy(e.state,l,!1)))?new Ds(this.source,this.explicit,a,s,s.from,(i=s.to)!==null&&i!==void 0?i:es(e.state)):new zt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ds(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new zt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function XT(t,e,n,i){if(!t)return!1;let s=e.sliceDoc(n,i);return typeof t=="function"?t(s,n,i,e):xy(t,!0).test(s)}const Pf=le.define({map(t,e){return t.map(n=>n.map(e))}}),ky=le.define(),Mt=lt.define({create(){return Fl.start()},update(t,e){return t.update(e)},provide:t=>[wf.from(t,e=>e.tooltip),q.contentAttributes.from(t,e=>e.attrs)]});function If(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Mt).active.find(s=>s.source==e.source);return i instanceof Ds?(typeof n=="string"?t.dispatch({...NT(t.state,n,i.from,i.to),annotations:Sy.of(e.completion)}):n(t,e.completion,i.from,i.to),!0):!1}const JT=UT(Mt,If);function Fo(t,e="option"){return n=>{let i=n.state.field(Mt,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Xe).interactionDelay)return!1;let s=1,r;e=="page"&&(r=fb(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:ky.of(l)}),!0}}const QT=t=>{let e=t.state.field(Mt,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Xe).interactionDelay?!1:If(t,e.open.options[e.open.selected])},nc=t=>t.state.field(Mt,!1)?(t.dispatch({effects:Bl.of(!0)}),!0):!1,ZT=t=>{let e=t.state.field(Mt,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Kr.of(null)}),!0)};class eE{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const tE=50,nE=1e3,iE=$e.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Mt).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Mt),n=t.state.facet(Xe);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Mt)==e)return;let i=t.transactions.some(r=>{let o=Cy(r,n);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>tE&&Date.now()-o.time>nE){for(let l of o.context.abortListeners)try{l()}catch(a){Tt(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is(Bl)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Mt);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xe).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=es(e),i=new wy(e,n,t.explicit,this.view),s=new eE(t,i);this.running.push(s),Promise.resolve(t.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Kr.of(null)}),Tt(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xe).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Xe),i=this.view.state.field(Mt);for(let s=0;s<this.running.length;s++){let r=this.running[s];if(r.done===void 0)continue;if(this.running.splice(s--,1),r.done){let l=es(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),c=new Ds(r.active.source,r.active.explicit,a,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:l);for(let h of r.updates)c=c.update(h,n);if(c.hasResult()){e.push(c);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new zt(r.active.source,0);for(let a of r.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Pf.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Mt,!1);if(e&&e.tooltip&&this.view.state.facet(Xe).closeOnBlur){let n=e.open&&fb(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Kr.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Bl.of(!1)}),20),this.composing=0}}}),sE=typeof navigator=="object"&&/Win/.test(navigator.platform),rE=cs.highest(q.domEventHandlers({keydown(t,e){let n=e.state.field(Mt,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(sE&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],s=n.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||s.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&If(e,i),!1}})),oE=q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),qr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Yi=le.define({map(t,e){let n=e.mapPos(t,-1,xt.TrackAfter);return n??void 0}}),Nf=new class extends ns{};Nf.startSide=1;Nf.endSide=-1;const Ay=lt.define({create(){return ge.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(Yi)&&(t=t.update({add:[Nf.range(n.value,n.value+1)]}));return t}});function lE(){return[cE,Ay]}const ic="()[]{}<>";function _y(t){for(let e=0;e<ic.length;e+=2)if(ic.charCodeAt(e)==t)return ic.charAt(e+1);return of(t<128?t:t+1)}function My(t,e){return t.languageDataAt("closeBrackets",e)[0]||qr}const aE=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),cE=q.inputHandler.of((t,e,n,i)=>{if((aE?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(i.length>2||i.length==2&&An(At(i,0))==1||e!=s.from||n!=s.to)return!1;let r=uE(t.state,i);return r?(t.dispatch(r),!0):!1}),hE=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=My(t,t.selection.main.head).brackets||qr.brackets,s=null,r=t.changeByRange(o=>{if(o.empty){let l=dE(t.doc,o.head);for(let a of i)if(a==l&&pa(t.doc,o.head)==_y(At(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:N.cursor(o.head-a.length)}}return{range:s=o}});return s||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},fE=[{key:"Backspace",run:hE}];function uE(t,e){let n=My(t,t.selection.main.head),i=n.brackets||qr.brackets;for(let s of i){let r=_y(At(s,0));if(e==s)return r==s?gE(t,s,i.indexOf(s+s+s)>-1,n):pE(t,s,r,n.before||qr.before);if(e==r&&Ty(t,t.selection.main.from))return mE(t,s,r)}return null}function Ty(t,e){let n=!1;return t.field(Ay).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function pa(t,e){let n=t.sliceString(e,e+2);return n.slice(0,An(At(n,0)))}function dE(t,e){let n=t.sliceString(e-2,e);return An(At(n,0))==n.length?n:n.slice(1)}function pE(t,e,n,i){let s=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Yi.of(o.to+e.length),range:N.range(o.anchor+e.length,o.head+e.length)};let l=pa(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+n,from:o.head},effects:Yi.of(o.head+e.length),range:N.cursor(o.head+e.length)}:{range:s=o}});return s?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function mE(t,e,n){let i=null,s=t.changeByRange(r=>r.empty&&pa(t.doc,r.head)==n?{changes:{from:r.head,to:r.head+n.length,insert:n},range:N.cursor(r.head+n.length)}:i={range:r});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function gE(t,e,n,i){let s=i.stringPrefixes||qr.stringPrefixes,r=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Yi.of(l.to+e.length),range:N.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=pa(t.doc,a),h;if(c==e){if(Wp(t,a))return{changes:{insert:e+e,from:a},effects:Yi.of(a+e.length),range:N.cursor(a+e.length)};if(Ty(t,a)){let u=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+u.length,insert:u},range:N.cursor(a+u.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(h=$p(t,a-2*e.length,s))>-1&&Wp(t,h))return{changes:{insert:e+e+e+e,from:a},effects:Yi.of(a+e.length),range:N.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=Pe.Word&&$p(t,a,s)>-1&&!bE(t,a,e,s))return{changes:{insert:e+e,from:a},effects:Yi.of(a+e.length),range:N.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Wp(t,e){let n=pt(t).resolveInner(e+1);return n.parent&&n.from==e}function bE(t,e,n,i){let s=pt(t).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+r)),a=l.indexOf(n);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let h=s.firstChild;for(;h&&h.from==s.from&&h.to-h.from>n.length+a;){if(t.sliceDoc(h.to-n.length,h.to)==n)return!1;h=h.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function $p(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=Pe.Word)return e;for(let s of n){let r=e-s.length;if(t.sliceDoc(r,e)==s&&i(t.sliceDoc(r-1,r))!=Pe.Word)return r}return-1}function yE(t={}){return[rE,Mt,Xe.of(t),iE,vE,oE]}const Ey=[{key:"Ctrl-Space",run:nc},{mac:"Alt-`",run:nc},{mac:"Alt-i",run:nc},{key:"Escape",run:ZT},{key:"ArrowDown",run:Fo(!0)},{key:"ArrowUp",run:Fo(!1)},{key:"PageDown",run:Fo(!0,"page")},{key:"PageUp",run:Fo(!1,"page")},{key:"Enter",run:QT}],vE=cs.highest(ra.computeN([Xe],t=>t.facet(Xe).defaultKeymap?[Ey]:[]));class Up{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class zi{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=i.facet(Gr).markerFilter;s&&(e=s(e,i));let r=e.slice().sort((h,f)=>h.from-f.from||h.to-f.to),o=new Qn,l=[],a=0;for(let h=0;;){let f=h==r.length?null:r[h];if(!f&&!l.length)break;let u,d;for(l.length?(u=a,d=l.reduce((g,v)=>Math.min(g,v.to),f&&f.from>u?f.from:1e8)):(u=f.from,d=f.to,l.push(f),h++);h<r.length;){let g=r[h];if(g.from==u&&(g.to>g.from||g.to==u))l.push(g),h++,d=Math.min(g.to,d);else{d=Math.min(g.from,d);break}}let p=DE(l);if(l.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))o.add(u,u,Z.widget({widget:new TE(p),diagnostics:l.slice()}));else{let g=l.reduce((v,m)=>m.markClass?v+" "+m.markClass:v,"");o.add(u,d,Z.mark({class:"cm-lintRange cm-lintRange-"+p+g,diagnostics:l.slice(),inclusiveEnd:l.some(v=>v.to>d)}))}a=d;for(let g=0;g<l.length;g++)l[g].to<=a&&l.splice(g--,1)}let c=o.finish();return new zi(c,n,Us(c))}}function Us(t,e=null,n=0){let i=null;return t.between(n,1e9,(s,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new Up(s,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Up(i.from,r,i.diagnostic)}}),i}function wE(t,e){let n=e.pos,i=e.end||n,s=t.state.facet(Gr).hideOn(t,n,i);if(s!=null)return s;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(Oy))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function xE(t,e){return t.field(Bt,!1)?e:e.concat(le.appendConfig.of(RE))}const Oy=le.define(),Bf=le.define(),Ly=le.define(),Bt=lt.define({create(){return new zi(Z.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,s=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Us(n,t.selected.diagnostic,r)||Us(n,null,r)}!n.size&&s&&e.state.facet(Gr).autoPanel&&(s=null),t=new zi(n,s,i)}for(let n of e.effects)if(n.is(Oy)){let i=e.state.facet(Gr).autoPanel?n.value.length?Yr.open:null:t.panel;t=zi.init(n.value,i,e.state)}else n.is(Bf)?t=new zi(t.diagnostics,n.value?Yr.open:null,t.selected):n.is(Ly)&&(t=new zi(t.diagnostics,t.panel,n.value));return t},provide:t=>[$r.from(t,e=>e.panel),q.decorations.from(t,e=>e.diagnostics)]}),SE=Z.mark({class:"cm-lintRange cm-lintRange-active"});function CE(t,e,n){let{diagnostics:i}=t.state.field(Bt),s,r=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:h})=>{if(e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0)))return s=h.diagnostics,r=a,o=c,!1});let l=t.state.facet(Gr).tooltipFilter;return s&&l&&(s=l(s,t.state)),s?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:kE(t,s)}}}:null}function kE(t,e){return ke("ul",{class:"cm-tooltip-lint"},e.map(n=>Ry(t,n,!1)))}const AE=t=>{let e=t.state.field(Bt,!1);(!e||!e.panel)&&t.dispatch({effects:xE(t.state,[Bf.of(!0)])});let n=Wr(t,Yr.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},jp=t=>{let e=t.state.field(Bt,!1);return!e||!e.panel?!1:(t.dispatch({effects:Bf.of(!1)}),!0)},_E=t=>{let e=t.state.field(Bt,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},ME=[{key:"Mod-Shift-m",run:AE,preventDefault:!0},{key:"F8",run:_E}],Gr=Y.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},In(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Dy(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Ry(t,e,n){var i;let s=n?Dy(e.actions):[];return ke("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ke("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=u=>{if(u.preventDefault(),l)return;l=!0;let d=Us(t.state.field(Bt).diagnostics,e);d&&r.apply(t,d.from,d.to)},{name:c}=r,h=s[o]?c.indexOf(s[o]):-1,f=h<0?c:[c.slice(0,h),ke("u",c.slice(h,h+1)),c.slice(h+1)];return ke("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${h<0?"":` (access key "${s[o]})"`}.`},f)}),e.source&&ke("div",{class:"cm-diagnosticSource"},e.source))}class TE extends si{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ke("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class zp{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ry(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yr{constructor(e){this.view=e,this.items=[];let n=s=>{if(s.keyCode==27)jp(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Dy(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==s.keyCode){let a=Us(this.view.state.field(Bt).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=ke("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=ke("div",{class:"cm-panel-lint"},this.list,ke("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>jp(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Bt).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Bt),i=0,s=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let h of c.diagnostics){if(o.has(h))continue;o.add(h);let f=-1,u;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==h){f=d;break}f<0?(u=new zp(this.view,h),this.items.splice(i,0,u),s=!0):(u=this.items[f],f>i&&(this.items.splice(i,f-i),s=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),r=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new zp(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Bt),i=Us(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ly.of(i)})}static open(e){return new Yr(e)}}function EE(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ho(t){return EE(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const OE=q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ho("#d11")},".cm-lintRange-warning":{backgroundImage:Ho("orange")},".cm-lintRange-info":{backgroundImage:Ho("#999")},".cm-lintRange-hint":{backgroundImage:Ho("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function LE(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function DE(t){let e="hint",n=1;for(let i of t){let s=LE(i.severity);s>n&&(n=s,e=i.severity)}return e}const RE=[Bt,q.decorations.compute([Bt],t=>{let{selected:e,panel:n}=t.field(Bt);return!e||!n||e.from==e.to?Z.none:Z.set([SE.range(e.from,e.to)])}),CA(CE,{hideOn:wE}),OE],PE=[PA(),BA(),Qk(),iM(),E_(),Wk(),Kk(),ue.allowMultipleSelections.of(!0),m_(),L_(P_,{fallback:!0}),W_(),lE(),yE(),uA(),mA(),sA(),fT(),ra.of([...fE,...rT,...OT,...uM,...A_,...Ey,...ME])];let IE=0;class Qe{constructor(e={}){this.id=IE++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ls.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Qe.closedBy=new Qe({deserialize:t=>t.split(" ")});Qe.openedBy=new Qe({deserialize:t=>t.split(" ")});Qe.group=new Qe({deserialize:t=>t.split(" ")});Qe.isolate=new Qe({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Qe.contextHash=new Qe({perNode:!0});Qe.lookAhead=new Qe({perNode:!0});Qe.mounted=new Qe({perNode:!0});const NE=Object.create(null);class ls{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):NE,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new ls(e.name||"",n,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Qe.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(Qe.group),r=-1;r<(s?s.length:0);r++){let o=n[r<0?i.name:s[r]];if(o)return o}}}}ls.none=new ls("",Object.create(null),0,8);var Kp;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Kp||(Kp={}));new Qe({perNode:!0});let BE=0;class $t{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=BE++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof $t&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new $t(i,[],null,[]);if(s.set.push(s),n)for(let r of n.set)s.set.push(r);return s}static defineModifier(e){let n=new Hl(e);return i=>i.modified.indexOf(n)>-1?i:Hl.get(i.base||i,i.modified.concat(n).sort((s,r)=>s.id-r.id))}}let FE=0;class Hl{constructor(e){this.name=e,this.instances=[],this.id=FE++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&HE(n,l.modified));if(i)return i;let s=[],r=new $t(e.name,s,e,n);for(let l of n)l.instances.push(r);let o=VE(n);for(let l of e.set)if(!l.modified.length)for(let a of o)s.push(Hl.get(l,a));return r}}function HE(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function VE(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function WE(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let r=[],o=2,l=s;for(let f=0;;){if(l=="..."&&f>0&&f+3==s.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!u)throw new RangeError("Invalid path: "+s);if(r.push(u[0]=="*"?"":u[0][0]=='"'?JSON.parse(u[0]):u[0]),f+=u[0].length,f==s.length)break;let d=s[f++];if(f==s.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+s);let h=new _h(i,o,a>0?r.slice(0,a):null);e[c]=h.sort(e[c])}}return $E.add(e)}const $E=new Qe;class _h{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_h.empty=new _h([],2,null);function UE(t,e){let n=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))n[r.tag.id]=r.class;else for(let o of r.tag)n[o.id]=r.class;let{scope:i,all:s=null}={};return{style:r=>{let o=s;for(let l of r)for(let a of l.set){let c=n[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}const j=$t.define,Vo=j(),di=j(),qp=j(di),Gp=j(di),pi=j(),Wo=j(pi),sc=j(pi),wn=j(),Wi=j(wn),gn=j(),bn=j(),Mh=j(),nr=j(Mh),$o=j(),ce={comment:Vo,lineComment:j(Vo),blockComment:j(Vo),docComment:j(Vo),name:di,variableName:j(di),typeName:qp,tagName:j(qp),propertyName:Gp,attributeName:j(Gp),className:j(di),labelName:j(di),namespace:j(di),macroName:j(di),literal:pi,string:Wo,docString:j(Wo),character:j(Wo),attributeValue:j(Wo),number:sc,integer:j(sc),float:j(sc),bool:j(pi),regexp:j(pi),escape:j(pi),color:j(pi),url:j(pi),keyword:gn,self:j(gn),null:j(gn),atom:j(gn),unit:j(gn),modifier:j(gn),operatorKeyword:j(gn),controlKeyword:j(gn),definitionKeyword:j(gn),moduleKeyword:j(gn),operator:bn,derefOperator:j(bn),arithmeticOperator:j(bn),logicOperator:j(bn),bitwiseOperator:j(bn),compareOperator:j(bn),updateOperator:j(bn),definitionOperator:j(bn),typeOperator:j(bn),controlOperator:j(bn),punctuation:Mh,separator:j(Mh),bracket:nr,angleBracket:j(nr),squareBracket:j(nr),paren:j(nr),brace:j(nr),content:wn,heading:Wi,heading1:j(Wi),heading2:j(Wi),heading3:j(Wi),heading4:j(Wi),heading5:j(Wi),heading6:j(Wi),contentSeparator:j(wn),list:j(wn),quote:j(wn),emphasis:j(wn),strong:j(wn),link:j(wn),monospace:j(wn),strikethrough:j(wn),inserted:j(),deleted:j(),changed:j(),invalid:j(),meta:$o,documentMeta:j($o),annotation:j($o),processingInstruction:j($o),definition:$t.defineModifier("definition"),constant:$t.defineModifier("constant"),function:$t.defineModifier("function"),standard:$t.defineModifier("standard"),local:$t.defineModifier("local"),special:$t.defineModifier("special")};for(let t in ce){let e=ce[t];e instanceof $t&&(e.name=t)}UE([{tag:ce.link,class:"tok-link"},{tag:ce.heading,class:"tok-heading"},{tag:ce.emphasis,class:"tok-emphasis"},{tag:ce.strong,class:"tok-strong"},{tag:ce.keyword,class:"tok-keyword"},{tag:ce.atom,class:"tok-atom"},{tag:ce.bool,class:"tok-bool"},{tag:ce.url,class:"tok-url"},{tag:ce.labelName,class:"tok-labelName"},{tag:ce.inserted,class:"tok-inserted"},{tag:ce.deleted,class:"tok-deleted"},{tag:ce.literal,class:"tok-literal"},{tag:ce.string,class:"tok-string"},{tag:ce.number,class:"tok-number"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],class:"tok-string2"},{tag:ce.variableName,class:"tok-variableName"},{tag:ce.local(ce.variableName),class:"tok-variableName tok-local"},{tag:ce.definition(ce.variableName),class:"tok-variableName tok-definition"},{tag:ce.special(ce.variableName),class:"tok-variableName2"},{tag:ce.definition(ce.propertyName),class:"tok-propertyName tok-definition"},{tag:ce.typeName,class:"tok-typeName"},{tag:ce.namespace,class:"tok-namespace"},{tag:ce.className,class:"tok-className"},{tag:ce.macroName,class:"tok-macroName"},{tag:ce.propertyName,class:"tok-propertyName"},{tag:ce.operator,class:"tok-operator"},{tag:ce.comment,class:"tok-comment"},{tag:ce.meta,class:"tok-meta"},{tag:ce.invalid,class:"tok-invalid"},{tag:ce.punctuation,class:"tok-punctuation"}]);var rc;typeof navigator<"u"&&(!((rc=navigator.scheduling)===null||rc===void 0)&&rc.isInputPending);const ma=Y.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function jE(t){let e=t.facet(ma);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function zE(t,e){let n="",i=t.tabSize,s=t.facet(ma)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let r=0;r<e;r++)n+=s;return n}const KE=Object.create(null),Yp=[ls.none],Xp=[],Jp=Object.create(null),qE=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])qE[t]=GE(KE,e);function oc(t,e){Xp.indexOf(t)>-1||(Xp.push(t),console.warn(e))}function GE(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let h=t[c]||ce[c];h?typeof h=="function"?a.length?a=a.map(h):oc(c,`Modifier ${c} used at start of tag`):a.length?oc(c,`Tag ${c} used as modifier`):a=Array.isArray(h)?h:[h]:oc(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(l=>l.id),r=Jp[s];if(r)return r.id;let o=Jp[s]=ls.define({id:Yp.length,name:i,props:[WE({[i]:n})]});return Yp.push(o),o.id}Te.RTL,Te.LTR;function Py(t,e){let n=-1;return t.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,s,i),n=l.number),o=l.to+1}let r=t.changes(s);return{changes:s,range:N.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const YE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Py(t,(n,i)=>{i.push({from:n.from,insert:t.facet(ma)})}),{userEvent:"input.indent"})),!0),XE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Py(t,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let r=hs(s,t.tabSize),o=0,l=zE(t,Math.max(0,r-jE(t)));for(;o<s.length&&o<l.length&&s.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+s.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),JE={key:"Tab",run:YE,shift:XE};/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var QE=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[PE]}),ZE=Symbol("vue-codemirror-global-config"),vt,eO=function(t){var e=t.onUpdate,n=t.onChange,i=t.onFocus,s=t.onBlur,r=(function(o,l){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(c=Object.getOwnPropertySymbols(o);h<c.length;h++)l.indexOf(c[h])<0&&Object.prototype.propertyIsEnumerable.call(o,c[h])&&(a[c[h]]=o[c[h]])}return a})(t,["onUpdate","onChange","onFocus","onBlur"]);return ue.create({doc:r.doc,selection:r.selection,extensions:(Array.isArray(r.extensions)?r.extensions:[r.extensions]).concat([q.updateListener.of((function(o){e(o),o.docChanged&&n(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?i(o):s(o))}))])})},xs=function(t){var e=new eo;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:le.appendConfig.of(e.of(n))})}}},Qp=function(t,e){var n=xs(t),i=n.compartment,s=n.run;return function(r){var o=i.get(t.state);s(r??o!==e?e:[])}},Uo={type:Boolean,default:void 0},tO={autofocus:Uo,disabled:Uo,indentWithTab:Uo,tabSize:Number,placeholder:String,style:Object,autoDestroy:Uo,phrases:Object,root:Object,extensions:Array,selection:Object},nO={modelValue:{type:String,default:""}},iO=Object.assign(Object.assign({},tO),nO);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(vt||(vt={}));var Ki={};Ki[vt.Change]=function(t,e){return!0},Ki[vt.Update]=function(t){return!0},Ki[vt.Focus]=function(t){return!0},Ki[vt.Blur]=function(t){return!0},Ki[vt.Ready]=function(t){return!0};var Iy={};Iy[vt.ModelUpdate]=Ki[vt.Change];var sO=Object.assign(Object.assign({},Ki),Iy),rO=ti({name:"VueCodemirror",props:Object.assign({},iO),emits:Object.assign({},sO),setup:function(t,e){var n=zo(),i=zo(),s=zo(),r=Object.assign(Object.assign({},QE),Qi(ZE,{})),o=jn((function(){var l={};return Object.keys(me(t)).forEach((function(a){var c;a!=="modelValue"&&(l[a]=(c=t[a])!==null&&c!==void 0?c:r[a])})),l}));return Gl((function(){var l;i.value=eO({doc:t.modelValue,selection:o.value.selection,extensions:(l=r.extensions)!==null&&l!==void 0?l:[],onFocus:function(c){return e.emit(vt.Focus,c)},onBlur:function(c){return e.emit(vt.Blur,c)},onUpdate:function(c){return e.emit(vt.Update,c)},onChange:function(c,h){c!==t.modelValue&&(e.emit(vt.Change,c,h),e.emit(vt.ModelUpdate,c,h))}}),s.value=(function(c){return new q(Object.assign({},c))})({state:i.value,parent:n.value,root:o.value.root});var a=(function(c){var h=function(){return c.state.doc.toString()},f=xs(c).run,u=Qp(c,[q.editable.of(!1),ue.readOnly.of(!0)]),d=Qp(c,ra.of([JE])),p=xs(c).run,g=xs(c).run,v=xs(c).run,m=xs(c).run;return{focus:function(){return c.focus()},getDoc:h,setDoc:function(w){w!==h()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:w}})},reExtensions:f,toggleDisabled:u,toggleIndentWithTab:d,setTabSize:function(w){p([ue.tabSize.of(w),ma.of(" ".repeat(w))])},setPhrases:function(w){g([ue.phrases.of(w)])},setPlaceholder:function(w){v(aA(w))},setStyle:function(w){w===void 0&&(w={}),m(q.theme({"&":Object.assign({},w)}))}}})(s.value);bt((function(){return t.modelValue}),(function(c){c!==a.getDoc()&&a.setDoc(c)})),bt((function(){return t.extensions}),(function(c){return a.reExtensions(c||[])}),{immediate:!0}),bt((function(){return o.value.disabled}),(function(c){return a.toggleDisabled(c)}),{immediate:!0}),bt((function(){return o.value.indentWithTab}),(function(c){return a.toggleIndentWithTab(c)}),{immediate:!0}),bt((function(){return o.value.tabSize}),(function(c){return a.setTabSize(c)}),{immediate:!0}),bt((function(){return o.value.phrases}),(function(c){return a.setPhrases(c||{})}),{immediate:!0}),bt((function(){return o.value.placeholder}),(function(c){return a.setPlaceholder(c)}),{immediate:!0}),bt((function(){return o.value.style}),(function(c){return a.setStyle(c)}),{immediate:!0}),o.value.autofocus&&a.focus(),e.emit(vt.Ready,{state:i.value,view:s.value,container:n.value})})),Uh((function(){o.value.autoDestroy&&s.value&&(function(l){l.destroy()})(s.value)})),function(){return Gh("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),oO=rO;const lO={class:"editor"},aO=ti({__name:"CodeEditor",setup(t){const e=rf();return(n,i)=>(Cn(),Un(it,null,[tt("div",lO,[Je(Re(oO),{modelValue:Re(e).programCode,"onUpdate:modelValue":i[0]||(i[0]=s=>Re(e).programCode=s),placeholder:"Zaprogramuj maszyn",style:{height:"300px"},"tab-size":2},null,8,["modelValue"]),tt("button",{onClick:i[1]||(i[1]=(...s)=>Re(e).loadProgram&&Re(e).loadProgram(...s))},"Parsuj")]),_1(tt("input",{"onUpdate:modelValue":i[2]||(i[2]=s=>Re(e).initialInput=s),placeholder:"Wprowad pocztkowy stan, np. 11111"},null,512),[[fw,Re(e).initialInput]]),tt("button",{onClick:i[3]||(i[3]=(...s)=>Re(e).loadInput&&Re(e).loadInput(...s))},"Zaaduj wejcie"),tt("button",{onClick:i[4]||(i[4]=(...s)=>Re(e).step&&Re(e).step(...s))}," Krok"),tt("button",{onClick:i[5]||(i[5]=s=>Re(e).run(500))}," Start"),tt("button",{onClick:i[6]||(i[6]=(...s)=>Re(e).stop&&Re(e).stop(...s))}," Stop"),tt("p",null,"Stan: "+xi(Re(e).currentState),1)],64))}}),cO={class:"app"},hO=ti({__name:"App",setup(t){return(e,n)=>(Cn(),Un("main",cO,[Je(TS),tt("h1",null,xi(e.$t("header")),1),Je(PS),Je(NS),Je(aO)]))}}),Ff=pw(hO);Ff.use(bw());Ff.use(_S);Ff.mount("#app");
